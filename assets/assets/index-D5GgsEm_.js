import{p as Fs}from"./browser-MZq3UDaI.js";import{b as Q,r as Yy}from"./index-B0XivnB5.js";import{g as Mr}from"./_commonjsHelpers-DaWZu8wl.js";import{C as $h,B as Ue,r as Zy,a as Be,s as Qy,v as po,b as jh,c as di,d as vi,e as eg,f as tg,g as rg,h as ng,i as os,j as ig,k as sg,l as ag,m as og,n as cg,o as fg,p as ug,q as lg,t as dg,u as ra,w as hg,x as pg,y as xg,z as yg,P as d0,T as gg,S as bg,A as mg}from"./index-BOtcPnC0.js";function wg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const na=()=>{throw new Error("Unimplemented")};globalThis.crypto??={};globalThis.crypto.subtle??={};globalThis.crypto.subtle.generateKey??=na;globalThis.crypto.subtle.importKey??=na;globalThis.crypto.subtle.exportKey??=na;globalThis.crypto.subtle.digest??=na;globalThis.crypto.subtle.sign??=na;function Gh(t,e){return function(){return t.apply(e,arguments)}}const{toString:vg}=Object.prototype,{getPrototypeOf:xu}=Object,{iterator:xo,toStringTag:Wh}=Symbol,yo=(t=>e=>{const r=vg.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Qr=t=>(t=t.toLowerCase(),e=>yo(e)===t),go=t=>e=>typeof e===t,{isArray:Gi}=Array,Ki=go("undefined");function ia(t){return t!==null&&!Ki(t)&&t.constructor!==null&&!Ki(t.constructor)&&wr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vh=Qr("ArrayBuffer");function _g(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Vh(t.buffer),e}const Eg=go("string"),wr=go("function"),Jh=go("number"),sa=t=>t!==null&&typeof t=="object",Sg=t=>t===!0||t===!1,Oa=t=>{if(yo(t)!=="object")return!1;const e=xu(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Wh in t)&&!(xo in t)},Ag=t=>{if(!sa(t)||ia(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Tg=Qr("Date"),Rg=Qr("File"),Pg=Qr("Blob"),kg=Qr("FileList"),Bg=t=>sa(t)&&wr(t.pipe),Mg=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||wr(t.append)&&((e=yo(t))==="formdata"||e==="object"&&wr(t.toString)&&t.toString()==="[object FormData]"))},Cg=Qr("URLSearchParams"),[Ig,Ug,Og,qg]=["ReadableStream","Request","Response","Headers"].map(Qr),Ng=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function aa(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Gi(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(ia(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function Xh(t,e){if(ia(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const ai=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,Yh=t=>!Ki(t)&&t!==ai;function jf(){const{caseless:t,skipUndefined:e}=Yh(this)&&this||{},r={},n=(i,s)=>{const a=t&&Xh(r,s)||s;Oa(r[a])&&Oa(i)?r[a]=jf(r[a],i):Oa(i)?r[a]=jf({},i):Gi(i)?r[a]=i.slice():(!e||!Ki(i))&&(r[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&aa(arguments[i],n);return r}const Lg=(t,e,r,{allOwnKeys:n}={})=>(aa(e,(i,s)=>{r&&wr(i)?t[s]=Gh(i,r):t[s]=i},{allOwnKeys:n}),t),Dg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Fg=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Hg=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&xu(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Kg=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},zg=t=>{if(!t)return null;if(Gi(t))return t;let e=t.length;if(!Jh(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},$g=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&xu(Uint8Array)),jg=(t,e)=>{const n=(t&&t[xo]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Gg=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Wg=Qr("HTMLFormElement"),Vg=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),h0=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Jg=Qr("RegExp"),Zh=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};aa(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},Xg=t=>{Zh(t,(e,r)=>{if(wr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(wr(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Yg=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Gi(t)?n(t):n(String(t).split(e)),r},Zg=()=>{},Qg=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function eb(t){return!!(t&&wr(t.append)&&t[Wh]==="FormData"&&t[xo])}const tb=t=>{const e=new Array(10),r=(n,i)=>{if(sa(n)){if(e.indexOf(n)>=0)return;if(ia(n))return n;if(!("toJSON"in n)){e[i]=n;const s=Gi(n)?[]:{};return aa(n,(a,o)=>{const c=r(a,i+1);!Ki(c)&&(s[o]=c)}),e[i]=void 0,s}}return n};return r(t,0)},rb=Qr("AsyncFunction"),nb=t=>t&&(sa(t)||wr(t))&&wr(t.then)&&wr(t.catch),Qh=((t,e)=>t?setImmediate:e?((r,n)=>(ai.addEventListener("message",({source:i,data:s})=>{i===ai&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),ai.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",wr(ai.postMessage)),ib=typeof queueMicrotask<"u"?queueMicrotask.bind(ai):typeof Fs<"u"&&Fs.nextTick||Qh,sb=t=>t!=null&&wr(t[xo]),V={isArray:Gi,isArrayBuffer:Vh,isBuffer:ia,isFormData:Mg,isArrayBufferView:_g,isString:Eg,isNumber:Jh,isBoolean:Sg,isObject:sa,isPlainObject:Oa,isEmptyObject:Ag,isReadableStream:Ig,isRequest:Ug,isResponse:Og,isHeaders:qg,isUndefined:Ki,isDate:Tg,isFile:Rg,isBlob:Pg,isRegExp:Jg,isFunction:wr,isStream:Bg,isURLSearchParams:Cg,isTypedArray:$g,isFileList:kg,forEach:aa,merge:jf,extend:Lg,trim:Ng,stripBOM:Dg,inherits:Fg,toFlatObject:Hg,kindOf:yo,kindOfTest:Qr,endsWith:Kg,toArray:zg,forEachEntry:jg,matchAll:Gg,isHTMLForm:Wg,hasOwnProperty:h0,hasOwnProp:h0,reduceDescriptors:Zh,freezeMethods:Xg,toObjectSet:Yg,toCamelCase:Vg,noop:Zg,toFiniteNumber:Qg,findKey:Xh,global:ai,isContextDefined:Yh,isSpecCompliantForm:eb,toJSONObject:tb,isAsyncFn:rb,isThenable:nb,setImmediate:Qh,asap:ib,isIterable:sb};function De(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const ep=De.prototype,tp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{tp[t]={value:t}});Object.defineProperties(De,tp);Object.defineProperty(ep,"isAxiosError",{value:!0});De.from=(t,e,r,n,i,s)=>{const a=Object.create(ep);V.toFlatObject(t,a,function(f){return f!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return De.call(a,o,c,r,n,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",s&&Object.assign(a,s),a};const ab=null;function Gf(t){return V.isPlainObject(t)||V.isArray(t)}function rp(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function p0(t,e,r){return t?t.concat(e).map(function(i,s){return i=rp(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function ob(t){return V.isArray(t)&&!t.some(Gf)}const cb=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function bo(t,e,r){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!V.isUndefined(_[S])});const n=r.metaTokens,i=r.visitor||f,s=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(V.isDate(b))return b.toISOString();if(V.isBoolean(b))return b.toString();if(!c&&V.isBlob(b))throw new De("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(b)||V.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Q.Buffer.from(b):b}function f(b,S,_){let C=b;if(b&&!_&&typeof b=="object"){if(V.endsWith(S,"{}"))S=n?S:S.slice(0,-2),b=JSON.stringify(b);else if(V.isArray(b)&&ob(b)||(V.isFileList(b)||V.endsWith(S,"[]"))&&(C=V.toArray(b)))return S=rp(S),C.forEach(function(q,U){!(V.isUndefined(q)||q===null)&&e.append(a===!0?p0([S],U,s):a===null?S:S+"[]",u(q))}),!1}return Gf(b)?!0:(e.append(p0(_,S,s),u(b)),!1)}const d=[],h=Object.assign(cb,{defaultVisitor:f,convertValue:u,isVisitable:Gf});function g(b,S){if(!V.isUndefined(b)){if(d.indexOf(b)!==-1)throw Error("Circular reference detected in "+S.join("."));d.push(b),V.forEach(b,function(C,F){(!(V.isUndefined(C)||C===null)&&i.call(e,C,V.isString(F)?F.trim():F,S,h))===!0&&g(C,S?S.concat(F):[F])}),d.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return g(t),e}function x0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function yu(t,e){this._pairs=[],t&&bo(t,this,e)}const np=yu.prototype;np.append=function(e,r){this._pairs.push([e,r])};np.toString=function(e){const r=e?function(n){return e.call(this,n,x0)}:x0;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function fb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ip(t,e,r){if(!e)return t;const n=r&&r.encode||fb;V.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=V.isURLSearchParams(e)?e.toString():new yu(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class y0{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(n){n!==null&&e(n)})}}const sp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ub=typeof URLSearchParams<"u"?URLSearchParams:yu,lb=typeof FormData<"u"?FormData:null,db=typeof Blob<"u"?Blob:null,hb={isBrowser:!0,classes:{URLSearchParams:ub,FormData:lb,Blob:db},protocols:["http","https","file","blob","url","data"]},gu=typeof window<"u"&&typeof document<"u",Wf=typeof navigator=="object"&&navigator||void 0,pb=gu&&(!Wf||["ReactNative","NativeScript","NS"].indexOf(Wf.product)<0),xb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yb=gu&&window.location.href||"http://localhost",gb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gu,hasStandardBrowserEnv:pb,hasStandardBrowserWebWorkerEnv:xb,navigator:Wf,origin:yb},Symbol.toStringTag,{value:"Module"})),dr={...gb,...hb};function bb(t,e){return bo(t,new dr.classes.URLSearchParams,{visitor:function(r,n,i,s){return dr.isNode&&V.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function mb(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function wb(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function ap(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=r.length;return a=!a&&V.isArray(i)?i.length:a,c?(V.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!V.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&V.isArray(i[a])&&(i[a]=wb(i[a])),!o)}if(V.isFormData(t)&&V.isFunction(t.entries)){const r={};return V.forEachEntry(t,(n,i)=>{e(mb(n),i,r,0)}),r}return null}function vb(t,e,r){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const oa={transitional:sp,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(ap(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bb(e,this.formSerializer).toString();if((o=V.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bo(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),vb(e)):e}],transformResponse:[function(e){const r=this.transitional||oa.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?De.from(o,De.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dr.classes.FormData,Blob:dr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{oa.headers[t]={}});const _b=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Eb=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&_b[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},g0=Symbol("internals");function cs(t){return t&&String(t).trim().toLowerCase()}function qa(t){return t===!1||t==null?t:V.isArray(t)?t.map(qa):String(t)}function Sb(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Ab=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function nc(t,e,r,n,i){if(V.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!V.isString(e)){if(V.isString(n))return e.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(e)}}function Tb(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Rb(t,e){const r=V.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let vr=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,c,u){const f=cs(c);if(!f)throw new Error("header name must be a non-empty string");const d=V.findKey(i,f);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||c]=qa(o))}const a=(o,c)=>V.forEach(o,(u,f)=>s(u,f,c));if(V.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(V.isString(e)&&(e=e.trim())&&!Ab(e))a(Eb(e),r);else if(V.isObject(e)&&V.isIterable(e)){let o={},c,u;for(const f of e){if(!V.isArray(f))throw TypeError("Object iterator must return a key-value pair");o[u=f[0]]=(c=o[u])?V.isArray(c)?[...c,f[1]]:[c,f[1]]:f[1]}a(o,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=cs(e),e){const n=V.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Sb(i);if(V.isFunction(r))return r.call(this,i,n);if(V.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=cs(e),e){const n=V.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||nc(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=cs(a),a){const o=V.findKey(n,a);o&&(!r||nc(n,n[o],o,r))&&(delete n[o],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||nc(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return V.forEach(this,(i,s)=>{const a=V.findKey(n,s);if(a){r[a]=qa(i),delete r[s];return}const o=e?Tb(s):String(s).trim();o!==s&&delete r[s],r[o]=qa(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return V.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&V.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[g0]=this[g0]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=cs(a);n[o]||(Rb(i,a),n[o]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}};vr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(vr.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});V.freezeMethods(vr);function ic(t,e){const r=this||oa,n=e||r,i=vr.from(n.headers);let s=n.data;return V.forEach(t,function(o){s=o.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function op(t){return!!(t&&t.__CANCEL__)}function Wi(t,e,r){De.call(this,t??"canceled",De.ERR_CANCELED,e,r),this.name="CanceledError"}V.inherits(Wi,De,{__CANCEL__:!0});function cp(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new De("Request failed with status code "+r.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Pb(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function kb(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),f=n[s];a||(a=u),r[i]=c,n[i]=u;let d=s,h=0;for(;d!==i;)h+=r[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const g=f&&u-f;return g?Math.round(h*1e3/g):void 0}}function Bb(t,e){let r=0,n=1e3/e,i,s;const a=(u,f=Date.now())=>{r=f,i=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const f=Date.now(),d=f-r;d>=n?a(u,f):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},n-d)))},()=>i&&a(i)]}const Ya=(t,e,r=3)=>{let n=0;const i=kb(50,250);return Bb(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,c=a-n,u=i(c),f=a<=o;n=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&f?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(d)},r)},b0=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},m0=t=>(...e)=>V.asap(()=>t(...e)),Mb=dr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,dr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(dr.origin),dr.navigator&&/(msie|trident)/i.test(dr.navigator.userAgent)):()=>!0,Cb=dr.hasStandardBrowserEnv?{write(t,e,r,n,i,s,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];V.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),V.isString(n)&&o.push(`path=${n}`),V.isString(i)&&o.push(`domain=${i}`),s===!0&&o.push("secure"),V.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ib(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ub(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function fp(t,e,r){let n=!Ib(e);return t&&(n||r==!1)?Ub(t,e):e}const w0=t=>t instanceof vr?{...t}:t;function hi(t,e){e=e||{};const r={};function n(u,f,d,h){return V.isPlainObject(u)&&V.isPlainObject(f)?V.merge.call({caseless:h},u,f):V.isPlainObject(f)?V.merge({},f):V.isArray(f)?f.slice():f}function i(u,f,d,h){if(V.isUndefined(f)){if(!V.isUndefined(u))return n(void 0,u,d,h)}else return n(u,f,d,h)}function s(u,f){if(!V.isUndefined(f))return n(void 0,f)}function a(u,f){if(V.isUndefined(f)){if(!V.isUndefined(u))return n(void 0,u)}else return n(void 0,f)}function o(u,f,d){if(d in e)return n(u,f);if(d in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,f,d)=>i(w0(u),w0(f),d,!0)};return V.forEach(Object.keys({...t,...e}),function(f){const d=c[f]||i,h=d(t[f],e[f],f);V.isUndefined(h)&&d!==o||(r[f]=h)}),r}const up=t=>{const e=hi({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;if(e.headers=a=vr.from(a),e.url=ip(fp(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),V.isFormData(r)){if(dr.hasStandardBrowserEnv||dr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([f,d])=>{u.includes(f.toLowerCase())&&a.set(f,d)})}}if(dr.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(e)),n||n!==!1&&Mb(e.url))){const c=i&&s&&Cb.read(s);c&&a.set(i,c)}return e},Ob=typeof XMLHttpRequest<"u",qb=Ob&&function(t){return new Promise(function(r,n){const i=up(t);let s=i.data;const a=vr.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,f,d,h,g,b;function S(){g&&g(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function C(){if(!_)return;const q=vr.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),O={data:!o||o==="text"||o==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:q,config:t,request:_};cp(function(J){r(J),S()},function(J){n(J),S()},O),_=null}"onloadend"in _?_.onloadend=C:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(C)},_.onabort=function(){_&&(n(new De("Request aborted",De.ECONNABORTED,t,_)),_=null)},_.onerror=function(U){const O=U&&U.message?U.message:"Network Error",$=new De(O,De.ERR_NETWORK,t,_);$.event=U||null,n($),_=null},_.ontimeout=function(){let U=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const O=i.transitional||sp;i.timeoutErrorMessage&&(U=i.timeoutErrorMessage),n(new De(U,O.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,t,_)),_=null},s===void 0&&a.setContentType(null),"setRequestHeader"in _&&V.forEach(a.toJSON(),function(U,O){_.setRequestHeader(O,U)}),V.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),o&&o!=="json"&&(_.responseType=i.responseType),u&&([h,b]=Ya(u,!0),_.addEventListener("progress",h)),c&&_.upload&&([d,g]=Ya(c),_.upload.addEventListener("progress",d),_.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(f=q=>{_&&(n(!q||q.type?new Wi(null,t,_):q),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const F=Pb(i.url);if(F&&dr.protocols.indexOf(F)===-1){n(new De("Unsupported protocol "+F+":",De.ERR_BAD_REQUEST,t));return}_.send(s||null)})},Nb=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(u){if(!i){i=!0,o();const f=u instanceof Error?u:this.reason;n.abort(f instanceof De?f:new Wi(f instanceof Error?f.message:f))}};let a=e&&setTimeout(()=>{a=null,s(new De(`timeout ${e} of ms exceeded`,De.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>V.asap(o),c}},Lb=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},Db=async function*(t,e){for await(const r of Fb(t))yield*Lb(r,e)},Fb=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},v0=(t,e,r,n)=>{const i=Db(t,e);let s=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:f}=await i.next();if(u){o(),c.close();return}let d=f.byteLength;if(r){let h=s+=d;r(h)}c.enqueue(new Uint8Array(f))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},_0=64*1024,{isFunction:va}=V,Hb=(({Request:t,Response:e})=>({Request:t,Response:e}))(V.global),{ReadableStream:E0,TextEncoder:S0}=V.global,A0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Kb=t=>{t=V.merge.call({skipUndefined:!0},Hb,t);const{fetch:e,Request:r,Response:n}=t,i=e?va(e):typeof fetch=="function",s=va(r),a=va(n);if(!i)return!1;const o=i&&va(E0),c=i&&(typeof S0=="function"?(b=>S=>b.encode(S))(new S0):async b=>new Uint8Array(await new r(b).arrayBuffer())),u=s&&o&&A0(()=>{let b=!1;const S=new r(dr.origin,{body:new E0,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!S}),f=a&&o&&A0(()=>V.isReadableStream(new n("").body)),d={stream:f&&(b=>b.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!d[b]&&(d[b]=(S,_)=>{let C=S&&S[b];if(C)return C.call(S);throw new De(`Response type '${b}' is not supported`,De.ERR_NOT_SUPPORT,_)})});const h=async b=>{if(b==null)return 0;if(V.isBlob(b))return b.size;if(V.isSpecCompliantForm(b))return(await new r(dr.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(V.isArrayBufferView(b)||V.isArrayBuffer(b))return b.byteLength;if(V.isURLSearchParams(b)&&(b=b+""),V.isString(b))return(await c(b)).byteLength},g=async(b,S)=>{const _=V.toFiniteNumber(b.getContentLength());return _??h(S)};return async b=>{let{url:S,method:_,data:C,signal:F,cancelToken:q,timeout:U,onDownloadProgress:O,onUploadProgress:$,responseType:J,headers:Y,withCredentials:ee="same-origin",fetchOptions:Z}=up(b),P=e||fetch;J=J?(J+"").toLowerCase():"text";let l=Nb([F,q&&q.toAbortSignal()],U),x=null;const m=l&&l.unsubscribe&&(()=>{l.unsubscribe()});let A;try{if($&&u&&_!=="get"&&_!=="head"&&(A=await g(Y,C))!==0){let E=new r(S,{method:"POST",body:C,duplex:"half"}),H;if(V.isFormData(C)&&(H=E.headers.get("content-type"))&&Y.setContentType(H),E.body){const[z,L]=b0(A,Ya(m0($)));C=v0(E.body,_0,z,L)}}V.isString(ee)||(ee=ee?"include":"omit");const v=s&&"credentials"in r.prototype,M={...Z,signal:l,method:_.toUpperCase(),headers:Y.normalize().toJSON(),body:C,duplex:"half",credentials:v?ee:void 0};x=s&&new r(S,M);let I=await(s?P(x,Z):P(S,M));const B=f&&(J==="stream"||J==="response");if(f&&(O||B&&m)){const E={};["status","statusText","headers"].forEach(D=>{E[D]=I[D]});const H=V.toFiniteNumber(I.headers.get("content-length")),[z,L]=O&&b0(H,Ya(m0(O),!0))||[];I=new n(v0(I.body,_0,z,()=>{L&&L(),m&&m()}),E)}J=J||"text";let y=await d[V.findKey(d,J)||"text"](I,b);return!B&&m&&m(),await new Promise((E,H)=>{cp(E,H,{data:y,headers:vr.from(I.headers),status:I.status,statusText:I.statusText,config:b,request:x})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,b,x),{cause:v.cause||v}):De.from(v,v&&v.code,b,x)}}},zb=new Map,lp=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let a=s.length,o=a,c,u,f=zb;for(;o--;)c=s[o],u=f.get(c),u===void 0&&f.set(c,u=o?new Map:Kb(e)),f=u;return u};lp();const bu={http:ab,xhr:qb,fetch:{get:lp}};V.forEach(bu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const T0=t=>`- ${t}`,$b=t=>V.isFunction(t)||t===null||t===!1;function jb(t,e){t=V.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let a=0;a<r;a++){n=t[a];let o;if(i=n,!$b(n)&&(i=bu[(o=String(n)).toLowerCase()],i===void 0))throw new De(`Unknown adapter '${o}'`);if(i&&(V.isFunction(i)||(i=i.get(e))))break;s[o||"#"+a]=i}if(!i){const a=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=r?a.length>1?`since :
`+a.map(T0).join(`
`):" "+T0(a[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const dp={getAdapter:jb,adapters:bu};function sc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wi(null,t)}function R0(t){return sc(t),t.headers=vr.from(t.headers),t.data=ic.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),dp.getAdapter(t.adapter||oa.adapter,t)(t).then(function(n){return sc(t),n.data=ic.call(t,t.transformResponse,n),n.headers=vr.from(n.headers),n},function(n){return op(n)||(sc(t),n&&n.response&&(n.response.data=ic.call(t,t.transformResponse,n.response),n.response.headers=vr.from(n.response.headers))),Promise.reject(n)})}const hp="1.13.2",mo={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{mo[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const P0={};mo.transitional=function(e,r,n){function i(s,a){return"[Axios v"+hp+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new De(i(a," has been removed"+(r?" in "+r:"")),De.ERR_DEPRECATED);return r&&!P0[a]&&(P0[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};mo.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Gb(t,e,r){if(typeof t!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new De("option "+s+" must be "+c,De.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new De("Unknown option "+s,De.ERR_BAD_OPTION)}}const Na={assertOptions:Gb,validators:mo},an=Na.validators;let ci=class{constructor(e){this.defaults=e||{},this.interceptors={request:new y0,response:new y0}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=hi(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&Na.assertOptions(n,{silentJSONParsing:an.transitional(an.boolean),forcedJSONParsing:an.transitional(an.boolean),clarifyTimeoutError:an.transitional(an.boolean)},!1),i!=null&&(V.isFunction(i)?r.paramsSerializer={serialize:i}:Na.assertOptions(i,{encode:an.function,serialize:an.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Na.assertOptions(r,{baseUrl:an.spelling("baseURL"),withXsrfToken:an.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&V.merge(s.common,s[r.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),r.headers=vr.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(c=c&&S.synchronous,o.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let f,d=0,h;if(!c){const b=[R0.bind(this),void 0];for(b.unshift(...o),b.push(...u),h=b.length,f=Promise.resolve(r);d<h;)f=f.then(b[d++],b[d++]);return f}h=o.length;let g=r;for(;d<h;){const b=o[d++],S=o[d++];try{g=b(g)}catch(_){S.call(this,_);break}}try{f=R0.call(this,g)}catch(b){return Promise.reject(b)}for(d=0,h=u.length;d<h;)f=f.then(u[d++],u[d++]);return f}getUri(e){e=hi(this.defaults,e);const r=fp(e.baseURL,e.url,e.allowAbsoluteUrls);return ip(r,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){ci.prototype[e]=function(r,n){return this.request(hi(n||{},{method:e,url:r,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(hi(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}ci.prototype[e]=r(),ci.prototype[e+"Form"]=r(!0)});let Wb=class pp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new Wi(s,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new pp(function(i){e=i}),cancel:e}}};function Vb(t){return function(r){return t.apply(null,r)}}function Jb(t){return V.isObject(t)&&t.isAxiosError===!0}const Vf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Vf).forEach(([t,e])=>{Vf[e]=t});function xp(t){const e=new ci(t),r=Gh(ci.prototype.request,e);return V.extend(r,ci.prototype,e,{allOwnKeys:!0}),V.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return xp(hi(t,i))},r}const Ct=xp(oa);Ct.Axios=ci;Ct.CanceledError=Wi;Ct.CancelToken=Wb;Ct.isCancel=op;Ct.VERSION=hp;Ct.toFormData=bo;Ct.AxiosError=De;Ct.Cancel=Ct.CanceledError;Ct.all=function(e){return Promise.all(e)};Ct.spread=Vb;Ct.isAxiosError=Jb;Ct.mergeConfig=hi;Ct.AxiosHeaders=vr;Ct.formToJSON=t=>ap(V.isHTMLForm(t)?new FormData(t):t);Ct.getAdapter=dp.getAdapter;Ct.HttpStatusCode=Vf;Ct.default=Ct;const{Axios:U4,AxiosError:O4,CanceledError:q4,isCancel:N4,CancelToken:L4,VERSION:D4,all:F4,Cancel:H4,isAxiosError:K4,spread:z4,toFormData:$4,AxiosHeaders:j4,HttpStatusCode:G4,formToJSON:W4,getAdapter:V4,mergeConfig:J4}=Ct;var ac={},oc,k0;function Xb(){if(k0)return oc;k0=1;function t(e,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return oc=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=new Date().getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},r=null,n=0,i=0;i<this._errors.length;i++){var s=this._errors[i],a=s.message,o=(e[a]||0)+1;e[a]=o,o>=n&&(r=s,n=o)}return r},oc}var B0;function Yb(){return B0||(B0=1,(function(t){var e=Xb();t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,c){return o-c}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],c=r[o];r[o]=(function(f){var d=t.operation(n),h=Array.prototype.slice.call(arguments,1),g=h.pop();h.push(function(b){d.retry(b)||(b&&(arguments[0]=d.mainError()),g.apply(this,arguments))}),d.attempt(function(){f.apply(r,h)})}).bind(r,c),r[o].options=n}}})(ac)),ac}var cc,M0;function Zb(){return M0||(M0=1,cc=Yb()),cc}var fc,C0;function Qb(){if(C0)return fc;C0=1;var t=Zb();function e(r,n){function i(s,a){var o=n||{},c;"randomize"in o||(o.randomize=!0),c=t.operation(o);function u(h){a(h||new Error("Aborted"))}function f(h,g){if(h.bail){u(h);return}c.retry(h)?o.onRetry&&o.onRetry(h,g):a(c.mainError())}function d(h){var g;try{g=r(u,h)}catch(b){f(b,h);return}Promise.resolve(g).then(s).catch(function(S){f(S,h)})}c.attempt(d)}return new Promise(i)}return fc=e,fc}var e1=Qb();const Dn=Mr(e1);function t1(t){class e extends t.arbundles.DataItem{Irys;signer;constructor(n,i,s){super(s?.dataIsRawTransaction===!0?Q.Buffer.from(n):i.arbundles.createData(n,i.tokenConfig.getSigner(),{...s,anchor:s?.anchor??$h.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.Irys=i,this.signer=i.tokenConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async uploadWithReceipt(n){return(await this.Irys.uploader.uploadTransaction(this,{...n,getReceiptSignature:!0})).data}async upload(n){return(await this.Irys.uploader.uploadTransaction(this,n)).data}async getPrice(){return this.Irys.utils.getPrice(this.Irys.tokenConfig.name,this.size)}async isValid(){return t.arbundles.DataItem.verify(this.getRaw())}}return e}var uc={exports:{}},_a={},Ea={},I0;function r1(){if(I0)return Ea;I0=1,Object.defineProperty(Ea,"__esModule",{value:!0});function t(e){var r=4,n=e.length,i=n%r;if(!i)return e;var s=n,a=r-i,o=n+a,c=Q.Buffer.alloc(o);for(c.write(e);a--;)c.write("=",s++);return c.toString()}return Ea.default=t,Ea}var U0;function n1(){if(U0)return _a;U0=1,Object.defineProperty(_a,"__esModule",{value:!0});var t=r1();function e(o,c){return c===void 0&&(c="utf8"),Q.Buffer.isBuffer(o)?i(o.toString("base64")):i(Q.Buffer.from(o,c).toString("base64"))}function r(o,c){return c===void 0&&(c="utf8"),Q.Buffer.from(n(o),"base64").toString(c)}function n(o){return o=o.toString(),t.default(o).replace(/\-/g,"+").replace(/_/g,"/")}function i(o){return o.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(o){return Q.Buffer.from(n(o),"base64")}var a=e;return a.encode=e,a.decode=r,a.toBase64=n,a.fromBase64=i,a.toBuffer=s,_a.default=a,_a}var O0;function i1(){return O0||(O0=1,(function(t){t.exports=n1().default,t.exports.default=t.exports})(uc)),uc.exports}var s1=i1();const $e=Mr(s1);Ue.set({DECIMAL_PLACES:50});const q0=t=>new Promise(e=>setTimeout(e,t));class rr{api;token;tokenConfig;arbundles;constructor(e,r,n){this.api=e,this.token=r,this.tokenConfig=n,this.arbundles=this.tokenConfig.irys.arbundles}static checkAndThrow(e,r,n){if(e?.status&&!(n??[]).includes(e.status)&&e.status!=200)throw new Error(`HTTP Error: ${r}: ${e.status} ${typeof e.data!="string"?e.statusText:e.data}`)}async getNonce(){const e=await this.api.get(`/account/withdrawals/${this.tokenConfig.name}?address=${this.tokenConfig.address}`);return rr.checkAndThrow(e,"Getting withdrawal nonce"),e.data}async getBalance(e){const r=await this.api.get(`/account/balance/${this.tokenConfig.name}?address=${e}`);return rr.checkAndThrow(r,"Getting balance"),new Ue(r.data.balance)}async getBundlerAddress(e){const r=await this.api.get("/info");rr.checkAndThrow(r,"Getting Bundler address");const n=r.data.addresses[e];if(!n)throw new Error(`Specified bundler does not support token ${e}`);return n}async getPrice(e,r){const n=await this.api.get(`/price/${e}/${r}`);return rr.checkAndThrow(n,"Getting storage cost"),new Ue(n.data)}async estimateFolderPrice(e){Array.isArray(e)&&(e={fileCount:e.length,totalBytes:e.reduce((a,o)=>a+o,0)});const r=e.headerSizeAvg??this.arbundles.createData("",this.tokenConfig.getSigner()).getRaw().length,i=(await this.getPrice(this.tokenConfig.name,r)).multipliedBy(e.fileCount);return(await this.getPrice(this.tokenConfig.name,e.totalBytes)).plus(i).decimalPlaces(0)}toAtomic(e){return new Ue(e).multipliedBy(this.tokenConfig.base[1])}fromAtomic(e){return new Ue(e).dividedBy(this.tokenConfig.base[1])}async confirmationPoll(e,r=30){if(this.tokenConfig.isSlow)return;r<0&&(r=0);let n,i;const s=async()=>{for(;!i;){if(await this.tokenConfig.getTx(e).then(u=>u?.confirmed).catch(u=>(n=u,!1)))return!0;await q0(1e3)}return!1},a=async()=>(await q0(r*1e3),i=!0,"RACE"),o=await Promise.race([a(),s()]);return o==="RACE"?(console.warn(`Tx ${e} didn't finalize after ${r} seconds ${n?` - ${n}`:""}`),n):o}unitConverter(e){return new Ue(e).dividedBy(this.tokenConfig.base[1])}async verifyReceipt(e){return rr.verifyReceipt(this.arbundles,e)}static async verifyReceipt(e,r){const{id:n,deadlineHeight:i,timestamp:s,public:a,signature:o,version:c}=r,u=await e.deepHash([e.stringToBuffer("Bundlr"),e.stringToBuffer(c),e.stringToBuffer(n),e.stringToBuffer(i.toString()),e.stringToBuffer(s.toString())]);return await e.getCryptoDriver().verify(a,u,$e.toBuffer(o))}async getReceipt(e){const r=`query {
      transactions(ids: ["${e}"]) {
        edges {
          node {
            receipt {
              signature
              timestamp
              version
              deadlineHeight
            }
          }
        }
      }
    }`,i=(await Dn(async()=>await this.api.post("/graphql",{query:r},{headers:{"content-type":"application/json"},validateStatus:o=>o===200})))?.data?.data?.transactions?.edges?.at(0)?.node?.receipt;if(!i)throw new Error(`Missing required receipt data from node for tx: ${e}`);const a={public:(await this.api.get("/public")).data,version:i.version,id:e,timestamp:i.timestamp,validatorSignatures:[],signature:i.signature,deadlineHeight:i.deadlineHeight,verify:async()=>!1};return a.verify=async()=>this.verifyReceipt(a),a}}async function a1(t,e,r){const n=t.tokenConfig,{deepHash:i,stringToBuffer:s}=n.irys.arbundles,o={publicKey:await n.getPublicKey(),currency:t.token,amount:new Ue(r).toString(),nonce:await t.getNonce(),signature:"",sigType:n.getSigner().signatureType},c=await i([s(o.currency),s(o.amount.toString()),s(o.nonce.toString())]);Q.Buffer.isBuffer(o.publicKey)||(o.publicKey=Q.Buffer.from(o.publicKey));const u=await n.sign(c),f=await n.verify(o.publicKey,c,u);o.publicKey=$e.encode(o.publicKey),o.signature=$e.encode(Q.Buffer.from(u));const d=$e.toBuffer(o.publicKey),h=$e.toBuffer(o.signature),g=await i([s(o.currency),s(o.amount.toString()),s(o.nonce.toString())]),b=await n.verify(d,g,h),S=n.ownerToAddress(n.name=="arweave"?$e.decode(o.publicKey):$e.toBuffer(o.publicKey))===n.address;if(!(f||b||S))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(o)}`);const _=await e.post("/account/withdraw",o);if(_.status===202){const C=_.data.tx_id,F=await t.confirmationPoll(C);if(F!==!0)throw new Error(`Unable to confirm withdrawal tx ${C} ${F?F?.toString():""}`)}else rr.checkAndThrow(_,"Withdrawing balance");return _.data}var Hs=Zy();class o1{queryVars={};queryFields;queryInfo;_query;url;config;resultTracker={numPages:0,numResults:0,done:!1};constructor({url:e,retryConfig:r,query:n,queryName:i,opts:s}){if(!e)throw new Error("URL is required");if(this.url=new URL(e),this.config={first:!1,userProvided:!1,numPages:1/0,numResults:1e3,retryOpts:{retries:3,maxTimeout:2e3,minTimeout:500,...r}},n===!1)return this;if(!n)throw new Error(`Unable to find query with name ${i}`);if(this.queryInfo={...n},this.queryFields=n.query,i.includes("arweave")&&this.url.host==="node1.bundlr.network"&&(this.url=new URL("https://arweave.net/graphql")),!s?.skipVariableSetters)for(const a of Object.keys(n.vars)){if(this[a])throw new Error(`Field setter ${a} has a key conflict - disable with opts.skipVariableSetters OR change the field name and add to query.remapVars`);this[a]=o=>(this.queryVars[a]=o,this)}return this}buildQuery(){if(this.config.userProvided)return this;const e=c=>JSON.stringify(c,(u,f)=>{if(f instanceof Array)return f[0];if(typeof f=="object")return f;if(f!==!1)return""}).replaceAll(":","").replaceAll('"',"").replaceAll(",",`
          `),r=e(this.queryFields),n=e({pageInfo:{[this.queryInfo.paging?.hasNextPage??"hasNextPage"]:void 0}}).slice(1,-1),i=this.queryInfo.enumValues,s={...this.queryInfo.vars,...this.queryVars};for(const[c,u]of Object.entries(this.queryInfo.remapVars??{}))if(s?.[c]!==void 0){if(typeof u=="function"){const f=u(c,s[c],s);if(!f)continue;const[d,h]=f;if(s[d]=h,d===c)continue}else s[u]=s[c];s[c]=void 0}const a=JSON.stringify(s,function(c,u){return u===void 0||u instanceof Array||typeof u=="object"||typeof u=="number"||i?.includes(c)?u:`'${u}'`}).replaceAll('"',"").replaceAll("'",'"').slice(1,-1);if(!this?.queryInfo?.name)throw new Error("Query name is undefined!");const o=this.queryInfo.paging?`query {
      ${this.queryInfo.name}(
        ${a}
      ) {
        edges {
          cursor
          node ${r}
        }
        ${n}
      }
    }`:`query {
    ${this.queryInfo.name}(
      ${a}
    ) 
    ${r}
  }`;return this._query=o,this}async getPage(){if(this.resultTracker.done)return;if(this.buildQuery(),!this._query)throw new Error("Unable to run undefined query");let e;try{e=await Dn(async n=>{const i=await Ct(this.url.toString(),{method:"post",headers:{"Content-Type":"application/json"},data:{query:this._query}});if(i.data.errors)throw i;return i},this.config.retryOpts)}catch(n){throw new Error(`Error running query
 ${this._query} - ${n.message?n.message+" -":""} (${JSON.stringify(n?.data?.errors.map(i=>i.message)??n?.errors??n)}) `)}if(this.config.userProvided)return this.trimmer([e.data.data].flat(20));const r=e.data.data[this.queryInfo.name];if(this.queryInfo.paging){const n=r.pageInfo[this.queryInfo.paging.hasNextPage]?r.edges.at(-1)[this.queryInfo.paging.cursor]:void 0;return this.queryVars.after=n,this.trimmer(r.edges.map(i=>i.node))}return this.trimmer([r].flat(20))}trimmer(e){const r=++this.resultTracker.numPages,n=this.resultTracker.numResults+=e.length;if(e.length===0)return this.resultTracker.done=!0,e;if(r>=this?.config?.numPages&&(this.resultTracker.done=!0),n>=this?.config?.numResults){this.resultTracker.done=!0;const i=this.config.numResults-(n-e.length);return e.slice(0,i)}return e}async first(){return(await this.getPage())?.at(0)??void 0}maxPages(e){return this.config.numPages=e,this}limit(e){return this.config.numResults=e,this}async all(){const e=[];do{const r=await this.getPage();if(!r)break;e.push(...r)}while(this.queryVars.after);return e}async*generator(){do{const e=await this.getPage();if(!e)return;for(const r of e)yield r}while(this.queryVars.after)}stream(){return Hs.Readable.from(this.generator())}query(e){return this._query=e,this.config.userProvided=!0,this}fields(e,r=!1){const n=(i,s,a)=>{for(const o of Object.keys(a)){let c=s[o];Array.isArray(c)&&(c=c[0]);const u=a[o];if(c===void 0)throw new Error(`Illegal field ${i}${o}`);typeof u=="object"&&n(i+o+".",c,u)}};return r||n("",this.queryFields,e),this.queryFields=e,this}variables(e){return this.queryVars={...this.queryVars,...e},this}async toQuery(){return await this.buildQuery(),this._query}tReturn(){return"tReturn"}tQuery(){return"tQuery"}tVars(){return"tVars"}async then(e,r){return this.all().then(e,r)}async catch(e){return this.then().catch(e)}async finally(e){return this.then().finally(e)}}const c1={id:"",timestamp:0,height:"",previous:""},f1={ids:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},u1={name:"blocks",query:c1,vars:f1,enumValues:["sort"],remapVars:{pageSize:"first",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.height={...r.height,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.height={...r.height,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},l1={id:"",anchor:"",signature:"",recipient:"",owner:{address:"",key:""},fee:{winston:"",ar:""},quantity:{winston:"",ar:""},data:{size:"",type:""},tags:[{name:"",value:""}],block:{id:"",timestamp:0,height:0,previous:""},bundledIn:{id:""}},d1={ids:void 0,from:void 0,to:void 0,tags:void 0,bundledIn:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},h1={name:"transactions",query:l1,enumValues:["sort"],vars:d1,remapVars:{pageSize:"first",from:"owners",to:"recipients",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.block={...r.block,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.block={...r.block,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},p1={id:"",receipt:{deadlineHeight:0,signature:"",timestamp:0,version:""},tags:[{name:"",value:""}],address:"",token:"",signature:"",timestamp:0},x1={ids:void 0,after:void 0,token:void 0,from:void 0,pageSize:100,sort:"ASC",tags:void 0,fromTimestamp:void 0,toTimestamp:void 0},y1={name:"transactions",query:p1,enumValues:["order"],vars:x1,remapVars:{pageSize:"first",sort:"order",from:"owners",fromTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,from:new Date(e).getTime()},r.fromTimestamp=void 0},toTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,to:new Date(e).getTime()},r.toTimestamp=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},g1={"irys:transactions":y1,"arweave:transactions":h1,"arweave:blocks":u1};class N0{opts;constructor(e={url:new URL("https://node1.bundlr.network/graphql")}){if(!e.url)throw new Error("URL is required");e.url=new URL(e.url),this.opts=e}search(e,r){const n=r?.query??g1[e];return new o1({...this.opts,query:n,queryName:e})}}class yp{api;utils;uploader;funder;address;token;tokenConfig;provenance;transactions;_readyPromise;url;arbundles;IrysTransaction;static VERSION="0.0.2";constructor({url:e,arbundles:r}){this.url=e,this.arbundles=r,this.IrysTransaction=t1(this)}get signer(){return this.tokenConfig.getSigner()}get search(){const e=new N0({url:new URL("/graphql",this.url)});return e.search.bind(e)}query(e){return new N0(e??{url:this.url})}async withdrawBalance(e){return a1(this.utils,this.api,e)}async getLoadedBalance(){if(!this.address)throw new Error("address is undefined");return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.token,e)}async verifyReceipt(e){return rr.verifyReceipt(this.arbundles,e)}createTransaction(e,r){return new this.IrysTransaction(e,this,r)}getSigner(){return this.tokenConfig.getSigner()}async upload(e,r){return this.uploader.uploadData(e,r)}async uploadWithReceipt(e,r){return this.uploader.uploadData(e,{...r,upload:{getReceiptSignature:!0}})}async ready(){return this.tokenConfig.ready&&await this.tokenConfig.ready(),this.address=this.tokenConfig.address,this}get transaction(){const e=this;return{fromRaw(r){return new e.IrysTransaction(r,e,{dataIsRawTransaction:!0})}}}}let b1=class{_instance;cookieMap=new Map;config;constructor(e){e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){const r=e.headers?.["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-js-sdk-version":yp.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){try{return await this.request(e,{...r,method:"GET"})}catch(n){if(n.response?.status)return n.response;throw n}}async post(e,r,n){try{return await this.request(e,{data:r,...n,method:"POST"})}catch(i){if(i.response?.status)return i.response;throw i}}get instance(){if(this._instance)return this._instance;const e=Ct.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,i=r?.url??new URL(e,this.config.url).toString();return Dn(s=>n({...r,url:i}),{...this.config.retry,...r?.retry})}};class m1{utils;constructor(e){this.utils=e}async fund(e,r=1){const n=new Ue(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.tokenConfig,s=await this.utils.getBundlerAddress(this.utils.token);let a;if(i.needsFee){const d=await i.getFee(i.base[0]==="winston"?0:n,s);a=Ue.isBigNumber(d)?d.multipliedBy(r).integerValue(Ue.ROUND_CEIL):d}const o=await i.createTx(n,s,a);let c;try{c=await i.sendTx(o.tx)}catch(d){throw d}if(o.txId??=c,!o.txId)throw new Error("Undefined transaction ID");rr.checkAndThrow(c,`Sending transaction to the ${this.utils.token} network`);let u=await this.utils.confirmationPoll(o.txId);if(!await this.submitTransaction(o.txId).catch(d=>{u=d}))throw new Error(`failed to post funding tx - ${o.txId} - keep this id! 
 ${u?` - ${u?.message??u}`:""}`);return{reward:Ue.isBigNumber(a)?a.toString():JSON.stringify(a),target:s,quantity:n.toString(),id:o.txId}}async submitTransaction(e){return await Dn(async()=>{const r=await this.utils.api.post(`/account/balance/${this.utils.token}`,{tx_id:e});return rr.checkAndThrow(r,`Posting transaction ${e} information to the bundler`,[202]),r},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0})}async submitFundTransaction(e){return this.submitTransaction(e)}}const w1="logger/5.8.0";let L0=!1,D0=!1;const La={debug:1,default:2,info:2,warning:3,error:4,off:5};let F0=La.default,lc=null;function v1(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const H0=v1();var Jf;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Jf||(Jf={}));var Vr;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Vr||(Vr={}));const K0="0123456789abcdef";class ce{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();La[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(F0>La[n])&&console.log.apply(console,r)}debug(...e){this._log(ce.levels.DEBUG,e)}info(...e){this._log(ce.levels.INFO,e)}warn(...e){this._log(ce.levels.WARNING,e)}makeError(e,r,n){if(D0)return this.makeError("censored error",r,{});r||(r=ce.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const u=n[c];try{if(u instanceof Uint8Array){let f="";for(let d=0;d<u.length;d++)f+=K0[u[d]>>4],f+=K0[u[d]&15];i.push(c+"=Uint8Array(0x"+f+")")}else i.push(c+"="+JSON.stringify(u))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let a="";switch(r){case Vr.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case Vr.CALL_EXCEPTION:case Vr.INSUFFICIENT_FUNDS:case Vr.MISSING_NEW:case Vr.NONCE_EXPIRED:case Vr.REPLACEMENT_UNDERPRICED:case Vr.TRANSACTION_REPLACED:case Vr.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=r,Object.keys(n).forEach(function(c){o[c]=n[c]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,ce.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){H0&&this.throwError("platform missing String.prototype.normalize",ce.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:H0})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,ce.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,ce.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",ce.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return lc||(lc=new ce(w1)),lc}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),L0){if(!e)return;this.globalLogger().throwError("error censorship permanent",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}D0=!!e,L0=!!r}static setLogLevel(e){const r=La[e.toLowerCase()];if(r==null){ce.globalLogger().warn("invalid log level - "+e);return}F0=r}static from(e){return new ce(e)}}ce.errors=Vr;ce.levels=Jf;const _1="bytes/5.8.0",Kt=new ce(_1);function gp(t){return!!t.toHexString}function Li(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Li(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function mu(t){return Gt(t)&&!(t.length%2)||wo(t)}function z0(t){return typeof t=="number"&&t==t&&t%1===0}function wo(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!z0(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!z0(r)||r<0||r>=256)return!1}return!0}function fe(t,e){if(e||(e={}),typeof t=="number"){Kt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Li(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),gp(t)&&(t=t.toHexString()),Gt(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Kt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Li(new Uint8Array(n))}return wo(t)?Li(new Uint8Array(t)):Kt.throwArgumentError("invalid arrayify value","value",t)}function _r(t){const e=t.map(i=>fe(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Li(n)}function vn(t){let e=fe(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function E1(t,e){t=fe(t),t.length>e&&Kt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Li(r)}function Gt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const dc="0123456789abcdef";function ve(t,e){if(e||(e={}),typeof t=="number"){Kt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=dc[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),gp(t))return t.toHexString();if(Gt(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Kt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(wo(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=dc[(i&240)>>4]+dc[i&15]}return r}return Kt.throwArgumentError("invalid hexlify value","value",t)}function bp(t){if(typeof t!="string")t=ve(t);else if(!Gt(t)||t.length%2)return null;return(t.length-2)/2}function pi(t,e,r){return typeof t!="string"?t=ve(t):(!Gt(t)||t.length%2)&&Kt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function fi(t){let e="0x";return t.forEach(r=>{e+=ve(r).substring(2)}),e}function Er(t,e){for(typeof t!="string"?t=ve(t):Gt(t)||Kt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Kt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Vi(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(mu(t)){let r=fe(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=ve(r.slice(0,32)),e.s=ve(r.slice(32,64))):r.length===65?(e.r=ve(r.slice(0,32)),e.s=ve(r.slice(32,64)),e.v=r[64]):Kt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Kt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=ve(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=E1(fe(e._vs),32);e._vs=ve(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Kt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=ve(i);e.s==null?e.s=a:e.s!==a&&Kt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Kt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Kt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Gt(e.r)?Kt.throwArgumentError("signature missing or invalid r","signature",t):e.r=Er(e.r,32),e.s==null||!Gt(e.s)?Kt.throwArgumentError("signature missing or invalid s","signature",t):e.s=Er(e.s,32);const r=fe(e.s);r[0]>=128&&Kt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=ve(r);e._vs&&(Gt(e._vs)||Kt.throwArgumentError("signature invalid _vs","signature",t),e._vs=Er(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Kt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function $0(t){return t=Vi(t),ve(_r([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const S1="bignumber/5.8.0";var Za=Be.BN;const gn=new ce(S1),hc={},j0=9007199254740991;let G0=!1;class Ie{constructor(e,r){e!==hc&&gn.throwError("cannot call constructor directly; use BigNumber.from",ce.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return br(Ge(this).fromTwos(e))}toTwos(e){return br(Ge(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ie.from(this._hex.substring(1)):this}add(e){return br(Ge(this).add(Ge(e)))}sub(e){return br(Ge(this).sub(Ge(e)))}div(e){return Ie.from(e).isZero()&&Ur("division-by-zero","div"),br(Ge(this).div(Ge(e)))}mul(e){return br(Ge(this).mul(Ge(e)))}mod(e){const r=Ge(e);return r.isNeg()&&Ur("division-by-zero","mod"),br(Ge(this).umod(r))}pow(e){const r=Ge(e);return r.isNeg()&&Ur("negative-power","pow"),br(Ge(this).pow(r))}and(e){const r=Ge(e);return(this.isNegative()||r.isNeg())&&Ur("unbound-bitwise-result","and"),br(Ge(this).and(r))}or(e){const r=Ge(e);return(this.isNegative()||r.isNeg())&&Ur("unbound-bitwise-result","or"),br(Ge(this).or(r))}xor(e){const r=Ge(e);return(this.isNegative()||r.isNeg())&&Ur("unbound-bitwise-result","xor"),br(Ge(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Ur("negative-width","mask"),br(Ge(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ur("negative-width","shl"),br(Ge(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ur("negative-width","shr"),br(Ge(this).shrn(e))}eq(e){return Ge(this).eq(Ge(e))}lt(e){return Ge(this).lt(Ge(e))}lte(e){return Ge(this).lte(Ge(e))}gt(e){return Ge(this).gt(Ge(e))}gte(e){return Ge(this).gte(Ge(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ge(this).isZero()}toNumber(){try{return Ge(this).toNumber()}catch{Ur("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return gn.throwError("this platform does not support BigInt",ce.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?G0||(G0=!0,gn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?gn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ce.errors.UNEXPECTED_ARGUMENT,{}):gn.throwError("BigNumber.toString does not accept parameters",ce.errors.UNEXPECTED_ARGUMENT,{})),Ge(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ie)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ie(hc,Ks(e)):e.match(/^-?[0-9]+$/)?new Ie(hc,Ks(new Za(e))):gn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ur("underflow","BigNumber.from",e),(e>=j0||e<=-j0)&&Ur("overflow","BigNumber.from",e),Ie.from(String(e));const r=e;if(typeof r=="bigint")return Ie.from(r.toString());if(wo(r))return Ie.from(ve(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return Ie.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Gt(n)||n[0]==="-"&&Gt(n.substring(1))))return Ie.from(n)}return gn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ks(t){if(typeof t!="string")return Ks(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&gn.throwArgumentError("invalid hex","value",t),t=Ks(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function br(t){return Ie.from(Ks(t))}function Ge(t){const e=Ie.from(t).toHexString();return e[0]==="-"?new Za("-"+e.substring(3),16):new Za(e.substring(2),16)}function Ur(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),gn.throwError(t,ce.errors.NUMERIC_FAULT,n)}function A1(t){return new Za(t,36).toString(16)}let T1=class{publicKey;signatureType;signatureLength;ownerLength;pem;static verify(e,r,n,i){throw new Error("You must implement verify method on child")}};var et;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(et||(et={}));const Mt={[et.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[et.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[et.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[et.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[et.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[et.MULTIAPTOS]:{sigLength:2052,pubLength:1025,sigName:"multiAptos"},[et.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}};class ca{_key;pk;ownerLength=Mt[2].pubLength;signatureLength=Mt[2].sigLength;_publicKey;get publicKey(){return this._publicKey}signatureType=2;constructor(e,r){this._key=e,this.pk=r}get key(){throw new Error("You must implement `key`")}sign(e){return Qy(Q.Buffer.from(e),Q.Buffer.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=$e.toBuffer(e)),po(Q.Buffer.from(n),Q.Buffer.from(r),Q.Buffer.from(i))}}function yr(t){let e=0;for(const i of t)e+=i.byteLength;const r=new Uint8Array(e);let n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}function mp(t){const e=Jr(t);return wu(e)}function wu(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function tt(t){return new TextEncoder().encode(t)}function Xf(t){return Yr(tt(t))}function Jr(t){return new Uint8Array(jh.toByteArray(_p(t)))}function wp(t){return jh.fromByteArray(new Uint8Array(t))}function Yr(t){return vp(wp(t))}function vp(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function _p(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}function R1(t){return new Ue(t).shiftedBy(-12)}function P1(t){return new Ue(t).shiftedBy(12)}const k1=Object.freeze(Object.defineProperty({__proto__:null,arToWinston:P1,b64UrlDecode:_p,b64UrlEncode:vp,b64UrlToBuffer:Jr,b64UrlToString:mp,bufferToString:wu,bufferTob64:wp,bufferTob64Url:Yr,concatBuffers:yr,stringToB64Url:Xf,stringToBuffer:tt,winstonToAr:R1},Symbol.toStringTag,{value:"Module"}));class Da{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){this.driver=crypto?.subtle}async generateJWK(){const e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={saltLength:32}){const i=await this.driver.sign({name:"RSA-PSS",saltLength:n},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){const n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),a=await this.driver.digest("SHA-256",r),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),c=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),u=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-a.byteLength-2},s,n,r);return o||c||u}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?tt(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:tt(n||"salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const o=await this.driver.encrypt({name:"AES-CBC",iv:a},s,e);return yr([a,o])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?tt(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:tt(n||"salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:a},s,e.slice(16));return yr([o])}}async function Ji(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=di.createHash("sha384");let a=0;for await(const u of i)a+=u.byteLength,s.update(u);const o=yr([tt("blob"),tt(a.toString())]),c=yr([await tr().hash(o,"SHA-384"),s.digest()]);return await tr().hash(c,"SHA-384")}else if(Array.isArray(t)){const i=yr([tt("list"),tt(t.length.toString())]);return await Ep(t,await tr().hash(i,"SHA-384"))}const e=t,r=yr([tt("blob"),tt(e.byteLength.toString())]),n=yr([await tr().hash(r,"SHA-384"),await tr().hash(e,"SHA-384")]);return await tr().hash(n,"SHA-384")}async function Ep(t,e){if(t.length<1)return e;const r=yr([e,await Ji(t[0])]),n=await tr().hash(r,"SHA-384");return await Ep(t.slice(1),n)}class qs extends Error{type;response;constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}function Ns(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}class B1{api;network;constructor(e,r){this.api=e,this.network=r}async getByHash(e){const r=await this.api.get(`block/hash/${e}`);if(r.status===200)return r.data;throw r.status===404?new qs("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`block/height/${e}`);if(r.status===200)return r.data;throw r.status===404?new qs("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.getByHash(e)}}const Cn=256*1024,M1=32*1024,Bs=32,ki=32;class C1{crypto;constructor(e){this.crypto=e.deps.crypto}async chunkData(e){const r=[];let n=e,i=0;for(;n.byteLength>=Cn;){let s=Cn;const a=n.byteLength-Cn;a>0&&a<M1&&(s=Math.ceil(n.byteLength/2));const o=n.slice(0,s),c=await this.crypto.hash(o);i+=o.byteLength,r.push({dataHash:c,minByteRange:i-o.byteLength,maxByteRange:i}),n=n.slice(s)}return r.push({dataHash:await this.crypto.hash(n),minByteRange:i,maxByteRange:i+n.byteLength}),r}async generateLeaves(e){return Promise.all(e.map(async({dataHash:r,minByteRange:n,maxByteRange:i})=>({type:"leaf",id:await this.hash(await Promise.all([this.hash(r),this.hash(Sa(i))])),dataHash:r,minByteRange:n,maxByteRange:i})))}async computeRootHash(e){return(await this.generateTree(e)).id}async generateTree(e){return await this.buildLayers(await this.generateLeaves(await this.chunkData(e)))}async generateTransactionChunks(e){const r=await this.chunkData(e),n=await this.generateLeaves(r),i=await this.buildLayers(n),s=await this.generateProofs(i),a=r.slice(-1)[0];return a.maxByteRange-a.minByteRange===0&&(r.splice(r.length-1,1),s.splice(s.length-1,1)),{data_root:i.id,chunks:r,proofs:s}}async buildLayers(e,r=0){if(e.length<2)return e[0];const n=[];for(let i=0;i<e.length;i+=2)n.push(await this.hashBranch(e[i],e[i+1]));return this.buildLayers(n,r+1)}generateProofs(e){const r=this.resolveBranchProofs(e);return Array.isArray(r)?Sp(r):[r]}resolveBranchProofs(e,r=new Uint8Array,n=0){if(e.type=="leaf")return{offset:e.maxByteRange-1,proof:yr([r,e.dataHash,Sa(e.maxByteRange)])};if(e.type=="branch"){const i=yr([r,e.leftChild.id,e.rightChild.id,Sa(e.byteRange)]);return[this.resolveBranchProofs(e.leftChild,i,n+1),this.resolveBranchProofs(e.rightChild,i,n+1)]}throw new Error("Unexpected node type")}async validatePath(e,r,n,i,s){if(i<=0)return!1;if(r>=i)return this.validatePath(e,0,i-1,i,s);if(r<0)return this.validatePath(e,0,0,i,s);if(s.length==ki+Bs){const h=s.slice(0,ki),g=s.slice(h.length,h.length+Bs),b=await this.hash([await this.hash(h),await this.hash(g)]);return V0(e,b)?{offset:i-1,leftBound:n,rightBound:i,chunkSize:i-n}:!1}const a=s.slice(0,ki),o=s.slice(a.length,a.length+ki),c=s.slice(a.length+o.length,a.length+o.length+Bs),u=W0(c),f=s.slice(a.length+o.length+c.length),d=await this.hash([await this.hash(a),await this.hash(o),await this.hash(c)]);return V0(e,d)?r<u?await this.validatePath(a,r,n,Math.min(i,u),f):await this.validatePath(o,r,Math.max(n,u),i,f):!1}async hashBranch(e,r){return r?{type:"branch",id:await this.hash([await this.hash(e.id),await this.hash(r.id),await this.hash(Sa(e.maxByteRange))]),byteRange:e.maxByteRange,maxByteRange:r.maxByteRange,leftChild:e,rightChild:r}:e}async hash(e){return Array.isArray(e)&&(e=vu.utils.concatBuffers(e)),new Uint8Array(await this.crypto.hash(e))}async debug(e,r=""){if(e.byteLength<1)return r;const n=e.slice(0,ki),i=e.slice(n.length,n.length+ki),s=e.slice(n.length+i.length,n.length+i.length+Bs),a=W0(s),o=e.slice(n.length+i.length+s.length),c=await this.hash([await this.hash(n),await this.hash(i),await this.hash(s)]),u=`${r}
${JSON.stringify(Q.Buffer.from(n))},${JSON.stringify(Q.Buffer.from(i))},${a} => ${JSON.stringify(c)}`;return this.debug(o,u)}}function Sp(t){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Sp(r)):e.push(r)}),e}function Sa(t){const e=new Uint8Array(Bs);for(let r=e.length-1;r>=0;r--){const n=t%256;e[r]=n,t=(t-n)/256}return e}function W0(t){let e=0;for(let r=0;r<t.length;r++)e*=256,e+=t[r];return e}const V0=(t,e)=>t.every((r,n)=>e[n]===r);class I1{api;constructor(e){this.api=e}async getTransactionMetadata(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${Ns(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${Ns(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return Jr(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e,r){const n=await this.getTransactionMetadata(e),i=parseInt(n.size),s=new Uint8Array(i);let a=0;for await(const o of this.concurrentChunkDownloader(e,r))s.set(o,a),a+=o.length;return s}async*concurrentChunkDownloader(e,r){const n={concurrency:10,...r},i=await this.getTransactionMetadata(e),s=new Ue(i.offset),a=new Ue(i.size),o=s.minus(a).plus(1);let c=0;const u=Math.ceil(a.dividedBy(Cn).toNumber()),f=S=>this.getChunkData(S.toString()).then(_=>(c+=_.length,_)),d=[],h=u-2,g=Math.min(h,n.concurrency);let b=0;for(let S=0;S<g;S++)d.push(f(o.plus(Cn*b++)));for(;b<h;)d.push(f(o.plus(Cn*b++))),yield d.shift();for(;d.length>0;)yield d.shift();if(yield f(o.plus(Cn*b++)),a.isGreaterThan(c)&&(yield f(o.plus(Cn*b++))),!a.isEqualTo(c))throw new Error(`got ${c}B, expected ${a.toString()}B`)}}function U1(t,e){const r=t;return r.deepHash=new e.deepHash({deps:{utils:{stringToBuffer:tt,concatBuffers:yr},crypto:t}}),r}class O1{crypto;utils;constructor({deps:e}){this.crypto=e.crypto,this.utils=e.utils}async deepHash(e){if(Array.isArray(e)){const i=this.utils.concatBuffers([this.utils.stringToBuffer("list"),this.utils.stringToBuffer(e.length.toString())]);return await this.deepHashChunks(e,await this.crypto.hash(i,"SHA-384"))}const r=this.utils.concatBuffers([this.utils.stringToBuffer("blob"),this.utils.stringToBuffer(e.byteLength.toString())]),n=this.utils.concatBuffers([await this.crypto.hash(r,"SHA-384"),await this.crypto.hash(e,"SHA-384")]);return await this.crypto.hash(n,"SHA-384")}async deepHashChunks(e,r){if(e.length<1)return r;const n=this.utils.concatBuffers([r,await this.deepHash(e[0])]),i=await this.crypto.hash(n,"SHA-384");return await this.deepHashChunks(e.slice(1),i)}}class J0{_instance;cookieMap=new Map;config;constructor(e){e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){const r=e.headers?.["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return e.headers??={},e.network&&!Object.keys(e.headers).includes("x-network")&&(e.headers["x-network"]=e.network),{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-arweave-version":vu.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){try{return await this.request(e,{...r,method:"GET"})}catch(n){if(n.response?.status)return n.response;throw n}}async post(e,r,n){try{return await this.request(e,{data:r,...n,method:"POST"})}catch(i){if(i.response?.status)return i.response;throw i}}get instance(){if(this._instance)return this._instance;const e=Ct.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,i=r?.url??new URL(e,this.config.url).toString();return Dn(s=>n({...r,url:i}),{...this.config.retry,...r?.retry})}}const X0=t=>typeof t!="string"&&"url"in t,q1={maxAttempts:15,randomlySelect:!0};class N1{minerInstances=[];globalConfig;gatewayInstances=[];constructor({gateways:e,miners:r,opts:n}){this.globalConfig=n?.globalConfig??{},r&&this.addMiners(r),e&&this.addGateways(e)}async addPeersFrom(e,r){const n=(await this.get("",{url:new URL("/peers",e).toString()})).data;this.addMiners(n.slice(0,r?.limit).map(i=>`http://${i}`))}addMiners(e){e.forEach(r=>this.minerInstances.push(new J0(X0(r)?r:{url:new URL(r),...this.globalConfig})))}addGateways(e){e.forEach(r=>this.gatewayInstances.push(new J0(X0(r)?r:{url:new URL(r),...this.globalConfig})))}async get(e,r){return this.request(e,{...r,method:"GET"})}async post(e,r,n){return this.request(e,{data:r,...n,method:"POST"})}async request(e,r){const n={...q1,...r?.fallback};let i=0;const s=r?.gatewayOnly?this.gatewayInstances:this.gatewayInstances.concat(this.minerInstances),a=Math.min(Math.max(n?.maxAttempts,1),s.length),o=n?.onFallback;if(s.length===0)throw new Error("Unable to run request due to 0 configured gateways/miners.");for(;i++<a;){const c=s.at(n?.randomlySelect?Math.floor(Math.random()*s.length):i-1);if(c)try{return await c.request(e,{...r})}catch(u){if(o?.(u,c),i>=a)throw u}}throw new Error("unreachable")}}class Ap{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?wu(this[e]):r&&r.decode&&!r.string?this[e]:Yr(this[e]);if(this[e]instanceof Array){if(r?.decode!==void 0||r?.string!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?mp(this[e]):Jr(this[e]):this[e]}}class L1 extends Ap{name;value;constructor(e,r){super(),this.name=e,this.value=r}}let Nr=class extends Ap{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";merkle;deepHash;chunks;constructor({attributes:e,deps:r}){super(),this.merkle=r.merkle,this.deepHash=r.deepHash,Object.assign(this,e),typeof this.data=="string"&&(this.data=Jr(this.data)),e.tags&&(this.tags=e.tags)}addTag(e,r){this.tags.push({name:Xf(e),value:Xf(r)})}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Yr(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:r,reward:n,tags:i,signature:s}){this.id=e,this.owner=r,n&&(this.reward=n),i&&(this.tags=i),this.signature=s}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await this.merkle.generateTransactionChunks(e),this.data_root=Yr(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,r){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:Yr(n.proof),offset:n.offset.toString(),chunk:Yr(r.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:const e=this.tags.reduce((n,i)=>yr([n,Jr(i.name),Jr(i.value)]),new Uint8Array);return yr([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),tt(this.quantity),tt(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);const r=this.tags.map(n=>[Jr(n.name),Jr(n.value)]);return await this.deepHash.deepHash([tt(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),tt(this.quantity),tt(this.reward),this.get("last_tx",{decode:!0,string:!1}),r,tt(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};class D1{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}const Y0=1,F1=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Z0=1e3*40;class Ls{chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}crypto;api;merkle;deepHash;constructor({deps:e,transaction:r}){if(!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.api=e.api,this.crypto=e.crypto,this.merkle=e.merkle,this.deepHash=e.deepHash,this.data=r.data,this.transaction=new Nr({attributes:Object.assign({},r,{data:new Uint8Array(0)}),deps:{merkle:e.merkle,deepHash:e.deepHash}})}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Z0-Date.now(),Z0);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(a=>setTimeout(a,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await this.merkle.validatePath(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),Jr(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(a=>(console.error(a.message),{status:-1,data:{error:a.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=Ns(s),F1.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized({serialized:e,data:r,deps:n}){if(!e||typeof e.chunkIndex!="number"||typeof e.transaction!="object")throw new Error("Serialized object does not match expected format.");const i=new Nr(e.transaction);i.chunks||await i.prepareChunks(r);const s=new Ls({deps:n,transaction:i});if(s.chunkIndex=e.chunkIndex,s.lastRequestTimeEnd=e.lastRequestTimeEnd,s.lastResponseError=e.lastResponseError,s.lastResponseStatus=e.lastResponseStatus,s.txPosted=e.txPosted,s.data=r,s.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Y0){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Y0;return}throw this.lastResponseError=Ns(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=Ns(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}class H1{api;crypto;chunks;merkle;deepHash;constructor({deps:e}){this.api=e.api,this.crypto=e.crypto,this.chunks=e.chunks,this.merkle=e.merkle,this.deepHash=e.deepHash}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,r){const n=r?`price/${e}/${r}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const i=await this.getData(e);return new Nr({attributes:{...r.data,data:i},deps:{merkle:this.merkle,deepHash:this.deepHash}})}return new Nr({attributes:{...r.data,format:r.data.format||1},deps:{merkle:this.merkle,deepHash:this.deepHash}})}throw r.status===404?new qs("TX_NOT_FOUND"):r.status===410?new qs("TX_FAILED"):new qs("TX_INVALID")}fromRaw(e){return new Nr({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status===200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e){let r;try{r=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=await this.chunks.downloadChunkedData(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async getDataStream(e){let r;try{const n=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data;r=async function*(){yield n}()}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=this.chunks.concurrentChunkDownloader(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async sign(e,r,n){const s=typeof r=="object"&&(o=>{let c=!0;return["n","e","d","p","q","dp","dq","qi"].map(u=>!(u in o)&&(c=!1)),c})(r),a=typeof arweaveWallet=="object";if(!s&&!a)throw new Error("No valid JWK or external wallet found to sign transaction.");if(a){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}e.tags=e.tags.map(c=>new L1(c.name,c.value));const o=await arweaveWallet.sign(e,n);e.setSignature({id:o.id,owner:o.owner,reward:o.reward,tags:o.tags,signature:o.signature})}else if(s){e.setOwner(r.n);const o=await e.getSignatureData(),c=await this.crypto.sign(r,o,n),u=await this.crypto.hash(c);e.setSignature({id:Yr(u),owner:r.n,signature:Yr(c)})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Yr(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new Nr({attributes:JSON.parse(e),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e.readInt32BE=="function"?e=new Nr({attributes:JSON.parse(e.toString()),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e=="object"&&!(e instanceof Nr)&&(e=new Nr({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})),!(e instanceof Nr))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof Nr){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new Ls({transaction:e,deps:{api:this.api,crypto:this.crypto,merkle:this.merkle,deepHash:this.deepHash}}),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await Ls.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await Ls.fromSerialized({deps:{api:this.api,merkle:this.merkle,crypto:this.crypto,deepHash:this.deepHash},serialized:e,data:r})}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}class K1{api;crypto;constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(r){return r}]}).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Yr(await this.crypto.hash(Jr(e)))}}let vu=class Tp{config;api;wallets;transactions;network;blocks;chunks;static init;static utils=k1;crypto;deepHash;merkle;static VERSION="0.0.1";constructor(e){if(this.config=e,!e.crypto)throw new Error("config.crypto is required");this.crypto=U1(e.crypto,{deepHash:O1}),this.deepHash=this.crypto.deepHash;const r=e.gateways?Array.isArray(e.gateways)?e.gateways:[e.gateways]:void 0;this.api=new N1({gateways:r,miners:e.miners}),this.wallets=new K1(this.api,this.crypto),this.chunks=new I1(this.api),this.network=new D1(this.api),this.blocks=new B1(this.api,this.network),this.merkle=new C1({deps:{crypto:this.crypto}}),this.transactions=new H1({deps:{api:this.api,crypto:e.crypto,chunks:this.chunks,merkle:this.merkle,deepHash:this.deepHash}})}get utils(){return Tp.utils}getConfig(){return this.config}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=tt(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const s=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(s,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const i=new Nr({attributes:n,deps:{merkle:this.merkle,deepHash:this.deepHash}});return await i.getSignatureData(),i}};class _u extends vu{constructor(e,r){super({crypto:r?.crypto??new Da,...r,gateways:e??"https://arweave.net"})}static init(e){return new _u(e)}}const z1=Da.default?Da.default:Da;class Rp extends z1{getPublicKey(e){throw new Error("Unimplemented")}}let $1;function tr(){return $1??=new Rp}class Pp{_key;pk;signatureType=1;ownerLength=Mt[1].pubLength;signatureLength=Mt[1].sigLength;_publicKey;get publicKey(){return this._publicKey}constructor(e,r){this._key=e,this.pk=r,r||(this.pk=tr().getPublicKey(JSON.parse(e)))}sign(e){return di.createSign("sha256").update(e).sign({key:this._key,padding:di.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await tr().verify(Q.Buffer.isBuffer(e)?$e.encode(e):e,r,n)}}var pc={},xc={},yc,Q0;function Eu(){if(Q0)return yc;Q0=1;var t=Yy(),e=t.Buffer,r={},n;for(n in t)t.hasOwnProperty(n)&&(n==="SlowBuffer"||n==="Buffer"||(r[n]=t[n]));var i=r.Buffer={};for(n in e)e.hasOwnProperty(n)&&(n==="allocUnsafe"||n==="allocUnsafeSlow"||(i[n]=e[n]));if(r.Buffer.prototype=e.prototype,(!i.from||i.from===Uint8Array.from)&&(i.from=function(s,a,o){if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof s);if(s&&typeof s.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);return e(s,a,o)}),i.alloc||(i.alloc=function(s,a,o){if(typeof s!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof s);if(s<0||s>=2*(1<<30))throw new RangeError('The value "'+s+'" is invalid for option "size"');var c=e(s);return!a||a.length===0?c.fill(0):typeof o=="string"?c.fill(a,o):c.fill(a),c}),!r.kStringMaxLength)try{r.kStringMaxLength=Fs.binding("buffer").kStringMaxLength}catch{}return r.constants||(r.constants={MAX_LENGTH:r.kMaxLength},r.kStringMaxLength&&(r.constants.MAX_STRING_LENGTH=r.kStringMaxLength)),yc=r,yc}var gc={},el;function kp(){if(el)return gc;el=1;const t=vi();function e(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}gc.Reporter=e,e.prototype.isError=function(i){return i instanceof r},e.prototype.save=function(){const i=this._reporterState;return{obj:i.obj,pathLen:i.path.length}},e.prototype.restore=function(i){const s=this._reporterState;s.obj=i.obj,s.path=s.path.slice(0,i.pathLen)},e.prototype.enterKey=function(i){return this._reporterState.path.push(i)},e.prototype.exitKey=function(i){const s=this._reporterState;s.path=s.path.slice(0,i-1)},e.prototype.leaveKey=function(i,s,a){const o=this._reporterState;this.exitKey(i),o.obj!==null&&(o.obj[s]=a)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){const i=this._reporterState,s=i.obj;return i.obj={},s},e.prototype.leaveObject=function(i){const s=this._reporterState,a=s.obj;return s.obj=i,a},e.prototype.error=function(i){let s;const a=this._reporterState,o=i instanceof r;if(o?s=i:s=new r(a.path.map(function(c){return"["+JSON.stringify(c)+"]"}).join(""),i.message||i,i.stack),!a.options.partial)throw s;return o||a.errors.push(s),s},e.prototype.wrapResult=function(i){const s=this._reporterState;return s.options.partial?{result:this.isError(i)?null:i,errors:s.errors}:i};function r(n,i){this.path=n,this.rethrow(i)}return t(r,Error),r.prototype.rethrow=function(i){if(this.message=i+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(s){this.stack=s.stack}return this},gc}var Aa={},tl;function Yf(){if(tl)return Aa;tl=1;const t=vi(),e=kp().Reporter,r=Eu().Buffer;function n(s,a){if(e.call(this,a),!r.isBuffer(s)){this.error("Input not Buffer");return}this.base=s,this.offset=0,this.length=s.length}t(n,e),Aa.DecoderBuffer=n,n.isDecoderBuffer=function(a){return a instanceof n?!0:typeof a=="object"&&r.isBuffer(a.base)&&a.constructor.name==="DecoderBuffer"&&typeof a.offset=="number"&&typeof a.length=="number"&&typeof a.save=="function"&&typeof a.restore=="function"&&typeof a.isEmpty=="function"&&typeof a.readUInt8=="function"&&typeof a.skip=="function"&&typeof a.raw=="function"},n.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},n.prototype.restore=function(a){const o=new n(this.base);return o.offset=a.offset,o.length=this.offset,this.offset=a.offset,e.prototype.restore.call(this,a.reporter),o},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},n.prototype.skip=function(a,o){if(!(this.offset+a<=this.length))return this.error(o||"DecoderBuffer overrun");const c=new n(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},n.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)};function i(s,a){if(Array.isArray(s))this.length=0,this.value=s.map(function(o){return i.isEncoderBuffer(o)||(o=new i(o,a)),this.length+=o.length,o},this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return a.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=r.byteLength(s);else if(r.isBuffer(s))this.value=s,this.length=s.length;else return a.error("Unsupported type: "+typeof s)}return Aa.EncoderBuffer=i,i.isEncoderBuffer=function(a){return a instanceof i?!0:typeof a=="object"&&a.constructor.name==="EncoderBuffer"&&typeof a.length=="number"&&typeof a.join=="function"},i.prototype.join=function(a,o){return a||(a=r.alloc(this.length)),o||(o=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,o),o+=c.length}):(typeof this.value=="number"?a[o]=this.value:typeof this.value=="string"?a.write(this.value,o):r.isBuffer(this.value)&&this.value.copy(a,o),o+=this.length)),a},Aa}var bc,rl;function Bp(){if(rl)return bc;rl=1;const t=kp().Reporter,e=Yf().EncoderBuffer,r=Yf().DecoderBuffer,n=eg(),i=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(i),a=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function o(u,f,d){const h={};this._baseState=h,h.name=d,h.enc=u,h.parent=f||null,h.children=null,h.tag=null,h.args=null,h.reverseArgs=null,h.choice=null,h.optional=!1,h.any=!1,h.obj=!1,h.use=null,h.useDecoder=null,h.key=null,h.default=null,h.explicit=null,h.implicit=null,h.contains=null,h.parent||(h.children=[],this._wrap())}bc=o;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return o.prototype.clone=function(){const f=this._baseState,d={};c.forEach(function(g){d[g]=f[g]});const h=new this.constructor(d.parent);return h._baseState=d,h},o.prototype._wrap=function(){const f=this._baseState;s.forEach(function(d){this[d]=function(){const g=new this.constructor(this);return f.children.push(g),g[d].apply(g,arguments)}},this)},o.prototype._init=function(f){const d=this._baseState;n(d.parent===null),f.call(this),d.children=d.children.filter(function(h){return h._baseState.parent===this},this),n.equal(d.children.length,1,"Root node can have only one child")},o.prototype._useArgs=function(f){const d=this._baseState,h=f.filter(function(g){return g instanceof this.constructor},this);f=f.filter(function(g){return!(g instanceof this.constructor)},this),h.length!==0&&(n(d.children===null),d.children=h,h.forEach(function(g){g._baseState.parent=this},this)),f.length!==0&&(n(d.args===null),d.args=f,d.reverseArgs=f.map(function(g){if(typeof g!="object"||g.constructor!==Object)return g;const b={};return Object.keys(g).forEach(function(S){S==(S|0)&&(S|=0);const _=g[S];b[_]=S}),b}))},a.forEach(function(u){o.prototype[u]=function(){const d=this._baseState;throw new Error(u+" not implemented for encoding: "+d.enc)}}),i.forEach(function(u){o.prototype[u]=function(){const d=this._baseState,h=Array.prototype.slice.call(arguments);return n(d.tag===null),d.tag=u,this._useArgs(h),this}}),o.prototype.use=function(f){n(f);const d=this._baseState;return n(d.use===null),d.use=f,this},o.prototype.optional=function(){const f=this._baseState;return f.optional=!0,this},o.prototype.def=function(f){const d=this._baseState;return n(d.default===null),d.default=f,d.optional=!0,this},o.prototype.explicit=function(f){const d=this._baseState;return n(d.explicit===null&&d.implicit===null),d.explicit=f,this},o.prototype.implicit=function(f){const d=this._baseState;return n(d.explicit===null&&d.implicit===null),d.implicit=f,this},o.prototype.obj=function(){const f=this._baseState,d=Array.prototype.slice.call(arguments);return f.obj=!0,d.length!==0&&this._useArgs(d),this},o.prototype.key=function(f){const d=this._baseState;return n(d.key===null),d.key=f,this},o.prototype.any=function(){const f=this._baseState;return f.any=!0,this},o.prototype.choice=function(f){const d=this._baseState;return n(d.choice===null),d.choice=f,this._useArgs(Object.keys(f).map(function(h){return f[h]})),this},o.prototype.contains=function(f){const d=this._baseState;return n(d.use===null),d.contains=f,this},o.prototype._decode=function(f,d){const h=this._baseState;if(h.parent===null)return f.wrapResult(h.children[0]._decode(f,d));let g=h.default,b=!0,S=null;if(h.key!==null&&(S=f.enterKey(h.key)),h.optional){let C=null;if(h.explicit!==null?C=h.explicit:h.implicit!==null?C=h.implicit:h.tag!==null&&(C=h.tag),C===null&&!h.any){const F=f.save();try{h.choice===null?this._decodeGeneric(h.tag,f,d):this._decodeChoice(f,d),b=!0}catch{b=!1}f.restore(F)}else if(b=this._peekTag(f,C,h.any),f.isError(b))return b}let _;if(h.obj&&b&&(_=f.enterObject()),b){if(h.explicit!==null){const F=this._decodeTag(f,h.explicit);if(f.isError(F))return F;f=F}const C=f.offset;if(h.use===null&&h.choice===null){let F;h.any&&(F=f.save());const q=this._decodeTag(f,h.implicit!==null?h.implicit:h.tag,h.any);if(f.isError(q))return q;h.any?g=f.raw(F):f=q}if(d&&d.track&&h.tag!==null&&d.track(f.path(),C,f.length,"tagged"),d&&d.track&&h.tag!==null&&d.track(f.path(),f.offset,f.length,"content"),h.any||(h.choice===null?g=this._decodeGeneric(h.tag,f,d):g=this._decodeChoice(f,d)),f.isError(g))return g;if(!h.any&&h.choice===null&&h.children!==null&&h.children.forEach(function(q){q._decode(f,d)}),h.contains&&(h.tag==="octstr"||h.tag==="bitstr")){const F=new r(g);g=this._getUse(h.contains,f._reporterState.obj)._decode(F,d)}}return h.obj&&b&&(g=f.leaveObject(_)),h.key!==null&&(g!==null||b===!0)?f.leaveKey(S,h.key,g):S!==null&&f.exitKey(S),g},o.prototype._decodeGeneric=function(f,d,h){const g=this._baseState;return f==="seq"||f==="set"?null:f==="seqof"||f==="setof"?this._decodeList(d,f,g.args[0],h):/str$/.test(f)?this._decodeStr(d,f,h):f==="objid"&&g.args?this._decodeObjid(d,g.args[0],g.args[1],h):f==="objid"?this._decodeObjid(d,null,null,h):f==="gentime"||f==="utctime"?this._decodeTime(d,f,h):f==="null_"?this._decodeNull(d,h):f==="bool"?this._decodeBool(d,h):f==="objDesc"?this._decodeStr(d,f,h):f==="int"||f==="enum"?this._decodeInt(d,g.args&&g.args[0],h):g.use!==null?this._getUse(g.use,d._reporterState.obj)._decode(d,h):d.error("unknown tag: "+f)},o.prototype._getUse=function(f,d){const h=this._baseState;return h.useDecoder=this._use(f,d),n(h.useDecoder._baseState.parent===null),h.useDecoder=h.useDecoder._baseState.children[0],h.implicit!==h.useDecoder._baseState.implicit&&(h.useDecoder=h.useDecoder.clone(),h.useDecoder._baseState.implicit=h.implicit),h.useDecoder},o.prototype._decodeChoice=function(f,d){const h=this._baseState;let g=null,b=!1;return Object.keys(h.choice).some(function(S){const _=f.save(),C=h.choice[S];try{const F=C._decode(f,d);if(f.isError(F))return!1;g={type:S,value:F},b=!0}catch{return f.restore(_),!1}return!0},this),b?g:f.error("Choice not matched")},o.prototype._createEncoderBuffer=function(f){return new e(f,this.reporter)},o.prototype._encode=function(f,d,h){const g=this._baseState;if(g.default!==null&&g.default===f)return;const b=this._encodeValue(f,d,h);if(b!==void 0&&!this._skipDefault(b,d,h))return b},o.prototype._encodeValue=function(f,d,h){const g=this._baseState;if(g.parent===null)return g.children[0]._encode(f,d||new t);let b=null;if(this.reporter=d,g.optional&&f===void 0)if(g.default!==null)f=g.default;else return;let S=null,_=!1;if(g.any)b=this._createEncoderBuffer(f);else if(g.choice)b=this._encodeChoice(f,d);else if(g.contains)S=this._getUse(g.contains,h)._encode(f,d),_=!0;else if(g.children)S=g.children.map(function(C){if(C._baseState.tag==="null_")return C._encode(null,d,f);if(C._baseState.key===null)return d.error("Child should have a key");const F=d.enterKey(C._baseState.key);if(typeof f!="object")return d.error("Child expected, but input is not object");const q=C._encode(f[C._baseState.key],d,f);return d.leaveKey(F),q},this).filter(function(C){return C}),S=this._createEncoderBuffer(S);else if(g.tag==="seqof"||g.tag==="setof"){if(!(g.args&&g.args.length===1))return d.error("Too many args for : "+g.tag);if(!Array.isArray(f))return d.error("seqof/setof, but data is not Array");const C=this.clone();C._baseState.implicit=null,S=this._createEncoderBuffer(f.map(function(F){const q=this._baseState;return this._getUse(q.args[0],f)._encode(F,d)},C))}else g.use!==null?b=this._getUse(g.use,h)._encode(f,d):(S=this._encodePrimitive(g.tag,f),_=!0);if(!g.any&&g.choice===null){const C=g.implicit!==null?g.implicit:g.tag,F=g.implicit===null?"universal":"context";C===null?g.use===null&&d.error("Tag could be omitted only for .use()"):g.use===null&&(b=this._encodeComposite(C,_,F,S))}return g.explicit!==null&&(b=this._encodeComposite(g.explicit,!1,"context",b)),b},o.prototype._encodeChoice=function(f,d){const h=this._baseState,g=h.choice[f.type];return g||n(!1,f.type+" not found in "+JSON.stringify(Object.keys(h.choice))),g._encode(f.value,d)},o.prototype._encodePrimitive=function(f,d){const h=this._baseState;if(/str$/.test(f))return this._encodeStr(d,f);if(f==="objid"&&h.args)return this._encodeObjid(d,h.reverseArgs[0],h.args[1]);if(f==="objid")return this._encodeObjid(d,null,null);if(f==="gentime"||f==="utctime")return this._encodeTime(d,f);if(f==="null_")return this._encodeNull();if(f==="int"||f==="enum")return this._encodeInt(d,h.args&&h.reverseArgs[0]);if(f==="bool")return this._encodeBool(d);if(f==="objDesc")return this._encodeStr(d,f);throw new Error("Unsupported tag: "+f)},o.prototype._isNumstr=function(f){return/^[0-9 ]*$/.test(f)},o.prototype._isPrintstr=function(f){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(f)},bc}var mc={},nl;function Mp(){return nl||(nl=1,(function(t){function e(r){const n={};return Object.keys(r).forEach(function(i){(i|0)==i&&(i=i|0);const s=r[i];n[s]=i}),n}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(mc)),mc}var wc,il;function Cp(){if(il)return wc;il=1;const t=vi(),e=Eu().Buffer,r=Bp(),n=Mp();function i(c){this.enc="der",this.name=c.name,this.entity=c,this.tree=new s,this.tree._init(c.body)}wc=i,i.prototype.encode=function(u,f){return this.tree._encode(u,f).join()};function s(c){r.call(this,"der",c)}t(s,r),s.prototype._encodeComposite=function(u,f,d,h){const g=o(u,f,d,this.reporter);if(h.length<128){const _=e.alloc(2);return _[0]=g,_[1]=h.length,this._createEncoderBuffer([_,h])}let b=1;for(let _=h.length;_>=256;_>>=8)b++;const S=e.alloc(2+b);S[0]=g,S[1]=128|b;for(let _=1+b,C=h.length;C>0;_--,C>>=8)S[_]=C&255;return this._createEncoderBuffer([S,h])},s.prototype._encodeStr=function(u,f){if(f==="bitstr")return this._createEncoderBuffer([u.unused|0,u.data]);if(f==="bmpstr"){const d=e.alloc(u.length*2);for(let h=0;h<u.length;h++)d.writeUInt16BE(u.charCodeAt(h),h*2);return this._createEncoderBuffer(d)}else return f==="numstr"?this._isNumstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: numstr supports only digits and space"):f==="printstr"?this._isPrintstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(f)?this._createEncoderBuffer(u):f==="objDesc"?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: "+f+" unsupported")},s.prototype._encodeObjid=function(u,f,d){if(typeof u=="string"){if(!f)return this.reporter.error("string objid given, but no values map found");if(!f.hasOwnProperty(u))return this.reporter.error("objid not found in values map");u=f[u].split(/[\s.]+/g);for(let S=0;S<u.length;S++)u[S]|=0}else if(Array.isArray(u)){u=u.slice();for(let S=0;S<u.length;S++)u[S]|=0}if(!Array.isArray(u))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(u));if(!d){if(u[1]>=40)return this.reporter.error("Second objid identifier OOB");u.splice(0,2,u[0]*40+u[1])}let h=0;for(let S=0;S<u.length;S++){let _=u[S];for(h++;_>=128;_>>=7)h++}const g=e.alloc(h);let b=g.length-1;for(let S=u.length-1;S>=0;S--){let _=u[S];for(g[b--]=_&127;(_>>=7)>0;)g[b--]=128|_&127}return this._createEncoderBuffer(g)};function a(c){return c<10?"0"+c:c}s.prototype._encodeTime=function(u,f){let d;const h=new Date(u);return f==="gentime"?d=[a(h.getUTCFullYear()),a(h.getUTCMonth()+1),a(h.getUTCDate()),a(h.getUTCHours()),a(h.getUTCMinutes()),a(h.getUTCSeconds()),"Z"].join(""):f==="utctime"?d=[a(h.getUTCFullYear()%100),a(h.getUTCMonth()+1),a(h.getUTCDate()),a(h.getUTCHours()),a(h.getUTCMinutes()),a(h.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+f+" time is not supported yet"),this._encodeStr(d,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(u,f){if(typeof u=="string"){if(!f)return this.reporter.error("String int or enum given, but no values map");if(!f.hasOwnProperty(u))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(u));u=f[u]}if(typeof u!="number"&&!e.isBuffer(u)){const g=u.toArray();!u.sign&&g[0]&128&&g.unshift(0),u=e.from(g)}if(e.isBuffer(u)){let g=u.length;u.length===0&&g++;const b=e.alloc(g);return u.copy(b),u.length===0&&(b[0]=0),this._createEncoderBuffer(b)}if(u<128)return this._createEncoderBuffer(u);if(u<256)return this._createEncoderBuffer([0,u]);let d=1;for(let g=u;g>=256;g>>=8)d++;const h=new Array(d);for(let g=h.length-1;g>=0;g--)h[g]=u&255,u>>=8;return h[0]&128&&h.unshift(0),this._createEncoderBuffer(e.from(h))},s.prototype._encodeBool=function(u){return this._createEncoderBuffer(u?255:0)},s.prototype._use=function(u,f){return typeof u=="function"&&(u=u(f)),u._getEncoder("der").tree},s.prototype._skipDefault=function(u,f,d){const h=this._baseState;let g;if(h.default===null)return!1;const b=u.join();if(h.defaultBuffer===void 0&&(h.defaultBuffer=this._encodeValue(h.default,f,d).join()),b.length!==h.defaultBuffer.length)return!1;for(g=0;g<b.length;g++)if(b[g]!==h.defaultBuffer[g])return!1;return!0};function o(c,u,f,d){let h;if(c==="seqof"?c="seq":c==="setof"&&(c="set"),n.tagByName.hasOwnProperty(c))h=n.tagByName[c];else if(typeof c=="number"&&(c|0)===c)h=c;else return d.error("Unknown tag: "+c);return h>=31?d.error("Multi-octet tag encoding unsupported"):(u||(h|=32),h|=n.tagClassByName[f||"universal"]<<6,h)}return wc}var vc,sl;function j1(){if(sl)return vc;sl=1;const t=vi(),e=Cp();function r(n){e.call(this,n),this.enc="pem"}return t(r,e),vc=r,r.prototype.encode=function(i,s){const o=e.prototype.encode.call(this,i).toString("base64"),c=["-----BEGIN "+s.label+"-----"];for(let u=0;u<o.length;u+=64)c.push(o.slice(u,u+64));return c.push("-----END "+s.label+"-----"),c.join(`
`)},vc}var al;function G1(){return al||(al=1,(function(t){const e=t;e.der=Cp(),e.pem=j1()})(xc)),xc}var _c={},Fa={exports:{}},W1=Fa.exports,ol;function V1(){return ol||(ol=1,(function(t){(function(e,r){function n(P,l){if(!P)throw new Error(l||"Assertion failed")}function i(P,l){P.super_=l;var x=function(){};x.prototype=l.prototype,P.prototype=new x,P.prototype.constructor=P}function s(P,l,x){if(s.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((l==="le"||l==="be")&&(x=l,l=10),this._init(P||0,l||10,x||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=tg.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,x){return l.cmp(x)>0?l:x},s.min=function(l,x){return l.cmp(x)<0?l:x},s.prototype._init=function(l,x,m){if(typeof l=="number")return this._initNumber(l,x,m);if(typeof l=="object")return this._initArray(l,x,m);x==="hex"&&(x=16),n(x===(x|0)&&x>=2&&x<=36),l=l.toString().replace(/\s+/g,"");var A=0;l[0]==="-"&&(A++,this.negative=1),A<l.length&&(x===16?this._parseHex(l,A,m):(this._parseBase(l,x,A),m==="le"&&this._initArray(this.toArray(),x,m)))},s.prototype._initNumber=function(l,x,m){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),x,m)},s.prototype._initArray=function(l,x,m){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var v,M,I=0;if(m==="be")for(A=l.length-1,v=0;A>=0;A-=3)M=l[A]|l[A-1]<<8|l[A-2]<<16,this.words[v]|=M<<I&67108863,this.words[v+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);else if(m==="le")for(A=0,v=0;A<l.length;A+=3)M=l[A]|l[A+1]<<8|l[A+2]<<16,this.words[v]|=M<<I&67108863,this.words[v+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);return this.strip()};function o(P,l){var x=P.charCodeAt(l);return x>=65&&x<=70?x-55:x>=97&&x<=102?x-87:x-48&15}function c(P,l,x){var m=o(P,x);return x-1>=l&&(m|=o(P,x-1)<<4),m}s.prototype._parseHex=function(l,x,m){this.length=Math.ceil((l.length-x)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var v=0,M=0,I;if(m==="be")for(A=l.length-1;A>=x;A-=2)I=c(l,x,A)<<v,this.words[M]|=I&67108863,v>=18?(v-=18,M+=1,this.words[M]|=I>>>26):v+=8;else{var B=l.length-x;for(A=B%2===0?x+1:x;A<l.length;A+=2)I=c(l,x,A)<<v,this.words[M]|=I&67108863,v>=18?(v-=18,M+=1,this.words[M]|=I>>>26):v+=8}this.strip()};function u(P,l,x,m){for(var A=0,v=Math.min(P.length,x),M=l;M<v;M++){var I=P.charCodeAt(M)-48;A*=m,I>=49?A+=I-49+10:I>=17?A+=I-17+10:A+=I}return A}s.prototype._parseBase=function(l,x,m){this.words=[0],this.length=1;for(var A=0,v=1;v<=67108863;v*=x)A++;A--,v=v/x|0;for(var M=l.length-m,I=M%A,B=Math.min(M,M-I)+m,y=0,E=m;E<B;E+=A)y=u(l,E,E+A,x),this.imuln(v),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(I!==0){var H=1;for(y=u(l,E,l.length,x),E=0;E<I;E++)H*=x;this.imuln(H),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var x=0;x<this.length;x++)l.words[x]=this.words[x];l.length=this.length,l.negative=this.negative,l.red=this.red},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,x){l=l||10,x=x|0||1;var m;if(l===16||l==="hex"){m="";for(var A=0,v=0,M=0;M<this.length;M++){var I=this.words[M],B=((I<<A|v)&16777215).toString(16);v=I>>>24-A&16777215,A+=2,A>=26&&(A-=26,M--),v!==0||M!==this.length-1?m=f[6-B.length]+B+m:m=B+m}for(v!==0&&(m=v.toString(16)+m);m.length%x!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(l===(l|0)&&l>=2&&l<=36){var y=d[l],E=h[l];m="";var H=this.clone();for(H.negative=0;!H.isZero();){var z=H.modn(E).toString(l);H=H.idivn(E),H.isZero()?m=z+m:m=f[y-z.length]+z+m}for(this.isZero()&&(m="0"+m);m.length%x!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(l,x){return n(typeof a<"u"),this.toArrayLike(a,l,x)},s.prototype.toArray=function(l,x){return this.toArrayLike(Array,l,x)},s.prototype.toArrayLike=function(l,x,m){var A=this.byteLength(),v=m||Math.max(1,A);n(A<=v,"byte array longer than desired length"),n(v>0,"Requested array length <= 0"),this.strip();var M=x==="le",I=new l(v),B,y,E=this.clone();if(M){for(y=0;!E.isZero();y++)B=E.andln(255),E.iushrn(8),I[y]=B;for(;y<v;y++)I[y]=0}else{for(y=0;y<v-A;y++)I[y]=0;for(y=0;!E.isZero();y++)B=E.andln(255),E.iushrn(8),I[v-y-1]=B}return I},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var x=l,m=0;return x>=4096&&(m+=13,x>>>=13),x>=64&&(m+=7,x>>>=7),x>=8&&(m+=4,x>>>=4),x>=2&&(m+=2,x>>>=2),m+x},s.prototype._zeroBits=function(l){if(l===0)return 26;var x=l,m=0;return(x&8191)===0&&(m+=13,x>>>=13),(x&127)===0&&(m+=7,x>>>=7),(x&15)===0&&(m+=4,x>>>=4),(x&3)===0&&(m+=2,x>>>=2),(x&1)===0&&m++,m},s.prototype.bitLength=function(){var l=this.words[this.length-1],x=this._countBits(l);return(this.length-1)*26+x};function g(P){for(var l=new Array(P.bitLength()),x=0;x<l.length;x++){var m=x/26|0,A=x%26;l[x]=(P.words[m]&1<<A)>>>A}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,x=0;x<this.length;x++){var m=this._zeroBits(this.words[x]);if(l+=m,m!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var x=0;x<l.length;x++)this.words[x]=this.words[x]|l.words[x];return this.strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var x;this.length>l.length?x=l:x=this;for(var m=0;m<x.length;m++)this.words[m]=this.words[m]&l.words[m];return this.length=x.length,this.strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var x,m;this.length>l.length?(x=this,m=l):(x=l,m=this);for(var A=0;A<m.length;A++)this.words[A]=x.words[A]^m.words[A];if(this!==x)for(;A<x.length;A++)this.words[A]=x.words[A];return this.length=x.length,this.strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var x=Math.ceil(l/26)|0,m=l%26;this._expand(x),m>0&&x--;for(var A=0;A<x;A++)this.words[A]=~this.words[A]&67108863;return m>0&&(this.words[A]=~this.words[A]&67108863>>26-m),this.strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,x){n(typeof l=="number"&&l>=0);var m=l/26|0,A=l%26;return this._expand(m+1),x?this.words[m]=this.words[m]|1<<A:this.words[m]=this.words[m]&~(1<<A),this.strip()},s.prototype.iadd=function(l){var x;if(this.negative!==0&&l.negative===0)return this.negative=0,x=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,x=this.isub(l),l.negative=1,x._normSign();var m,A;this.length>l.length?(m=this,A=l):(m=l,A=this);for(var v=0,M=0;M<A.length;M++)x=(m.words[M]|0)+(A.words[M]|0)+v,this.words[M]=x&67108863,v=x>>>26;for(;v!==0&&M<m.length;M++)x=(m.words[M]|0)+v,this.words[M]=x&67108863,v=x>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;M<m.length;M++)this.words[M]=m.words[M];return this},s.prototype.add=function(l){var x;return l.negative!==0&&this.negative===0?(l.negative=0,x=this.sub(l),l.negative^=1,x):l.negative===0&&this.negative!==0?(this.negative=0,x=l.sub(this),this.negative=1,x):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var x=this.iadd(l);return l.negative=1,x._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var m=this.cmp(l);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,v;m>0?(A=this,v=l):(A=l,v=this);for(var M=0,I=0;I<v.length;I++)x=(A.words[I]|0)-(v.words[I]|0)+M,M=x>>26,this.words[I]=x&67108863;for(;M!==0&&I<A.length;I++)x=(A.words[I]|0)+M,M=x>>26,this.words[I]=x&67108863;if(M===0&&I<A.length&&A!==this)for(;I<A.length;I++)this.words[I]=A.words[I];return this.length=Math.max(this.length,I),A!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function b(P,l,x){x.negative=l.negative^P.negative;var m=P.length+l.length|0;x.length=m,m=m-1|0;var A=P.words[0]|0,v=l.words[0]|0,M=A*v,I=M&67108863,B=M/67108864|0;x.words[0]=I;for(var y=1;y<m;y++){for(var E=B>>>26,H=B&67108863,z=Math.min(y,l.length-1),L=Math.max(0,y-P.length+1);L<=z;L++){var D=y-L|0;A=P.words[D]|0,v=l.words[L]|0,M=A*v+H,E+=M/67108864|0,H=M&67108863}x.words[y]=H|0,B=E|0}return B!==0?x.words[y]=B|0:x.length--,x.strip()}var S=function(l,x,m){var A=l.words,v=x.words,M=m.words,I=0,B,y,E,H=A[0]|0,z=H&8191,L=H>>>13,D=A[1]|0,ne=D&8191,we=D>>>13,Te=A[2]|0,xe=Te&8191,Me=Te>>>13,Ut=A[3]|0,Xe=Ut&8191,Et=Ut>>>13,zn=A[4]|0,kt=zn&8191,Bt=zn>>>13,An=A[5]|0,St=An&8191,it=An>>>13,tn=A[6]|0,At=tn&8191,gt=tn>>>13,pn=A[7]|0,ht=pn&8191,bt=pn>>>13,rn=A[8]|0,mt=rn&8191,wt=rn>>>13,xn=A[9]|0,Tt=xn&8191,pt=xn>>>13,nn=v[0]|0,ut=nn&8191,at=nn>>>13,Sr=v[1]|0,ot=Sr&8191,lt=Sr>>>13,Ir=v[2]|0,ct=Ir&8191,xt=Ir>>>13,yn=v[3]|0,Rt=yn&8191,Pt=yn>>>13,ar=v[4]|0,rt=ar&8191,st=ar>>>13,sn=v[5]|0,yt=sn&8191,vt=sn>>>13,Tn=v[6]|0,je=Tn&8191,_t=Tn>>>13,w=v[7]|0,R=w&8191,T=w>>>13,p=v[8]|0,k=p&8191,K=p>>>13,j=v[9]|0,X=j&8191,te=j>>>13;m.negative=l.negative^x.negative,m.length=19,B=Math.imul(z,ut),y=Math.imul(z,at),y=y+Math.imul(L,ut)|0,E=Math.imul(L,at);var be=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(be>>>26)|0,be&=67108863,B=Math.imul(ne,ut),y=Math.imul(ne,at),y=y+Math.imul(we,ut)|0,E=Math.imul(we,at),B=B+Math.imul(z,ot)|0,y=y+Math.imul(z,lt)|0,y=y+Math.imul(L,ot)|0,E=E+Math.imul(L,lt)|0;var le=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(le>>>26)|0,le&=67108863,B=Math.imul(xe,ut),y=Math.imul(xe,at),y=y+Math.imul(Me,ut)|0,E=Math.imul(Me,at),B=B+Math.imul(ne,ot)|0,y=y+Math.imul(ne,lt)|0,y=y+Math.imul(we,ot)|0,E=E+Math.imul(we,lt)|0,B=B+Math.imul(z,ct)|0,y=y+Math.imul(z,xt)|0,y=y+Math.imul(L,ct)|0,E=E+Math.imul(L,xt)|0;var Fe=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,B=Math.imul(Xe,ut),y=Math.imul(Xe,at),y=y+Math.imul(Et,ut)|0,E=Math.imul(Et,at),B=B+Math.imul(xe,ot)|0,y=y+Math.imul(xe,lt)|0,y=y+Math.imul(Me,ot)|0,E=E+Math.imul(Me,lt)|0,B=B+Math.imul(ne,ct)|0,y=y+Math.imul(ne,xt)|0,y=y+Math.imul(we,ct)|0,E=E+Math.imul(we,xt)|0,B=B+Math.imul(z,Rt)|0,y=y+Math.imul(z,Pt)|0,y=y+Math.imul(L,Rt)|0,E=E+Math.imul(L,Pt)|0;var he=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(he>>>26)|0,he&=67108863,B=Math.imul(kt,ut),y=Math.imul(kt,at),y=y+Math.imul(Bt,ut)|0,E=Math.imul(Bt,at),B=B+Math.imul(Xe,ot)|0,y=y+Math.imul(Xe,lt)|0,y=y+Math.imul(Et,ot)|0,E=E+Math.imul(Et,lt)|0,B=B+Math.imul(xe,ct)|0,y=y+Math.imul(xe,xt)|0,y=y+Math.imul(Me,ct)|0,E=E+Math.imul(Me,xt)|0,B=B+Math.imul(ne,Rt)|0,y=y+Math.imul(ne,Pt)|0,y=y+Math.imul(we,Rt)|0,E=E+Math.imul(we,Pt)|0,B=B+Math.imul(z,rt)|0,y=y+Math.imul(z,st)|0,y=y+Math.imul(L,rt)|0,E=E+Math.imul(L,st)|0;var _e=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(_e>>>26)|0,_e&=67108863,B=Math.imul(St,ut),y=Math.imul(St,at),y=y+Math.imul(it,ut)|0,E=Math.imul(it,at),B=B+Math.imul(kt,ot)|0,y=y+Math.imul(kt,lt)|0,y=y+Math.imul(Bt,ot)|0,E=E+Math.imul(Bt,lt)|0,B=B+Math.imul(Xe,ct)|0,y=y+Math.imul(Xe,xt)|0,y=y+Math.imul(Et,ct)|0,E=E+Math.imul(Et,xt)|0,B=B+Math.imul(xe,Rt)|0,y=y+Math.imul(xe,Pt)|0,y=y+Math.imul(Me,Rt)|0,E=E+Math.imul(Me,Pt)|0,B=B+Math.imul(ne,rt)|0,y=y+Math.imul(ne,st)|0,y=y+Math.imul(we,rt)|0,E=E+Math.imul(we,st)|0,B=B+Math.imul(z,yt)|0,y=y+Math.imul(z,vt)|0,y=y+Math.imul(L,yt)|0,E=E+Math.imul(L,vt)|0;var Ee=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,B=Math.imul(At,ut),y=Math.imul(At,at),y=y+Math.imul(gt,ut)|0,E=Math.imul(gt,at),B=B+Math.imul(St,ot)|0,y=y+Math.imul(St,lt)|0,y=y+Math.imul(it,ot)|0,E=E+Math.imul(it,lt)|0,B=B+Math.imul(kt,ct)|0,y=y+Math.imul(kt,xt)|0,y=y+Math.imul(Bt,ct)|0,E=E+Math.imul(Bt,xt)|0,B=B+Math.imul(Xe,Rt)|0,y=y+Math.imul(Xe,Pt)|0,y=y+Math.imul(Et,Rt)|0,E=E+Math.imul(Et,Pt)|0,B=B+Math.imul(xe,rt)|0,y=y+Math.imul(xe,st)|0,y=y+Math.imul(Me,rt)|0,E=E+Math.imul(Me,st)|0,B=B+Math.imul(ne,yt)|0,y=y+Math.imul(ne,vt)|0,y=y+Math.imul(we,yt)|0,E=E+Math.imul(we,vt)|0,B=B+Math.imul(z,je)|0,y=y+Math.imul(z,_t)|0,y=y+Math.imul(L,je)|0,E=E+Math.imul(L,_t)|0;var Ce=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,B=Math.imul(ht,ut),y=Math.imul(ht,at),y=y+Math.imul(bt,ut)|0,E=Math.imul(bt,at),B=B+Math.imul(At,ot)|0,y=y+Math.imul(At,lt)|0,y=y+Math.imul(gt,ot)|0,E=E+Math.imul(gt,lt)|0,B=B+Math.imul(St,ct)|0,y=y+Math.imul(St,xt)|0,y=y+Math.imul(it,ct)|0,E=E+Math.imul(it,xt)|0,B=B+Math.imul(kt,Rt)|0,y=y+Math.imul(kt,Pt)|0,y=y+Math.imul(Bt,Rt)|0,E=E+Math.imul(Bt,Pt)|0,B=B+Math.imul(Xe,rt)|0,y=y+Math.imul(Xe,st)|0,y=y+Math.imul(Et,rt)|0,E=E+Math.imul(Et,st)|0,B=B+Math.imul(xe,yt)|0,y=y+Math.imul(xe,vt)|0,y=y+Math.imul(Me,yt)|0,E=E+Math.imul(Me,vt)|0,B=B+Math.imul(ne,je)|0,y=y+Math.imul(ne,_t)|0,y=y+Math.imul(we,je)|0,E=E+Math.imul(we,_t)|0,B=B+Math.imul(z,R)|0,y=y+Math.imul(z,T)|0,y=y+Math.imul(L,R)|0,E=E+Math.imul(L,T)|0;var ke=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(ke>>>26)|0,ke&=67108863,B=Math.imul(mt,ut),y=Math.imul(mt,at),y=y+Math.imul(wt,ut)|0,E=Math.imul(wt,at),B=B+Math.imul(ht,ot)|0,y=y+Math.imul(ht,lt)|0,y=y+Math.imul(bt,ot)|0,E=E+Math.imul(bt,lt)|0,B=B+Math.imul(At,ct)|0,y=y+Math.imul(At,xt)|0,y=y+Math.imul(gt,ct)|0,E=E+Math.imul(gt,xt)|0,B=B+Math.imul(St,Rt)|0,y=y+Math.imul(St,Pt)|0,y=y+Math.imul(it,Rt)|0,E=E+Math.imul(it,Pt)|0,B=B+Math.imul(kt,rt)|0,y=y+Math.imul(kt,st)|0,y=y+Math.imul(Bt,rt)|0,E=E+Math.imul(Bt,st)|0,B=B+Math.imul(Xe,yt)|0,y=y+Math.imul(Xe,vt)|0,y=y+Math.imul(Et,yt)|0,E=E+Math.imul(Et,vt)|0,B=B+Math.imul(xe,je)|0,y=y+Math.imul(xe,_t)|0,y=y+Math.imul(Me,je)|0,E=E+Math.imul(Me,_t)|0,B=B+Math.imul(ne,R)|0,y=y+Math.imul(ne,T)|0,y=y+Math.imul(we,R)|0,E=E+Math.imul(we,T)|0,B=B+Math.imul(z,k)|0,y=y+Math.imul(z,K)|0,y=y+Math.imul(L,k)|0,E=E+Math.imul(L,K)|0;var Se=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(Se>>>26)|0,Se&=67108863,B=Math.imul(Tt,ut),y=Math.imul(Tt,at),y=y+Math.imul(pt,ut)|0,E=Math.imul(pt,at),B=B+Math.imul(mt,ot)|0,y=y+Math.imul(mt,lt)|0,y=y+Math.imul(wt,ot)|0,E=E+Math.imul(wt,lt)|0,B=B+Math.imul(ht,ct)|0,y=y+Math.imul(ht,xt)|0,y=y+Math.imul(bt,ct)|0,E=E+Math.imul(bt,xt)|0,B=B+Math.imul(At,Rt)|0,y=y+Math.imul(At,Pt)|0,y=y+Math.imul(gt,Rt)|0,E=E+Math.imul(gt,Pt)|0,B=B+Math.imul(St,rt)|0,y=y+Math.imul(St,st)|0,y=y+Math.imul(it,rt)|0,E=E+Math.imul(it,st)|0,B=B+Math.imul(kt,yt)|0,y=y+Math.imul(kt,vt)|0,y=y+Math.imul(Bt,yt)|0,E=E+Math.imul(Bt,vt)|0,B=B+Math.imul(Xe,je)|0,y=y+Math.imul(Xe,_t)|0,y=y+Math.imul(Et,je)|0,E=E+Math.imul(Et,_t)|0,B=B+Math.imul(xe,R)|0,y=y+Math.imul(xe,T)|0,y=y+Math.imul(Me,R)|0,E=E+Math.imul(Me,T)|0,B=B+Math.imul(ne,k)|0,y=y+Math.imul(ne,K)|0,y=y+Math.imul(we,k)|0,E=E+Math.imul(we,K)|0,B=B+Math.imul(z,X)|0,y=y+Math.imul(z,te)|0,y=y+Math.imul(L,X)|0,E=E+Math.imul(L,te)|0;var Re=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(Re>>>26)|0,Re&=67108863,B=Math.imul(Tt,ot),y=Math.imul(Tt,lt),y=y+Math.imul(pt,ot)|0,E=Math.imul(pt,lt),B=B+Math.imul(mt,ct)|0,y=y+Math.imul(mt,xt)|0,y=y+Math.imul(wt,ct)|0,E=E+Math.imul(wt,xt)|0,B=B+Math.imul(ht,Rt)|0,y=y+Math.imul(ht,Pt)|0,y=y+Math.imul(bt,Rt)|0,E=E+Math.imul(bt,Pt)|0,B=B+Math.imul(At,rt)|0,y=y+Math.imul(At,st)|0,y=y+Math.imul(gt,rt)|0,E=E+Math.imul(gt,st)|0,B=B+Math.imul(St,yt)|0,y=y+Math.imul(St,vt)|0,y=y+Math.imul(it,yt)|0,E=E+Math.imul(it,vt)|0,B=B+Math.imul(kt,je)|0,y=y+Math.imul(kt,_t)|0,y=y+Math.imul(Bt,je)|0,E=E+Math.imul(Bt,_t)|0,B=B+Math.imul(Xe,R)|0,y=y+Math.imul(Xe,T)|0,y=y+Math.imul(Et,R)|0,E=E+Math.imul(Et,T)|0,B=B+Math.imul(xe,k)|0,y=y+Math.imul(xe,K)|0,y=y+Math.imul(Me,k)|0,E=E+Math.imul(Me,K)|0,B=B+Math.imul(ne,X)|0,y=y+Math.imul(ne,te)|0,y=y+Math.imul(we,X)|0,E=E+Math.imul(we,te)|0;var Ae=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,B=Math.imul(Tt,ct),y=Math.imul(Tt,xt),y=y+Math.imul(pt,ct)|0,E=Math.imul(pt,xt),B=B+Math.imul(mt,Rt)|0,y=y+Math.imul(mt,Pt)|0,y=y+Math.imul(wt,Rt)|0,E=E+Math.imul(wt,Pt)|0,B=B+Math.imul(ht,rt)|0,y=y+Math.imul(ht,st)|0,y=y+Math.imul(bt,rt)|0,E=E+Math.imul(bt,st)|0,B=B+Math.imul(At,yt)|0,y=y+Math.imul(At,vt)|0,y=y+Math.imul(gt,yt)|0,E=E+Math.imul(gt,vt)|0,B=B+Math.imul(St,je)|0,y=y+Math.imul(St,_t)|0,y=y+Math.imul(it,je)|0,E=E+Math.imul(it,_t)|0,B=B+Math.imul(kt,R)|0,y=y+Math.imul(kt,T)|0,y=y+Math.imul(Bt,R)|0,E=E+Math.imul(Bt,T)|0,B=B+Math.imul(Xe,k)|0,y=y+Math.imul(Xe,K)|0,y=y+Math.imul(Et,k)|0,E=E+Math.imul(Et,K)|0,B=B+Math.imul(xe,X)|0,y=y+Math.imul(xe,te)|0,y=y+Math.imul(Me,X)|0,E=E+Math.imul(Me,te)|0;var pe=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(pe>>>26)|0,pe&=67108863,B=Math.imul(Tt,Rt),y=Math.imul(Tt,Pt),y=y+Math.imul(pt,Rt)|0,E=Math.imul(pt,Pt),B=B+Math.imul(mt,rt)|0,y=y+Math.imul(mt,st)|0,y=y+Math.imul(wt,rt)|0,E=E+Math.imul(wt,st)|0,B=B+Math.imul(ht,yt)|0,y=y+Math.imul(ht,vt)|0,y=y+Math.imul(bt,yt)|0,E=E+Math.imul(bt,vt)|0,B=B+Math.imul(At,je)|0,y=y+Math.imul(At,_t)|0,y=y+Math.imul(gt,je)|0,E=E+Math.imul(gt,_t)|0,B=B+Math.imul(St,R)|0,y=y+Math.imul(St,T)|0,y=y+Math.imul(it,R)|0,E=E+Math.imul(it,T)|0,B=B+Math.imul(kt,k)|0,y=y+Math.imul(kt,K)|0,y=y+Math.imul(Bt,k)|0,E=E+Math.imul(Bt,K)|0,B=B+Math.imul(Xe,X)|0,y=y+Math.imul(Xe,te)|0,y=y+Math.imul(Et,X)|0,E=E+Math.imul(Et,te)|0;var me=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(me>>>26)|0,me&=67108863,B=Math.imul(Tt,rt),y=Math.imul(Tt,st),y=y+Math.imul(pt,rt)|0,E=Math.imul(pt,st),B=B+Math.imul(mt,yt)|0,y=y+Math.imul(mt,vt)|0,y=y+Math.imul(wt,yt)|0,E=E+Math.imul(wt,vt)|0,B=B+Math.imul(ht,je)|0,y=y+Math.imul(ht,_t)|0,y=y+Math.imul(bt,je)|0,E=E+Math.imul(bt,_t)|0,B=B+Math.imul(At,R)|0,y=y+Math.imul(At,T)|0,y=y+Math.imul(gt,R)|0,E=E+Math.imul(gt,T)|0,B=B+Math.imul(St,k)|0,y=y+Math.imul(St,K)|0,y=y+Math.imul(it,k)|0,E=E+Math.imul(it,K)|0,B=B+Math.imul(kt,X)|0,y=y+Math.imul(kt,te)|0,y=y+Math.imul(Bt,X)|0,E=E+Math.imul(Bt,te)|0;var de=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(de>>>26)|0,de&=67108863,B=Math.imul(Tt,yt),y=Math.imul(Tt,vt),y=y+Math.imul(pt,yt)|0,E=Math.imul(pt,vt),B=B+Math.imul(mt,je)|0,y=y+Math.imul(mt,_t)|0,y=y+Math.imul(wt,je)|0,E=E+Math.imul(wt,_t)|0,B=B+Math.imul(ht,R)|0,y=y+Math.imul(ht,T)|0,y=y+Math.imul(bt,R)|0,E=E+Math.imul(bt,T)|0,B=B+Math.imul(At,k)|0,y=y+Math.imul(At,K)|0,y=y+Math.imul(gt,k)|0,E=E+Math.imul(gt,K)|0,B=B+Math.imul(St,X)|0,y=y+Math.imul(St,te)|0,y=y+Math.imul(it,X)|0,E=E+Math.imul(it,te)|0;var ye=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(ye>>>26)|0,ye&=67108863,B=Math.imul(Tt,je),y=Math.imul(Tt,_t),y=y+Math.imul(pt,je)|0,E=Math.imul(pt,_t),B=B+Math.imul(mt,R)|0,y=y+Math.imul(mt,T)|0,y=y+Math.imul(wt,R)|0,E=E+Math.imul(wt,T)|0,B=B+Math.imul(ht,k)|0,y=y+Math.imul(ht,K)|0,y=y+Math.imul(bt,k)|0,E=E+Math.imul(bt,K)|0,B=B+Math.imul(At,X)|0,y=y+Math.imul(At,te)|0,y=y+Math.imul(gt,X)|0,E=E+Math.imul(gt,te)|0;var ge=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(ge>>>26)|0,ge&=67108863,B=Math.imul(Tt,R),y=Math.imul(Tt,T),y=y+Math.imul(pt,R)|0,E=Math.imul(pt,T),B=B+Math.imul(mt,k)|0,y=y+Math.imul(mt,K)|0,y=y+Math.imul(wt,k)|0,E=E+Math.imul(wt,K)|0,B=B+Math.imul(ht,X)|0,y=y+Math.imul(ht,te)|0,y=y+Math.imul(bt,X)|0,E=E+Math.imul(bt,te)|0;var ue=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(ue>>>26)|0,ue&=67108863,B=Math.imul(Tt,k),y=Math.imul(Tt,K),y=y+Math.imul(pt,k)|0,E=Math.imul(pt,K),B=B+Math.imul(mt,X)|0,y=y+Math.imul(mt,te)|0,y=y+Math.imul(wt,X)|0,E=E+Math.imul(wt,te)|0;var G=(I+B|0)+((y&8191)<<13)|0;I=(E+(y>>>13)|0)+(G>>>26)|0,G&=67108863,B=Math.imul(Tt,X),y=Math.imul(Tt,te),y=y+Math.imul(pt,X)|0,E=Math.imul(pt,te);var W=(I+B|0)+((y&8191)<<13)|0;return I=(E+(y>>>13)|0)+(W>>>26)|0,W&=67108863,M[0]=be,M[1]=le,M[2]=Fe,M[3]=he,M[4]=_e,M[5]=Ee,M[6]=Ce,M[7]=ke,M[8]=Se,M[9]=Re,M[10]=Ae,M[11]=pe,M[12]=me,M[13]=de,M[14]=ye,M[15]=ge,M[16]=ue,M[17]=G,M[18]=W,I!==0&&(M[19]=I,m.length++),m};Math.imul||(S=b);function _(P,l,x){x.negative=l.negative^P.negative,x.length=P.length+l.length;for(var m=0,A=0,v=0;v<x.length-1;v++){var M=A;A=0;for(var I=m&67108863,B=Math.min(v,l.length-1),y=Math.max(0,v-P.length+1);y<=B;y++){var E=v-y,H=P.words[E]|0,z=l.words[y]|0,L=H*z,D=L&67108863;M=M+(L/67108864|0)|0,D=D+I|0,I=D&67108863,M=M+(D>>>26)|0,A+=M>>>26,M&=67108863}x.words[v]=I,m=M,M=A}return m!==0?x.words[v]=m:x.length--,x.strip()}function C(P,l,x){var m=new F;return m.mulp(P,l,x)}s.prototype.mulTo=function(l,x){var m,A=this.length+l.length;return this.length===10&&l.length===10?m=S(this,l,x):A<63?m=b(this,l,x):A<1024?m=_(this,l,x):m=C(this,l,x),m};function F(P,l){this.x=P,this.y=l}F.prototype.makeRBT=function(l){for(var x=new Array(l),m=s.prototype._countBits(l)-1,A=0;A<l;A++)x[A]=this.revBin(A,m,l);return x},F.prototype.revBin=function(l,x,m){if(l===0||l===m-1)return l;for(var A=0,v=0;v<x;v++)A|=(l&1)<<x-v-1,l>>=1;return A},F.prototype.permute=function(l,x,m,A,v,M){for(var I=0;I<M;I++)A[I]=x[l[I]],v[I]=m[l[I]]},F.prototype.transform=function(l,x,m,A,v,M){this.permute(M,l,x,m,A,v);for(var I=1;I<v;I<<=1)for(var B=I<<1,y=Math.cos(2*Math.PI/B),E=Math.sin(2*Math.PI/B),H=0;H<v;H+=B)for(var z=y,L=E,D=0;D<I;D++){var ne=m[H+D],we=A[H+D],Te=m[H+D+I],xe=A[H+D+I],Me=z*Te-L*xe;xe=z*xe+L*Te,Te=Me,m[H+D]=ne+Te,A[H+D]=we+xe,m[H+D+I]=ne-Te,A[H+D+I]=we-xe,D!==B&&(Me=y*z-E*L,L=y*L+E*z,z=Me)}},F.prototype.guessLen13b=function(l,x){var m=Math.max(x,l)|1,A=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+A},F.prototype.conjugate=function(l,x,m){if(!(m<=1))for(var A=0;A<m/2;A++){var v=l[A];l[A]=l[m-A-1],l[m-A-1]=v,v=x[A],x[A]=-x[m-A-1],x[m-A-1]=-v}},F.prototype.normalize13b=function(l,x){for(var m=0,A=0;A<x/2;A++){var v=Math.round(l[2*A+1]/x)*8192+Math.round(l[2*A]/x)+m;l[A]=v&67108863,v<67108864?m=0:m=v/67108864|0}return l},F.prototype.convert13b=function(l,x,m,A){for(var v=0,M=0;M<x;M++)v=v+(l[M]|0),m[2*M]=v&8191,v=v>>>13,m[2*M+1]=v&8191,v=v>>>13;for(M=2*x;M<A;++M)m[M]=0;n(v===0),n((v&-8192)===0)},F.prototype.stub=function(l){for(var x=new Array(l),m=0;m<l;m++)x[m]=0;return x},F.prototype.mulp=function(l,x,m){var A=2*this.guessLen13b(l.length,x.length),v=this.makeRBT(A),M=this.stub(A),I=new Array(A),B=new Array(A),y=new Array(A),E=new Array(A),H=new Array(A),z=new Array(A),L=m.words;L.length=A,this.convert13b(l.words,l.length,I,A),this.convert13b(x.words,x.length,E,A),this.transform(I,M,B,y,A,v),this.transform(E,M,H,z,A,v);for(var D=0;D<A;D++){var ne=B[D]*H[D]-y[D]*z[D];y[D]=B[D]*z[D]+y[D]*H[D],B[D]=ne}return this.conjugate(B,y,A),this.transform(B,y,L,M,A,v),this.conjugate(L,M,A),this.normalize13b(L,A),m.negative=l.negative^x.negative,m.length=l.length+x.length,m.strip()},s.prototype.mul=function(l){var x=new s(null);return x.words=new Array(this.length+l.length),this.mulTo(l,x)},s.prototype.mulf=function(l){var x=new s(null);return x.words=new Array(this.length+l.length),C(this,l,x)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){n(typeof l=="number"),n(l<67108864);for(var x=0,m=0;m<this.length;m++){var A=(this.words[m]|0)*l,v=(A&67108863)+(x&67108863);x>>=26,x+=A/67108864|0,x+=v>>>26,this.words[m]=v&67108863}return x!==0&&(this.words[m]=x,this.length++),this.length=l===0?1:this.length,this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var x=g(l);if(x.length===0)return new s(1);for(var m=this,A=0;A<x.length&&x[A]===0;A++,m=m.sqr());if(++A<x.length)for(var v=m.sqr();A<x.length;A++,v=v.sqr())x[A]!==0&&(m=m.mul(v));return m},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var x=l%26,m=(l-x)/26,A=67108863>>>26-x<<26-x,v;if(x!==0){var M=0;for(v=0;v<this.length;v++){var I=this.words[v]&A,B=(this.words[v]|0)-I<<x;this.words[v]=B|M,M=I>>>26-x}M&&(this.words[v]=M,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,x,m){n(typeof l=="number"&&l>=0);var A;x?A=(x-x%26)/26:A=0;var v=l%26,M=Math.min((l-v)/26,this.length),I=67108863^67108863>>>v<<v,B=m;if(A-=M,A=Math.max(0,A),B){for(var y=0;y<M;y++)B.words[y]=this.words[y];B.length=M}if(M!==0)if(this.length>M)for(this.length-=M,y=0;y<this.length;y++)this.words[y]=this.words[y+M];else this.words[0]=0,this.length=1;var E=0;for(y=this.length-1;y>=0&&(E!==0||y>=A);y--){var H=this.words[y]|0;this.words[y]=E<<26-v|H>>>v,E=H&I}return B&&E!==0&&(B.words[B.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(l,x,m){return n(this.negative===0),this.iushrn(l,x,m)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var x=l%26,m=(l-x)/26,A=1<<x;if(this.length<=m)return!1;var v=this.words[m];return!!(v&A)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var x=l%26,m=(l-x)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(x!==0&&m++,this.length=Math.min(m,this.length),x!==0){var A=67108863^67108863>>>x<<x;this.words[this.length-1]&=A}return this.strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var x=0;x<this.length&&this.words[x]>=67108864;x++)this.words[x]-=67108864,x===this.length-1?this.words[x+1]=1:this.words[x+1]++;return this.length=Math.max(this.length,x+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var x=0;x<this.length&&this.words[x]<0;x++)this.words[x]+=67108864,this.words[x+1]-=1;return this.strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,x,m){var A=l.length+m,v;this._expand(A);var M,I=0;for(v=0;v<l.length;v++){M=(this.words[v+m]|0)+I;var B=(l.words[v]|0)*x;M-=B&67108863,I=(M>>26)-(B/67108864|0),this.words[v+m]=M&67108863}for(;v<this.length-m;v++)M=(this.words[v+m]|0)+I,I=M>>26,this.words[v+m]=M&67108863;if(I===0)return this.strip();for(n(I===-1),I=0,v=0;v<this.length;v++)M=-(this.words[v]|0)+I,I=M>>26,this.words[v]=M&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(l,x){var m=this.length-l.length,A=this.clone(),v=l,M=v.words[v.length-1]|0,I=this._countBits(M);m=26-I,m!==0&&(v=v.ushln(m),A.iushln(m),M=v.words[v.length-1]|0);var B=A.length-v.length,y;if(x!=="mod"){y=new s(null),y.length=B+1,y.words=new Array(y.length);for(var E=0;E<y.length;E++)y.words[E]=0}var H=A.clone()._ishlnsubmul(v,1,B);H.negative===0&&(A=H,y&&(y.words[B]=1));for(var z=B-1;z>=0;z--){var L=(A.words[v.length+z]|0)*67108864+(A.words[v.length+z-1]|0);for(L=Math.min(L/M|0,67108863),A._ishlnsubmul(v,L,z);A.negative!==0;)L--,A.negative=0,A._ishlnsubmul(v,1,z),A.isZero()||(A.negative^=1);y&&(y.words[z]=L)}return y&&y.strip(),A.strip(),x!=="div"&&m!==0&&A.iushrn(m),{div:y||null,mod:A}},s.prototype.divmod=function(l,x,m){if(n(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var A,v,M;return this.negative!==0&&l.negative===0?(M=this.neg().divmod(l,x),x!=="mod"&&(A=M.div.neg()),x!=="div"&&(v=M.mod.neg(),m&&v.negative!==0&&v.iadd(l)),{div:A,mod:v}):this.negative===0&&l.negative!==0?(M=this.divmod(l.neg(),x),x!=="mod"&&(A=M.div.neg()),{div:A,mod:M.mod}):(this.negative&l.negative)!==0?(M=this.neg().divmod(l.neg(),x),x!=="div"&&(v=M.mod.neg(),m&&v.negative!==0&&v.isub(l)),{div:M.div,mod:v}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?x==="div"?{div:this.divn(l.words[0]),mod:null}:x==="mod"?{div:null,mod:new s(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modn(l.words[0]))}:this._wordDiv(l,x)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var x=this.divmod(l);if(x.mod.isZero())return x.div;var m=x.div.negative!==0?x.mod.isub(l):x.mod,A=l.ushrn(1),v=l.andln(1),M=m.cmp(A);return M<0||v===1&&M===0?x.div:x.div.negative!==0?x.div.isubn(1):x.div.iaddn(1)},s.prototype.modn=function(l){n(l<=67108863);for(var x=(1<<26)%l,m=0,A=this.length-1;A>=0;A--)m=(x*m+(this.words[A]|0))%l;return m},s.prototype.idivn=function(l){n(l<=67108863);for(var x=0,m=this.length-1;m>=0;m--){var A=(this.words[m]|0)+x*67108864;this.words[m]=A/l|0,x=A%l}return this.strip()},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var x=this,m=l.clone();x.negative!==0?x=x.umod(l):x=x.clone();for(var A=new s(1),v=new s(0),M=new s(0),I=new s(1),B=0;x.isEven()&&m.isEven();)x.iushrn(1),m.iushrn(1),++B;for(var y=m.clone(),E=x.clone();!x.isZero();){for(var H=0,z=1;(x.words[0]&z)===0&&H<26;++H,z<<=1);if(H>0)for(x.iushrn(H);H-- >0;)(A.isOdd()||v.isOdd())&&(A.iadd(y),v.isub(E)),A.iushrn(1),v.iushrn(1);for(var L=0,D=1;(m.words[0]&D)===0&&L<26;++L,D<<=1);if(L>0)for(m.iushrn(L);L-- >0;)(M.isOdd()||I.isOdd())&&(M.iadd(y),I.isub(E)),M.iushrn(1),I.iushrn(1);x.cmp(m)>=0?(x.isub(m),A.isub(M),v.isub(I)):(m.isub(x),M.isub(A),I.isub(v))}return{a:M,b:I,gcd:m.iushln(B)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var x=this,m=l.clone();x.negative!==0?x=x.umod(l):x=x.clone();for(var A=new s(1),v=new s(0),M=m.clone();x.cmpn(1)>0&&m.cmpn(1)>0;){for(var I=0,B=1;(x.words[0]&B)===0&&I<26;++I,B<<=1);if(I>0)for(x.iushrn(I);I-- >0;)A.isOdd()&&A.iadd(M),A.iushrn(1);for(var y=0,E=1;(m.words[0]&E)===0&&y<26;++y,E<<=1);if(y>0)for(m.iushrn(y);y-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);x.cmp(m)>=0?(x.isub(m),A.isub(v)):(m.isub(x),v.isub(A))}var H;return x.cmpn(1)===0?H=A:H=v,H.cmpn(0)<0&&H.iadd(l),H},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var x=this.clone(),m=l.clone();x.negative=0,m.negative=0;for(var A=0;x.isEven()&&m.isEven();A++)x.iushrn(1),m.iushrn(1);do{for(;x.isEven();)x.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=x.cmp(m);if(v<0){var M=x;x=m,m=M}else if(v===0||m.cmpn(1)===0)break;x.isub(m)}while(!0);return m.iushln(A)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var x=l%26,m=(l-x)/26,A=1<<x;if(this.length<=m)return this._expand(m+1),this.words[m]|=A,this;for(var v=A,M=m;v!==0&&M<this.length;M++){var I=this.words[M]|0;I+=v,v=I>>>26,I&=67108863,this.words[M]=I}return v!==0&&(this.words[M]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var x=l<0;if(this.negative!==0&&!x)return-1;if(this.negative===0&&x)return 1;this.strip();var m;if(this.length>1)m=1;else{x&&(l=-l),n(l<=67108863,"Number is too big");var A=this.words[0]|0;m=A===l?0:A<l?-1:1}return this.negative!==0?-m|0:m},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var x=this.ucmp(l);return this.negative!==0?-x|0:x},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var x=0,m=this.length-1;m>=0;m--){var A=this.words[m]|0,v=l.words[m]|0;if(A!==v){A<v?x=-1:A>v&&(x=1);break}}return x},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new ee(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var q={k256:null,p224:null,p192:null,p25519:null};function U(P,l){this.name=P,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},U.prototype.ireduce=function(l){var x=l,m;do this.split(x,this.tmp),x=this.imulK(x),x=x.iadd(this.tmp),m=x.bitLength();while(m>this.n);var A=m<this.n?-1:x.ucmp(this.p);return A===0?(x.words[0]=0,x.length=1):A>0?x.isub(this.p):x.strip!==void 0?x.strip():x._strip(),x},U.prototype.split=function(l,x){l.iushrn(this.n,0,x)},U.prototype.imulK=function(l){return l.imul(this.k)};function O(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,U),O.prototype.split=function(l,x){for(var m=4194303,A=Math.min(l.length,9),v=0;v<A;v++)x.words[v]=l.words[v];if(x.length=A,l.length<=9){l.words[0]=0,l.length=1;return}var M=l.words[9];for(x.words[x.length++]=M&m,v=10;v<l.length;v++){var I=l.words[v]|0;l.words[v-10]=(I&m)<<4|M>>>22,M=I}M>>>=22,l.words[v-10]=M,M===0&&l.length>10?l.length-=10:l.length-=9},O.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var x=0,m=0;m<l.length;m++){var A=l.words[m]|0;x+=A*977,l.words[m]=x&67108863,x=A*64+(x/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i($,U);function J(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(J,U);function Y(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(Y,U),Y.prototype.imulK=function(l){for(var x=0,m=0;m<l.length;m++){var A=(l.words[m]|0)*19+x,v=A&67108863;A>>>=26,l.words[m]=v,x=A}return x!==0&&(l.words[l.length++]=x),l},s._prime=function(l){if(q[l])return q[l];var x;if(l==="k256")x=new O;else if(l==="p224")x=new $;else if(l==="p192")x=new J;else if(l==="p25519")x=new Y;else throw new Error("Unknown prime "+l);return q[l]=x,x};function ee(P){if(typeof P=="string"){var l=s._prime(P);this.m=l.p,this.prime=l}else n(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}ee.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},ee.prototype._verify2=function(l,x){n((l.negative|x.negative)===0,"red works only with positives"),n(l.red&&l.red===x.red,"red works only with red numbers")},ee.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},ee.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},ee.prototype.add=function(l,x){this._verify2(l,x);var m=l.add(x);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},ee.prototype.iadd=function(l,x){this._verify2(l,x);var m=l.iadd(x);return m.cmp(this.m)>=0&&m.isub(this.m),m},ee.prototype.sub=function(l,x){this._verify2(l,x);var m=l.sub(x);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},ee.prototype.isub=function(l,x){this._verify2(l,x);var m=l.isub(x);return m.cmpn(0)<0&&m.iadd(this.m),m},ee.prototype.shl=function(l,x){return this._verify1(l),this.imod(l.ushln(x))},ee.prototype.imul=function(l,x){return this._verify2(l,x),this.imod(l.imul(x))},ee.prototype.mul=function(l,x){return this._verify2(l,x),this.imod(l.mul(x))},ee.prototype.isqr=function(l){return this.imul(l,l.clone())},ee.prototype.sqr=function(l){return this.mul(l,l)},ee.prototype.sqrt=function(l){if(l.isZero())return l.clone();var x=this.m.andln(3);if(n(x%2===1),x===3){var m=this.m.add(new s(1)).iushrn(2);return this.pow(l,m)}for(var A=this.m.subn(1),v=0;!A.isZero()&&A.andln(1)===0;)v++,A.iushrn(1);n(!A.isZero());var M=new s(1).toRed(this),I=M.redNeg(),B=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,B).cmp(I)!==0;)y.redIAdd(I);for(var E=this.pow(y,A),H=this.pow(l,A.addn(1).iushrn(1)),z=this.pow(l,A),L=v;z.cmp(M)!==0;){for(var D=z,ne=0;D.cmp(M)!==0;ne++)D=D.redSqr();n(ne<L);var we=this.pow(E,new s(1).iushln(L-ne-1));H=H.redMul(we),E=we.redSqr(),z=z.redMul(E),L=ne}return H},ee.prototype.invm=function(l){var x=l._invmp(this.m);return x.negative!==0?(x.negative=0,this.imod(x).redNeg()):this.imod(x)},ee.prototype.pow=function(l,x){if(x.isZero())return new s(1).toRed(this);if(x.cmpn(1)===0)return l.clone();var m=4,A=new Array(1<<m);A[0]=new s(1).toRed(this),A[1]=l;for(var v=2;v<A.length;v++)A[v]=this.mul(A[v-1],l);var M=A[0],I=0,B=0,y=x.bitLength()%26;for(y===0&&(y=26),v=x.length-1;v>=0;v--){for(var E=x.words[v],H=y-1;H>=0;H--){var z=E>>H&1;if(M!==A[0]&&(M=this.sqr(M)),z===0&&I===0){B=0;continue}I<<=1,I|=z,B++,!(B!==m&&(v!==0||H!==0))&&(M=this.mul(M,A[I]),B=0,I=0)}y=26}return M},ee.prototype.convertTo=function(l){var x=l.umod(this.m);return x===l?x.clone():x},ee.prototype.convertFrom=function(l){var x=l.clone();return x.red=null,x},s.mont=function(l){return new Z(l)};function Z(P){ee.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Z,ee),Z.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},Z.prototype.convertFrom=function(l){var x=this.imod(l.mul(this.rinv));return x.red=null,x},Z.prototype.imul=function(l,x){if(l.isZero()||x.isZero())return l.words[0]=0,l.length=1,l;var m=l.imul(x),A=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(A).iushrn(this.shift),M=v;return v.cmp(this.m)>=0?M=v.isub(this.m):v.cmpn(0)<0&&(M=v.iadd(this.m)),M._forceRed(this)},Z.prototype.mul=function(l,x){if(l.isZero()||x.isZero())return new s(0)._forceRed(this);var m=l.mul(x),A=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(A).iushrn(this.shift),M=v;return v.cmp(this.m)>=0?M=v.isub(this.m):v.cmpn(0)<0&&(M=v.iadd(this.m)),M._forceRed(this)},Z.prototype.invm=function(l){var x=this.imod(l._invmp(this.m).mul(this.r2));return x._forceRed(this)}})(t,W1)})(Fa)),Fa.exports}var Ec,cl;function Ip(){if(cl)return Ec;cl=1;const t=vi(),e=V1(),r=Yf().DecoderBuffer,n=Bp(),i=Mp();function s(u){this.enc="der",this.name=u.name,this.entity=u,this.tree=new a,this.tree._init(u.body)}Ec=s,s.prototype.decode=function(f,d){return r.isDecoderBuffer(f)||(f=new r(f,d)),this.tree._decode(f,d)};function a(u){n.call(this,"der",u)}t(a,n),a.prototype._peekTag=function(f,d,h){if(f.isEmpty())return!1;const g=f.save(),b=o(f,'Failed to peek tag: "'+d+'"');return f.isError(b)?b:(f.restore(g),b.tag===d||b.tagStr===d||b.tagStr+"of"===d||h)},a.prototype._decodeTag=function(f,d,h){const g=o(f,'Failed to decode tag of "'+d+'"');if(f.isError(g))return g;let b=c(f,g.primitive,'Failed to get length of "'+d+'"');if(f.isError(b))return b;if(!h&&g.tag!==d&&g.tagStr!==d&&g.tagStr+"of"!==d)return f.error('Failed to match tag: "'+d+'"');if(g.primitive||b!==null)return f.skip(b,'Failed to match body of: "'+d+'"');const S=f.save(),_=this._skipUntilEnd(f,'Failed to skip indefinite length body: "'+this.tag+'"');return f.isError(_)?_:(b=f.offset-S.offset,f.restore(S),f.skip(b,'Failed to match body of: "'+d+'"'))},a.prototype._skipUntilEnd=function(f,d){for(;;){const h=o(f,d);if(f.isError(h))return h;const g=c(f,h.primitive,d);if(f.isError(g))return g;let b;if(h.primitive||g!==null?b=f.skip(g):b=this._skipUntilEnd(f,d),f.isError(b))return b;if(h.tagStr==="end")break}},a.prototype._decodeList=function(f,d,h,g){const b=[];for(;!f.isEmpty();){const S=this._peekTag(f,"end");if(f.isError(S))return S;const _=h.decode(f,"der",g);if(f.isError(_)&&S)break;b.push(_)}return b},a.prototype._decodeStr=function(f,d){if(d==="bitstr"){const h=f.readUInt8();return f.isError(h)?h:{unused:h,data:f.raw()}}else if(d==="bmpstr"){const h=f.raw();if(h.length%2===1)return f.error("Decoding of string type: bmpstr length mismatch");let g="";for(let b=0;b<h.length/2;b++)g+=String.fromCharCode(h.readUInt16BE(b*2));return g}else if(d==="numstr"){const h=f.raw().toString("ascii");return this._isNumstr(h)?h:f.error("Decoding of string type: numstr unsupported characters")}else{if(d==="octstr")return f.raw();if(d==="objDesc")return f.raw();if(d==="printstr"){const h=f.raw().toString("ascii");return this._isPrintstr(h)?h:f.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(d)?f.raw().toString():f.error("Decoding of string type: "+d+" unsupported")}},a.prototype._decodeObjid=function(f,d,h){let g;const b=[];let S=0,_=0;for(;!f.isEmpty();)_=f.readUInt8(),S<<=7,S|=_&127,(_&128)===0&&(b.push(S),S=0);_&128&&b.push(S);const C=b[0]/40|0,F=b[0]%40;if(h?g=b:g=[C,F].concat(b.slice(1)),d){let q=d[g.join(" ")];q===void 0&&(q=d[g.join(".")]),q!==void 0&&(g=q)}return g},a.prototype._decodeTime=function(f,d){const h=f.raw().toString();let g,b,S,_,C,F;if(d==="gentime")g=h.slice(0,4)|0,b=h.slice(4,6)|0,S=h.slice(6,8)|0,_=h.slice(8,10)|0,C=h.slice(10,12)|0,F=h.slice(12,14)|0;else if(d==="utctime")g=h.slice(0,2)|0,b=h.slice(2,4)|0,S=h.slice(4,6)|0,_=h.slice(6,8)|0,C=h.slice(8,10)|0,F=h.slice(10,12)|0,g<70?g=2e3+g:g=1900+g;else return f.error("Decoding "+d+" time is not supported yet");return Date.UTC(g,b-1,S,_,C,F,0)},a.prototype._decodeNull=function(){return null},a.prototype._decodeBool=function(f){const d=f.readUInt8();return f.isError(d)?d:d!==0},a.prototype._decodeInt=function(f,d){const h=f.raw();let g=new e(h);return d&&(g=d[g.toString(10)]||g),g},a.prototype._use=function(f,d){return typeof f=="function"&&(f=f(d)),f._getDecoder("der").tree};function o(u,f){let d=u.readUInt8(f);if(u.isError(d))return d;const h=i.tagClass[d>>6],g=(d&32)===0;if((d&31)===31){let S=d;for(d=0;(S&128)===128;){if(S=u.readUInt8(f),u.isError(S))return S;d<<=7,d|=S&127}}else d&=31;const b=i.tag[d];return{cls:h,primitive:g,tag:d,tagStr:b}}function c(u,f,d){let h=u.readUInt8(d);if(u.isError(h))return h;if(!f&&h===128)return null;if((h&128)===0)return h;const g=h&127;if(g>4)return u.error("length octect is too long");h=0;for(let b=0;b<g;b++){h<<=8;const S=u.readUInt8(d);if(u.isError(S))return S;h|=S}return h}return Ec}var Sc,fl;function J1(){if(fl)return Sc;fl=1;const t=vi(),e=Eu().Buffer,r=Ip();function n(i){r.call(this,i),this.enc="pem"}return t(n,r),Sc=n,n.prototype.decode=function(s,a){const o=s.toString().split(/[\r\n]+/g),c=a.label.toUpperCase(),u=/^-----(BEGIN|END) ([^-]+)-----$/;let f=-1,d=-1;for(let b=0;b<o.length;b++){const S=o[b].match(u);if(S!==null&&S[2]===c)if(f===-1){if(S[1]!=="BEGIN")break;f=b}else{if(S[1]!=="END")break;d=b;break}}if(f===-1||d===-1)throw new Error("PEM section not found for: "+c);const h=o.slice(f+1,d).join("");h.replace(/[^a-z0-9+/=]+/gi,"");const g=e.from(h,"base64");return r.prototype.decode.call(this,g,a)},Sc}var ul;function X1(){return ul||(ul=1,(function(t){const e=t;e.der=Ip(),e.pem=J1()})(_c)),_c}var ll;function Y1(){return ll||(ll=1,(function(t){const e=G1(),r=X1(),n=vi(),i=t;i.define=function(o,c){return new s(o,c)};function s(a,o){this.name=a,this.body=o,this.decoders={},this.encoders={}}s.prototype._createNamed=function(o){const c=this.name;function u(f){this._initNamed(f,c)}return n(u,o),u.prototype._initNamed=function(d,h){o.call(this,d,h)},new u(this)},s.prototype._getDecoder=function(o){return o=o||"der",this.decoders.hasOwnProperty(o)||(this.decoders[o]=this._createNamed(r[o])),this.decoders[o]},s.prototype.decode=function(o,c,u){return this._getDecoder(c).decode(o,u)},s.prototype._getEncoder=function(o){return o=o||"der",this.encoders.hasOwnProperty(o)||(this.encoders[o]=this._createNamed(e[o])),this.encoders[o]},s.prototype.encode=function(o,c,u){return this._getEncoder(c).encode(o,u)}})(pc)),pc}var Z1=Y1();const Q1=Mr(Z1),_i=Q1.define,em=_i("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),Up=_i("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});_i("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Up),this.key("publicKey").bitstr())});const Op=_i("Version",function(){this.int({0:"two-prime",1:"multi"})}),tm=_i("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),rm=_i("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Op),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(tm))});_i("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Op),this.key("algorithm").use(Up),this.key("privateKey").bitstr())});function nm(t){return{n:Rn(t.n),e:Rn(t.e),d:t.d&&Rn(t.d),p:t.p&&Rn(t.p),q:t.q&&Rn(t.q),dp:t.dp&&Rn(t.dp),dq:t.dq&&Rn(t.dq),qi:t.qi&&Rn(t.qi)}}function im(t){return new Be(Q.Buffer.from(t,"base64"))}function Rn(t){return/^[0-9]+$/.test(t)?new Be(t,10):im(t)}function sm(t){const e=nm(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`;let a=Q.Buffer.alloc(0);r?(e.version="two-prime",a=rm.encode(e,"der")):a=em.encode(e,"der");const o=a.toString("base64").match(/.{1,64}/g).join(`
`);return i+o+s}class vo extends Pp{jwk;constructor(e){super(sm(e),e.n),this.jwk=e}get publicKey(){if(!this.pk)throw new Error("ArweaveSigner - pk is undefined");return $e.toBuffer(this.pk)}sign(e){return tr().sign(this.jwk,e)}static async verify(e,r,n){return await tr().verify(e,r,n)}}class qp{_publicKey;ownerLength=Mt[2].pubLength;signatureLength=Mt[2].sigLength;signatureType=2;pem;provider;constructor(e){if(this.provider=e,!this.provider.publicKey)throw new Error("InjectedSolanaSigner - provider.publicKey is undefined");this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=$e.toBuffer(e)),po(Q.Buffer.from(n),Q.Buffer.from(r),Q.Buffer.from(i))}}var am=rg();const Np=Mr(am);function Qt(t){return"0x"+Np.keccak_256(fe(t))}const om=Ie.from(-1),cm=Ie.from(0),fm=Ie.from(1),um=Ie.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),lm="strings/5.8.0",Lp=new ce(lm);var xi;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(xi||(xi={}));var Rr;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Rr||(Rr={}));function dm(t,e,r,n,i){return Lp.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Dp(t,e,r,n,i){if(t===Rr.BAD_PREFIX||t===Rr.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return t===Rr.OVERRUN?r.length-e-1:0}function hm(t,e,r,n,i){return t===Rr.OVERLONG?(n.push(i),0):(n.push(65533),Dp(t,e,r))}const pm=Object.freeze({error:dm,ignore:Dp,replace:hm});function xm(t,e){e==null&&(e=pm.error),t=fe(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null,a=null;if((i&224)===192)s=1,a=127;else if((i&240)===224)s=2,a=2047;else if((i&248)===240)s=3,a=65535;else{(i&192)===128?n+=e(Rr.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Rr.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(Rr.OVERRUN,n-1,t,r);continue}let o=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let u=t[n];if((u&192)!=128){n+=e(Rr.MISSING_CONTINUE,n,t,r),o=null;break}o=o<<6|u&63,n++}if(o!==null){if(o>1114111){n+=e(Rr.OUT_OF_RANGE,n-1-s,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(Rr.UTF16_SURROGATE,n-1-s,t,r,o);continue}if(o<=a){n+=e(Rr.OVERLONG,n-1-s,t,r,o);continue}r.push(o)}}return r}function hn(t,e=xi.current){e!=xi.current&&(Lp.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return fe(r)}function ym(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function gm(t,e){return ym(xm(t,e))}function oi(t){return Qt(hn(t))}const bm="hash/5.8.0",mm=`Ethereum Signed Message:
`;function _o(t){return typeof t=="string"&&(t=hn(t)),Qt(_r([hn(mm),hn(String(t.length)),t]))}const wm="rlp/5.8.0",vm=new ce(wm);function dl(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Fp(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(Fp(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=dl(n.length);return i.unshift(247+i.length),i.concat(n)}mu(t)||vm.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(fe(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=dl(e.length);return r.unshift(183+r.length),r.concat(e)}function zs(t){return ve(Fp(t))}const _m="address/5.8.0",qi=new ce(_m);function hl(t){Gt(t,20)||qi.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=fe(Qt(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Em=9007199254740991;function Sm(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Su={};for(let t=0;t<10;t++)Su[String(t)]=String(t);for(let t=0;t<26;t++)Su[String.fromCharCode(65+t)]=String(10+t);const pl=Math.floor(Sm(Em));function Am(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Su[n]).join("");for(;e.length>=pl;){let n=e.substring(0,pl);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Yt(t){let e=null;if(typeof t!="string"&&qi.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=hl(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&qi.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Am(t)&&qi.throwArgumentError("bad icap checksum","address",t),e=A1(t.substring(4));e.length<40;)e="0"+e;e=hl("0x"+e)}else qi.throwArgumentError("invalid address","address",t);return e}function Tm(t){let e=null;try{e=Yt(t.from)}catch{qi.throwArgumentError("missing from address","transaction",t)}const r=vn(fe(Ie.from(t.nonce).toHexString()));return Yt(pi(Qt(zs([e,r])),12))}const Rm="properties/5.8.0";var Pm=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Qa=new ce(Rm);function ae(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Ms(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function mn(t){return Pm(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function km(t,e){(!t||typeof t!="object")&&Qa.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Qa.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function qn(t){const e={};for(const r in t)e[r]=t[r];return e}const Bm={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Hp(t){if(t==null||Bm[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Hp(n))return!1}return!0}return Qa.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Mm(t){if(Hp(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>zi(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&ae(e,r,zi(n))}return e}return Qa.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function zi(t){return Mm(t)}class Xi{constructor(e){for(const r in e)this[r]=zi(e[r])}}var Cm=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const qt=new ce(bm),Kp=new Uint8Array(32);Kp.fill(0);const Im=Ie.from(-1),zp=Ie.from(0),$p=Ie.from(1),Um=Ie.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Om(t){const e=fe(t),r=e.length%32;return r?fi([e,Kp.slice(r)]):ve(e)}const qm=Er($p.toHexString(),32),Nm=Er(zp.toHexString(),32),xl={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ac=["name","version","chainId","verifyingContract","salt"];function yl(t){return function(e){return typeof e!="string"&&qt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Lm={name:yl("name"),version:yl("version"),chainId:function(t){try{return Ie.from(t).toString()}catch{}return qt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Yt(t).toLowerCase()}catch{}return qt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=fe(t);if(e.length!==32)throw new Error("bad length");return ve(e)}catch{}return qt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Tc(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&qt.throwArgumentError("invalid numeric width","type",t);const i=Um.mask(r?n-1:n),s=r?i.add($p).mul(Im):zp;return function(a){const o=Ie.from(a);return(o.lt(s)||o.gt(i))&&qt.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),Er(o.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&qt.throwArgumentError("invalid bytes width","type",t),function(n){return fe(n).length!==r&&qt.throwArgumentError(`invalid length for ${t}`,"value",n),Om(n)}}}switch(t){case"address":return function(e){return Er(Yt(e),32)};case"bool":return function(e){return e?qm:Nm};case"bytes":return function(e){return Qt(e)};case"string":return function(e){return oi(e)}}return null}function gl(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class mr{constructor(e){ae(this,"types",Object.freeze(zi(e))),ae(this,"_encoderCache",{}),ae(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(o=>{r[o]={},n[o]=[],i[o]={}});for(const o in e){const c={};e[o].forEach(u=>{c[u.name]&&qt.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(o)}`,"types",e),c[u.name]=!0;const f=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];f===o&&qt.throwArgumentError(`circular type reference to ${JSON.stringify(f)}`,"types",e),!Tc(f)&&(n[f]||qt.throwArgumentError(`unknown type ${JSON.stringify(f)}`,"types",e),n[f].push(o),r[o][f]=!0)})}const s=Object.keys(n).filter(o=>n[o].length===0);s.length===0?qt.throwArgumentError("missing primary type","types",e):s.length>1&&qt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),ae(this,"primaryType",s[0]);function a(o,c){c[o]&&qt.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),c[o]=!0,Object.keys(r[o]).forEach(u=>{n[u]&&(a(u,c),Object.keys(c).forEach(f=>{i[f][u]=!0}))}),delete c[o]}a(this.primaryType,{});for(const o in i){const c=Object.keys(i[o]);c.sort(),this._types[o]=gl(o,e[o])+c.map(u=>gl(u,e[u])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=Tc(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),a=parseInt(r[3]);return o=>{a>=0&&o.length!==a&&qt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let c=o.map(s);return this._types[i]&&(c=c.map(Qt)),Qt(fi(c))}}const n=this.types[e];if(n){const i=oi(this._types[e]);return s=>{const a=n.map(({name:o,type:c})=>{const u=this.getEncoder(c)(s[o]);return this._types[c]?Qt(u):u});return a.unshift(i),fi(a)}}return qt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||qt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return Qt(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Tc(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],o=parseInt(i[3]);return o>=0&&r.length!==o&&qt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(a,c,n))}const s=this.types[e];return s?s.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,r[o],n),a),{}):qt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new mr(e)}static getPrimaryType(e){return mr.from(e).primaryType}static hashStruct(e,r,n){return mr.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=xl[n];i||qt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Ac.indexOf(n.name)-Ac.indexOf(i.name)),mr.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return fi(["0x1901",mr.hashDomain(e),mr.from(r).hash(n)])}static hash(e,r,n){return Qt(mr.encode(e,r,n))}static resolveNames(e,r,n,i){return Cm(this,void 0,void 0,function*(){e=qn(e);const s={};e.verifyingContract&&!Gt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=mr.from(r);a.visit(n,(o,c)=>(o==="address"&&!Gt(c,20)&&(s[c]="0x"),c));for(const o in s)s[o]=yield i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){mr.hashDomain(e);const i={},s=[];Ac.forEach(c=>{const u=e[c];u!=null&&(i[c]=Lm[c](u),s.push({name:c,type:xl[c]}))});const a=mr.from(r),o=qn(r);return o.EIP712Domain?qt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return ve(fe(u));if(c.match(/^u?int/))return Ie.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&qt.throwArgumentError("invalid string","value",u),u}return qt.throwArgumentError("unsupported type","type",c)})}}}var Dm=ng();const Tr=Mr(Dm);function Yi(t,e,r){return r={path:e,exports:{},require:function(n,i){return Fm(n,i??r.path)}},t(r,r.exports),r.exports}function Fm(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Au=jp;function jp(t,e){if(!t)throw new Error(e||"Assertion failed")}jp.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Zr=Yi(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var u=0;u<a.length;u++)c[u]=a[u]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var u=0;u<a.length;u+=2)c.push(parseInt(a[u]+a[u+1],16))}else for(var u=0;u<a.length;u++){var f=a.charCodeAt(u),d=f>>8,h=f&255;d?c.push(d,h):c.push(h)}return c}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function s(a){for(var o="",c=0;c<a.length;c++)o+=i(a[c].toString(16));return o}r.toHex=s,r.encode=function(o,c){return c==="hex"?s(o):o}}),Cr=Yi(function(t,e){var r=e;r.assert=Au,r.toArray=Zr.toArray,r.zero2=Zr.zero2,r.toHex=Zr.toHex,r.encode=Zr.encode;function n(c,u,f){var d=new Array(Math.max(c.bitLength(),f)+1),h;for(h=0;h<d.length;h+=1)d[h]=0;var g=1<<u+1,b=c.clone();for(h=0;h<d.length;h++){var S,_=b.andln(g-1);b.isOdd()?(_>(g>>1)-1?S=(g>>1)-_:S=_,b.isubn(S)):S=0,d[h]=S,b.iushrn(1)}return d}r.getNAF=n;function i(c,u){var f=[[],[]];c=c.clone(),u=u.clone();for(var d=0,h=0,g;c.cmpn(-d)>0||u.cmpn(-h)>0;){var b=c.andln(3)+d&3,S=u.andln(3)+h&3;b===3&&(b=-1),S===3&&(S=-1);var _;(b&1)===0?_=0:(g=c.andln(7)+d&7,(g===3||g===5)&&S===2?_=-b:_=b),f[0].push(_);var C;(S&1)===0?C=0:(g=u.andln(7)+h&7,(g===3||g===5)&&b===2?C=-S:C=S),f[1].push(C),2*d===_+1&&(d=1-d),2*h===C+1&&(h=1-h),c.iushrn(1),u.iushrn(1)}return f}r.getJSF=i;function s(c,u,f){var d="_"+u;c.prototype[u]=function(){return this[d]!==void 0?this[d]:this[d]=f.call(this)}}r.cachedProperty=s;function a(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=a;function o(c){return new Be(c,"hex","le")}r.intFromLE=o}),eo=Cr.getNAF,Hm=Cr.getJSF,to=Cr.assert;function Fn(t,e){this.type=t,this.p=new Be(e.p,16),this.red=e.prime?Be.red(e.prime):Be.mont(this.p),this.zero=new Be(0).toRed(this.red),this.one=new Be(1).toRed(this.red),this.two=new Be(2).toRed(this.red),this.n=e.n&&new Be(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ei=Fn;Fn.prototype.point=function(){throw new Error("Not implemented")};Fn.prototype.validate=function(){throw new Error("Not implemented")};Fn.prototype._fixedNafMul=function(e,r){to(e.precomputed);var n=e._getDoubles(),i=eo(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,c;for(o=0;o<i.length;o+=n.step){c=0;for(var u=o+n.step-1;u>=o;u--)c=(c<<1)+i[u];a.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),h=s;h>0;h--){for(o=0;o<a.length;o++)c=a[o],c===h?d=d.mixedAdd(n.points[o]):c===-h&&(d=d.mixedAdd(n.points[o].neg()));f=f.add(d)}return f.toP()};Fn.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=eo(r,n,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var u=0;c>=0&&a[c]===0;c--)u++;if(c>=0&&u++,o=o.dblp(u),c<0)break;var f=a[c];to(f!==0),e.type==="affine"?f>0?o=o.mixedAdd(s[f-1>>1]):o=o.mixedAdd(s[-f-1>>1].neg()):f>0?o=o.add(s[f-1>>1]):o=o.add(s[-f-1>>1].neg())}return e.type==="affine"?o.toP():o};Fn.prototype._wnafMulAdd=function(e,r,n,i,s){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,u=0,f,d,h;for(f=0;f<i;f++){h=r[f];var g=h._getNAFPoints(e);a[f]=g.wnd,o[f]=g.points}for(f=i-1;f>=1;f-=2){var b=f-1,S=f;if(a[b]!==1||a[S]!==1){c[b]=eo(n[b],a[b],this._bitLength),c[S]=eo(n[S],a[S],this._bitLength),u=Math.max(c[b].length,u),u=Math.max(c[S].length,u);continue}var _=[r[b],null,null,r[S]];r[b].y.cmp(r[S].y)===0?(_[1]=r[b].add(r[S]),_[2]=r[b].toJ().mixedAdd(r[S].neg())):r[b].y.cmp(r[S].y.redNeg())===0?(_[1]=r[b].toJ().mixedAdd(r[S]),_[2]=r[b].add(r[S].neg())):(_[1]=r[b].toJ().mixedAdd(r[S]),_[2]=r[b].toJ().mixedAdd(r[S].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],F=Hm(n[b],n[S]);for(u=Math.max(F[0].length,u),c[b]=new Array(u),c[S]=new Array(u),d=0;d<u;d++){var q=F[0][d]|0,U=F[1][d]|0;c[b][d]=C[(q+1)*3+(U+1)],c[S][d]=0,o[b]=_}}var O=this.jpoint(null,null,null),$=this._wnafT4;for(f=u;f>=0;f--){for(var J=0;f>=0;){var Y=!0;for(d=0;d<i;d++)$[d]=c[d][f]|0,$[d]!==0&&(Y=!1);if(!Y)break;J++,f--}if(f>=0&&J++,O=O.dblp(J),f<0)break;for(d=0;d<i;d++){var ee=$[d];ee!==0&&(ee>0?h=o[d][ee-1>>1]:ee<0&&(h=o[d][-ee-1>>1].neg()),h.type==="affine"?O=O.mixedAdd(h):O=O.add(h))}}for(f=0;f<i;f++)o[f]=null;return s?O:O.toP()};function Kr(t,e){this.curve=t,this.type=e,this.precomputed=null}Fn.BasePoint=Kr;Kr.prototype.eq=function(){throw new Error("Not implemented")};Kr.prototype.validate=function(){return this.curve.validate(this)};Fn.prototype.decodePoint=function(e,r){e=Cr.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?to(e[e.length-1]%2===0):e[0]===7&&to(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Kr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Kr.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Kr.prototype.encode=function(e,r){return Cr.encode(this._encode(r),e)};Kr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Kr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Kr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Kr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Kr.prototype._getBeta=function(){return null};Kr.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Tu=Yi(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),Km=Cr.assert;function zr(t){Ei.call(this,"short",t),this.a=new Be(t.a,16).toRed(this.red),this.b=new Be(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Tu(zr,Ei);var zm=zr;zr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Be(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Be(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Km(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Be(o.a,16),b:new Be(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};zr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Be.mont(e),n=new Be(2).toRed(r).redInvm(),i=n.redNeg(),s=new Be(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};zr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Be(1),a=new Be(0),o=new Be(0),c=new Be(1),u,f,d,h,g,b,S,_=0,C,F;n.cmpn(0)!==0;){var q=i.div(n);C=i.sub(q.mul(n)),F=o.sub(q.mul(s));var U=c.sub(q.mul(a));if(!d&&C.cmp(r)<0)u=S.neg(),f=s,d=C.neg(),h=F;else if(d&&++_===2)break;S=C,i=n,n=C,o=s,s=F,c=a,a=U}g=C.neg(),b=F;var O=d.sqr().add(h.sqr()),$=g.sqr().add(b.sqr());return $.cmp(O)>=0&&(g=u,b=f),d.negative&&(d=d.neg(),h=h.neg()),g.negative&&(g=g.neg(),b=b.neg()),[{a:d,b:h},{a:g,b}]};zr.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),c=a.mul(i.a),u=s.mul(n.b),f=a.mul(i.b),d=e.sub(o).sub(c),h=u.add(f).neg();return{k1:d,k2:h}};zr.prototype.pointFromX=function(e,r){e=new Be(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};zr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};zr.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),c=e[a],u=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),i[a*2]=c,i[a*2+1]=u,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var f=this._wnafMulAdd(1,i,s,a*2,n),d=0;d<a*2;d++)i[d]=null,s[d]=null;return f};function er(t,e,r,n){Ei.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Be(e,16),this.y=new Be(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Tu(er,Ei.BasePoint);zr.prototype.point=function(e,r,n){return new er(this,e,r,n)};zr.prototype.pointFromJSON=function(e,r){return er.fromJSON(this,e,r)};er.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};er.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};er.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};er.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};er.prototype.isInfinity=function(){return this.inf};er.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};er.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};er.prototype.getX=function(){return this.x.fromRed()};er.prototype.getY=function(){return this.y.fromRed()};er.prototype.mul=function(e){return e=new Be(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};er.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};er.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};er.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};er.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};er.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ir(t,e,r,n){Ei.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Be(0)):(this.x=new Be(e,16),this.y=new Be(r,16),this.z=new Be(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Tu(ir,Ei.BasePoint);zr.prototype.jpoint=function(e,r,n){return new ir(this,e,r,n)};ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ir.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),u=a.redSub(o);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),h=i.redMul(f),g=u.redSqr().redIAdd(d).redISub(h).redISub(h),b=u.redMul(h.redISub(g)).redISub(a.redMul(d)),S=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(g,b,S)};ir.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(i),c=s.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),f=u.redMul(o),d=n.redMul(u),h=c.redSqr().redIAdd(f).redISub(d).redISub(d),g=c.redMul(d.redISub(h)).redISub(s.redMul(f)),b=this.z.redMul(o);return this.curve.jpoint(h,g,b)};ir.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,c=this.z,u=c.redSqr().redSqr(),f=o.redAdd(o);for(r=0;r<e;r++){var d=a.redSqr(),h=f.redSqr(),g=h.redSqr(),b=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(u)),S=a.redMul(h),_=b.redSqr().redISub(S.redAdd(S)),C=S.redISub(_),F=b.redMul(C);F=F.redIAdd(F).redISub(g);var q=f.redMul(c);r+1<e&&(u=u.redMul(g)),a=_,c=q,f=F}return this.curve.jpoint(a,f.redMul(s),c)};ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ir.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(o).redISub(o),f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),e=u,r=c.redMul(o.redISub(u)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),g=h.redSqr(),b=this.x.redAdd(h).redSqr().redISub(d).redISub(g);b=b.redIAdd(b);var S=d.redAdd(d).redIAdd(d),_=S.redSqr(),C=g.redIAdd(g);C=C.redIAdd(C),C=C.redIAdd(C),e=_.redISub(b).redISub(b),r=S.redMul(b.redISub(e)).redISub(C),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};ir.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(o).redISub(o);e=u;var f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(o.redISub(u)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),g=this.x.redMul(h),b=this.x.redSub(d).redMul(this.x.redAdd(d));b=b.redAdd(b).redIAdd(b);var S=g.redIAdd(g);S=S.redIAdd(S);var _=S.redAdd(S);e=b.redSqr().redISub(_),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var C=h.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=b.redMul(S.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,n)};ir.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),u=r.redAdd(r);u=u.redIAdd(u);var f=u.redMul(o),d=c.redSqr().redISub(f.redAdd(f)),h=f.redISub(d),g=o.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var b=c.redMul(h).redISub(g),S=n.redAdd(n).redMul(i);return this.curve.jpoint(d,b,S)};ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var f=s.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(u),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.x.redMul(c).redISub(d);h=h.redIAdd(h),h=h.redIAdd(h);var g=this.y.redMul(f.redMul(u.redISub(f)).redISub(o.redMul(c)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var b=this.z.redAdd(o).redSqr().redISub(n).redISub(c);return this.curve.jpoint(h,g,b)};ir.prototype.mul=function(e,r){return e=new Be(e,r),this.curve._wnafMul(this,e)};ir.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};ir.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ha=Yi(function(t,e){var r=e;r.base=Ei,r.short=zm,r.mont=null,r.edwards=null}),Ka=Yi(function(t,e){var r=e,n=Cr.assert;function i(o){o.type==="short"?this.curve=new Ha.short(o):o.type==="edwards"?this.curve=new Ha.edwards(o):this.curve=new Ha.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(o,c){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:u}),u}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Tr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Tr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Tr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Tr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Tr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Tr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Tr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Tr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Nn(t){if(!(this instanceof Nn))return new Nn(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Zr.toArray(t.entropy,t.entropyEnc||"hex"),r=Zr.toArray(t.nonce,t.nonceEnc||"hex"),n=Zr.toArray(t.pers,t.persEnc||"hex");Au(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Gp=Nn;Nn.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Nn.prototype._hmac=function(){return new Tr.hmac(this.hash,this.K)};Nn.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Nn.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Zr.toArray(e,r),n=Zr.toArray(n,i),Au(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Nn.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Zr.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Zr.encode(a,r)};var Zf=Cr.assert;function hr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Ru=hr;hr.fromPublic=function(e,r,n){return r instanceof hr?r:new hr(e,{pub:r,pubEnc:n})};hr.fromPrivate=function(e,r,n){return r instanceof hr?r:new hr(e,{priv:r,privEnc:n})};hr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};hr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};hr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};hr.prototype._importPrivate=function(e,r){this.priv=new Be(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};hr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Zf(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Zf(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};hr.prototype.derive=function(e){return e.validate()||Zf(e.validate(),"public point not validated"),e.mul(this.priv).getX()};hr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};hr.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};hr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var $m=Cr.assert;function Eo(t,e){if(t instanceof Eo)return t;this._importDER(t,e)||($m(t.r&&t.s,"Signature without r or s"),this.r=new Be(t.r,16),this.s=new Be(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var So=Eo;function jm(){this.place=0}function Rc(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function bl(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Eo.prototype._importDER=function(e,r){e=Cr.toArray(e,r);var n=new jm;if(e[n.place++]!==48)return!1;var i=Rc(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Rc(e,n);if(s===!1||(e[n.place]&128)!==0)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=Rc(e,n);if(o===!1||e.length!==o+n.place||(e[n.place]&128)!==0)return!1;var c=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Be(a),this.s=new Be(c),this.recoveryParam=null,!0};function Pc(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Eo.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=bl(r),n=bl(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Pc(i,r.length),i=i.concat(r),i.push(2),Pc(i,n.length);var s=i.concat(n),a=[48];return Pc(a,s.length),a=a.concat(s),Cr.encode(a,e)};var Gm=(function(){throw new Error("unsupported")}),si=Cr.assert;function Fr(t){if(!(this instanceof Fr))return new Fr(t);typeof t=="string"&&(si(Object.prototype.hasOwnProperty.call(Ka,t),"Unknown curve "+t),t=Ka[t]),t instanceof Ka.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Wm=Fr;Fr.prototype.keyPair=function(e){return new Ru(this,e)};Fr.prototype.keyFromPrivate=function(e,r){return Ru.fromPrivate(this,e,r)};Fr.prototype.keyFromPublic=function(e,r){return Ru.fromPublic(this,e,r)};Fr.prototype.genKeyPair=function(e){e||(e={});for(var r=new Gp({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Gm(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Be(2));;){var s=new Be(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Fr.prototype._truncateToN=function(e,r,n){var i;if(Be.isBN(e)||typeof e=="number")e=new Be(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Be(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Be(s,16)}typeof n!="number"&&(n=i*8);var a=n-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Fr.prototype.sign=function(e,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Be.isBN(e)){si(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),si(e.length>>>0===e.length);for(var s=0;s<e.length;s++)si((e[s]&255)===e[s])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength),si(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),o=r.getPrivate().toArray("be",a),c=e.toArray("be",a);si(new Be(c).eq(e),"Can not sign message");for(var u=new Gp({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new Be(1)),d=0;;d++){var h=i.k?i.k(d):new Be(u.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(f)>=0)){var g=this.g.mul(h);if(!g.isInfinity()){var b=g.getX(),S=b.umod(this.n);if(S.cmpn(0)!==0){var _=h.invm(this.n).mul(S.mul(r.getPrivate()).iadd(e));if(_=_.umod(this.n),_.cmpn(0)!==0){var C=(g.getY().isOdd()?1:0)|(b.cmp(S)!==0?2:0);return i.canonical&&_.cmp(this.nh)>0&&(_=this.n.sub(_),C^=1),new So({r:S,s:_,recoveryParam:C})}}}}}};Fr.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new So(r,"hex");var a=r.r,o=r.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),u=c.mul(e).umod(this.n),f=c.mul(a).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(u,n.getPublic(),f),d.isInfinity()?!1:d.eqXToP(a)):(d=this.g.mulAdd(u,n.getPublic(),f),d.isInfinity()?!1:d.getX().umod(this.n).cmp(a)===0)};Fr.prototype.recoverPubKey=function(t,e,r,n){si((3&r)===r,"The recovery param is more than two bits"),e=new So(e,n);var i=this.n,s=new Be(t),a=e.r,o=e.s,c=r&1,u=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var f=e.r.invm(i),d=i.sub(s).mul(f).umod(i),h=o.mul(f).umod(i);return this.g.mulAdd(d,a,h)};Fr.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new So(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Vm=Yi(function(t,e){var r=e;r.version="6.6.1",r.utils=Cr,r.rand=(function(){throw new Error("unsupported")}),r.curve=Ha,r.curves=Ka,r.ec=Wm,r.eddsa=null}),Jm=Vm.ec;const Xm="signing-key/5.8.0",Qf=new ce(Xm);let kc=null;function Mn(){return kc||(kc=new Jm("secp256k1")),kc}class Di{constructor(e){ae(this,"curve","secp256k1"),ae(this,"privateKey",ve(e)),bp(this.privateKey)!==32&&Qf.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Mn().keyFromPrivate(fe(this.privateKey));ae(this,"publicKey","0x"+r.getPublic(!1,"hex")),ae(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ae(this,"_isSigningKey",!0)}_addPoint(e){const r=Mn().keyFromPublic(fe(this.publicKey)),n=Mn().keyFromPublic(fe(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Mn().keyFromPrivate(fe(this.privateKey)),n=fe(e);n.length!==32&&Qf.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Vi({recoveryParam:i.recoveryParam,r:Er("0x"+i.r.toString(16),32),s:Er("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Mn().keyFromPrivate(fe(this.privateKey)),n=Mn().keyFromPublic(fe(Vp(e)));return Er("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Wp(t,e){const r=Vi(e),n={r:fe(r.r),s:fe(r.s)};return"0x"+Mn().recoverPubKey(fe(t),n,r.recoveryParam).encode("hex",!1)}function Vp(t,e){const r=fe(t);return r.length===32?new Di(r).publicKey:r.length===33?"0x"+Mn().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?ve(r):Qf.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Ym="transactions/5.8.0",Xr=new ce(Ym);var ml;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(ml||(ml={}));const Zm=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Qm={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function On(t){const e=Vp(t);return Yt(pi(Qt(pi(e,1)),12))}function Jp(t,e){return On(Wp(fe(t),e))}function Pr(t,e){const r=vn(Ie.from(t).toHexString());return r.length>32&&Xr.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Bc(t,e){return{address:Yt(t),storageKeys:(e||[]).map((r,n)=>(bp(r)!==32&&Xr.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Xp(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Xr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Bc(r[0],r[1])):Bc(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return Bc(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Yp(t){return Xp(t).map(e=>[e.address,e.storageKeys])}function e2(t,e){if(t.gasPrice!=null){const n=Ie.from(t.gasPrice),i=Ie.from(t.maxFeePerGas||0);n.eq(i)||Xr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[Pr(t.chainId||0,"chainId"),Pr(t.nonce||0,"nonce"),Pr(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pr(t.maxFeePerGas||0,"maxFeePerGas"),Pr(t.gasLimit||0,"gasLimit"),t.to!=null?Yt(t.to):"0x",Pr(t.value||0,"value"),t.data||"0x",Yp(t.accessList||[])];if(e){const n=Vi(e);r.push(Pr(n.recoveryParam,"recoveryParam")),r.push(vn(n.r)),r.push(vn(n.s))}return fi(["0x02",zs(r)])}function t2(t,e){const r=[Pr(t.chainId||0,"chainId"),Pr(t.nonce||0,"nonce"),Pr(t.gasPrice||0,"gasPrice"),Pr(t.gasLimit||0,"gasLimit"),t.to!=null?Yt(t.to):"0x",Pr(t.value||0,"value"),t.data||"0x",Yp(t.accessList||[])];if(e){const n=Vi(e);r.push(Pr(n.recoveryParam,"recoveryParam")),r.push(vn(n.r)),r.push(vn(n.s))}return fi(["0x01",zs(r)])}function r2(t,e){km(t,Qm);const r=[];Zm.forEach(function(a){let o=t[a.name]||[];const c={};a.numeric&&(c.hexPad="left"),o=fe(ve(o,c)),a.length&&o.length!==a.length&&o.length>0&&Xr.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o),a.maxLength&&(o=vn(o),o.length>a.maxLength&&Xr.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o)),r.push(ve(o))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&Xr.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!mu(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(ve(n)),r.push("0x"),r.push("0x")),!e)return zs(r);const i=Vi(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&Xr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&Xr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(ve(s)),r.push(vn(fe(i.r))),r.push(vn(fe(i.s))),zs(r)}function wl(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&Xr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),r2(t,e);switch(t.type){case 1:return t2(t,e);case 2:return e2(t,e)}return Xr.throwError(`unsupported transaction type: ${t.type}`,ce.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const n2="abstract-provider/5.8.0";var i2=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const s2=new ce(n2);let Zp=class Qp{constructor(){s2.checkAbstract(new.target,Qp),ae(this,"_isProvider",!0)}getFeeData(){return i2(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield mn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=Ie.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}};const a2="abstract-signer/5.8.0";var $r=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Or=new ce(a2),o2=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],c2=[ce.errors.INSUFFICIENT_FUNDS,ce.errors.NONCE_EXPIRED,ce.errors.REPLACEMENT_UNDERPRICED];class fa{constructor(){Or.checkAbstract(new.target,fa),ae(this,"_isSigner",!0)}getBalance(e){return $r(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return $r(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return $r(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield mn(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return $r(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield mn(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return $r(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return $r(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return $r(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return $r(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return $r(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)o2.indexOf(n)===-1&&Or.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=qn(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Or.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return $r(this,void 0,void 0,function*(){const r=yield mn(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>$r(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Or.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Or.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Or.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Or.throwError("network does not support EIP-1559",ce.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Or.throwError("failed to get consistent fee data",ce.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(c2.indexOf(i.code)>=0)throw i;return Or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ce.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Or.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield mn(r)})}_checkProvider(e){this.provider||Or.throwError("missing provider",ce.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Pu extends fa{constructor(e,r){super(),ae(this,"address",e),ae(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Or.throwError(e,ce.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Pu(this.address,e)}}class ex{constructor(e){ae(this,"alphabet",e),ae(this,"base",e.length),ae(this,"_alphabetMap",{}),ae(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=fe(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let a=r[s];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let a=0;a<r.length;++a)s+=r[a]*this.base,r[a]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return fe(new Uint8Array(r.reverse()))}}new ex("abcdefghijklmnopqrstuvwxyz234567");const tx=new ex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var $s;(function(t){t.sha256="sha256",t.sha512="sha512"})($s||($s={}));const f2="sha2/5.8.0",u2=new ce(f2);function l2(t){return"0x"+Tr.ripemd160().update(fe(t)).digest("hex")}function js(t){return"0x"+Tr.sha256().update(fe(t)).digest("hex")}function ro(t,e,r){return $s[t]||u2.throwError("unsupported algorithm "+t,ce.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+Tr.hmac(Tr[t],fe(e)).update(fe(r)).digest("hex")}function ku(t,e,r,n,i){t=fe(t),e=fe(e);let s,a=1;const o=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let u,f;for(let d=1;d<=a;d++){c[e.length]=d>>24&255,c[e.length+1]=d>>16&255,c[e.length+2]=d>>8&255,c[e.length+3]=d&255;let h=fe(ro(i,t,c));s||(s=h.length,f=new Uint8Array(s),a=Math.ceil(n/s),u=n-(a-1)*s),f.set(h);for(let S=1;S<r;S++){h=fe(ro(i,t,h));for(let _=0;_<s;_++)f[_]^=h[_]}const g=(d-1)*s,b=d===a?u:s;o.set(fe(f).slice(0,b),g)}return ve(o)}const d2="wordlists/5.8.0",h2=new ce(d2);class ua{constructor(e){h2.checkAbstract(new.target,ua),ae(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return oi(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const p2="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let Ds=null;function vl(t){if(Ds==null&&(Ds=p2.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),ua.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Ds=null,new Error("BIP39 Wordlist for en (English) FAILED")}class x2 extends ua{constructor(){super("en")}getWord(e){return vl(this),Ds[e]}getWordIndex(e){return vl(this),Ds.indexOf(e)}}const rx=new x2;ua.register(rx);const _l={en:rx},y2="hdnode/5.8.0",no=new ce(y2),g2=Ie.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),b2=hn("Bitcoin seed"),fs=2147483648;function nx(t){return(1<<t)-1<<8-t}function m2(t){return(1<<t)-1}function Ta(t){return Er(ve(t),32)}function El(t){return tx.encode(_r([t,pi(js(js(t)),0,4)]))}function Bu(t){if(t==null)return _l.en;if(typeof t=="string"){const e=_l[t];return e==null&&no.throwArgumentError("unknown locale","wordlist",t),e}return t}const Bi={},Gs="m/44'/60'/0'/0/0";class Lr{constructor(e,r,n,i,s,a,o,c){if(e!==Bi)throw new Error("HDNode constructor cannot be called directly");if(r){const u=new Di(r);ae(this,"privateKey",u.privateKey),ae(this,"publicKey",u.compressedPublicKey)}else ae(this,"privateKey",null),ae(this,"publicKey",ve(n));ae(this,"parentFingerprint",i),ae(this,"fingerprint",pi(l2(js(this.publicKey)),0,4)),ae(this,"address",On(this.publicKey)),ae(this,"chainCode",s),ae(this,"index",a),ae(this,"depth",o),c==null?(ae(this,"mnemonic",null),ae(this,"path",null)):typeof c=="string"?(ae(this,"mnemonic",null),ae(this,"path",c)):(ae(this,"mnemonic",c),ae(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return El(_r([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",ve(this.depth),this.parentFingerprint,Er(ve(this.index),4),this.chainCode,this.privateKey!=null?_r(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Lr(Bi,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~fs));const n=new Uint8Array(37);if(e&fs){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(fe(this.privateKey),1),r&&(r+="'")}else n.set(fe(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const i=fe(ro($s.sha512,this.chainCode,n)),s=i.slice(0,32),a=i.slice(32);let o=null,c=null;this.privateKey?o=Ta(Ie.from(s).add(this.privateKey).mod(g2)):c=new Di(ve(s))._addPoint(this.publicKey);let u=r;const f=this.mnemonic;return f&&(u=Object.freeze({phrase:f.phrase,path:r,locale:f.locale||"en"})),new Lr(Bi,o,c,this.fingerprint,Ta(a),e,this.depth+1,u)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const a=parseInt(s.substring(0,s.length-1));if(a>=fs)throw new Error("invalid path index - "+s);n=n._derive(fs+a)}else if(s.match(/^[0-9]+$/)){const a=parseInt(s);if(a>=fs)throw new Error("invalid path index - "+s);n=n._derive(a)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=fe(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=fe(ro($s.sha512,b2,n));return new Lr(Bi,Ta(i.slice(0,32)),null,"0x00000000",Ta(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=Bu(n),e=Mu(ix(e,n),n),Lr._fromSeed(w2(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return Lr._fromSeed(e,null)}static fromExtendedKey(e){const r=tx.decode(e);(r.length!==82||El(r.slice(0,78))!==e)&&no.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=ve(r.slice(5,9)),s=parseInt(ve(r.slice(9,13)).substring(2),16),a=ve(r.slice(13,45)),o=r.slice(45,78);switch(ve(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Lr(Bi,null,ve(o),i,a,s,n,null);case"0x0488ade4":case"0x04358394 ":if(o[0]!==0)break;return new Lr(Bi,ve(o.slice(1)),null,i,a,s,n,null)}return no.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function w2(t,e){e||(e="");const r=hn("mnemonic"+e,xi.NFKD);return ku(hn(t,xi.NFKD),r,2048,64,"sha512")}function ix(t,e){e=Bu(e),no.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=fe(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let u=0;u<r.length;u++){let f=e.getWordIndex(r[u].normalize("NFKD"));if(f===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)f&1<<10-d&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,a=r.length/3,o=nx(a);if((fe(js(n.slice(0,s/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return ve(n.slice(0,s/8))}function Mu(t,e){if(e=Bu(e),t=fe(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let a=0;a<t.length;a++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[a],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[a]>>8-n,r.push(t[a]&m2(8-n)),n+=3);const i=t.length/4,s=fe(js(t))[0]&nx(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(a=>e.getWord(a)))}const v2="random/5.8.0",eu=new ce(v2);function _2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Sl=_2();let za=Sl.crypto||Sl.msCrypto;(!za||!za.getRandomValues)&&(eu.warn("WARNING: Missing strong random number source"),za={getRandomValues:function(t){return eu.throwError("no secure random source avaialble",ce.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Cs(t){(t<=0||t>1024||t%1||t!=t)&&eu.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return za.getRandomValues(e),fe(e)}var Mc={exports:{}},Al;function E2(){return Al||(Al=1,(function(t,e){(function(r){function n(E){return parseInt(E)===E}function i(E){if(!n(E.length))return!1;for(var H=0;H<E.length;H++)if(!n(E[H])||E[H]<0||E[H]>255)return!1;return!0}function s(E,H){if(E.buffer&&ArrayBuffer.isView(E)&&E.name==="Uint8Array")return H&&(E.slice?E=E.slice():E=Array.prototype.slice.call(E)),E;if(Array.isArray(E)){if(!i(E))throw new Error("Array contains invalid value: "+E);return new Uint8Array(E)}if(n(E.length)&&i(E))return new Uint8Array(E);throw new Error("unsupported array-like object")}function a(E){return new Uint8Array(E)}function o(E,H,z,L,D){(L!=null||D!=null)&&(E.slice?E=E.slice(L,D):E=Array.prototype.slice.call(E,L,D)),H.set(E,z)}var c=(function(){function E(z){var L=[],D=0;for(z=encodeURI(z);D<z.length;){var ne=z.charCodeAt(D++);ne===37?(L.push(parseInt(z.substr(D,2),16)),D+=2):L.push(ne)}return s(L)}function H(z){for(var L=[],D=0;D<z.length;){var ne=z[D];ne<128?(L.push(String.fromCharCode(ne)),D++):ne>191&&ne<224?(L.push(String.fromCharCode((ne&31)<<6|z[D+1]&63)),D+=2):(L.push(String.fromCharCode((ne&15)<<12|(z[D+1]&63)<<6|z[D+2]&63)),D+=3)}return L.join("")}return{toBytes:E,fromBytes:H}})(),u=(function(){function E(L){for(var D=[],ne=0;ne<L.length;ne+=2)D.push(parseInt(L.substr(ne,2),16));return D}var H="0123456789abcdef";function z(L){for(var D=[],ne=0;ne<L.length;ne++){var we=L[ne];D.push(H[(we&240)>>4]+H[we&15])}return D.join("")}return{toBytes:E,fromBytes:z}})(),f={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],g=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],b=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],S=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],_=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],C=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],F=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],q=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],U=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],O=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],$=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],J=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Y=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ee=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Z(E){for(var H=[],z=0;z<E.length;z+=4)H.push(E[z]<<24|E[z+1]<<16|E[z+2]<<8|E[z+3]);return H}var P=function(E){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(E,!0)}),this._prepare()};P.prototype._prepare=function(){var E=f[this.key.length];if(E==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var H=0;H<=E;H++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var z=(E+1)*4,L=this.key.length/4,D=Z(this.key),ne,H=0;H<L;H++)ne=H>>2,this._Ke[ne][H%4]=D[H],this._Kd[E-ne][H%4]=D[H];for(var we=0,Te=L,xe;Te<z;){if(xe=D[L-1],D[0]^=h[xe>>16&255]<<24^h[xe>>8&255]<<16^h[xe&255]<<8^h[xe>>24&255]^d[we]<<24,we+=1,L!=8)for(var H=1;H<L;H++)D[H]^=D[H-1];else{for(var H=1;H<L/2;H++)D[H]^=D[H-1];xe=D[L/2-1],D[L/2]^=h[xe&255]^h[xe>>8&255]<<8^h[xe>>16&255]<<16^h[xe>>24&255]<<24;for(var H=L/2+1;H<L;H++)D[H]^=D[H-1]}for(var H=0,Me,Ut;H<L&&Te<z;)Me=Te>>2,Ut=Te%4,this._Ke[Me][Ut]=D[H],this._Kd[E-Me][Ut]=D[H++],Te++}for(var Me=1;Me<E;Me++)for(var Ut=0;Ut<4;Ut++)xe=this._Kd[Me][Ut],this._Kd[Me][Ut]=$[xe>>24&255]^J[xe>>16&255]^Y[xe>>8&255]^ee[xe&255]},P.prototype.encrypt=function(E){if(E.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var H=this._Ke.length-1,z=[0,0,0,0],L=Z(E),D=0;D<4;D++)L[D]^=this._Ke[0][D];for(var ne=1;ne<H;ne++){for(var D=0;D<4;D++)z[D]=b[L[D]>>24&255]^S[L[(D+1)%4]>>16&255]^_[L[(D+2)%4]>>8&255]^C[L[(D+3)%4]&255]^this._Ke[ne][D];L=z.slice()}for(var we=a(16),Te,D=0;D<4;D++)Te=this._Ke[H][D],we[4*D]=(h[L[D]>>24&255]^Te>>24)&255,we[4*D+1]=(h[L[(D+1)%4]>>16&255]^Te>>16)&255,we[4*D+2]=(h[L[(D+2)%4]>>8&255]^Te>>8)&255,we[4*D+3]=(h[L[(D+3)%4]&255]^Te)&255;return we},P.prototype.decrypt=function(E){if(E.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var H=this._Kd.length-1,z=[0,0,0,0],L=Z(E),D=0;D<4;D++)L[D]^=this._Kd[0][D];for(var ne=1;ne<H;ne++){for(var D=0;D<4;D++)z[D]=F[L[D]>>24&255]^q[L[(D+3)%4]>>16&255]^U[L[(D+2)%4]>>8&255]^O[L[(D+1)%4]&255]^this._Kd[ne][D];L=z.slice()}for(var we=a(16),Te,D=0;D<4;D++)Te=this._Kd[H][D],we[4*D]=(g[L[D]>>24&255]^Te>>24)&255,we[4*D+1]=(g[L[(D+3)%4]>>16&255]^Te>>16)&255,we[4*D+2]=(g[L[(D+2)%4]>>8&255]^Te>>8)&255,we[4*D+3]=(g[L[(D+1)%4]&255]^Te)&255;return we};var l=function(E){if(!(this instanceof l))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new P(E)};l.prototype.encrypt=function(E){if(E=s(E),E.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var H=a(E.length),z=a(16),L=0;L<E.length;L+=16)o(E,z,0,L,L+16),z=this._aes.encrypt(z),o(z,H,L);return H},l.prototype.decrypt=function(E){if(E=s(E),E.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var H=a(E.length),z=a(16),L=0;L<E.length;L+=16)o(E,z,0,L,L+16),z=this._aes.decrypt(z),o(z,H,L);return H};var x=function(E,H){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!H)H=a(16);else if(H.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(H,!0),this._aes=new P(E)};x.prototype.encrypt=function(E){if(E=s(E),E.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var H=a(E.length),z=a(16),L=0;L<E.length;L+=16){o(E,z,0,L,L+16);for(var D=0;D<16;D++)z[D]^=this._lastCipherblock[D];this._lastCipherblock=this._aes.encrypt(z),o(this._lastCipherblock,H,L)}return H},x.prototype.decrypt=function(E){if(E=s(E),E.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var H=a(E.length),z=a(16),L=0;L<E.length;L+=16){o(E,z,0,L,L+16),z=this._aes.decrypt(z);for(var D=0;D<16;D++)H[L+D]=z[D]^this._lastCipherblock[D];o(E,this._lastCipherblock,0,L,L+16)}return H};var m=function(E,H,z){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!H)H=a(16);else if(H.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");z||(z=1),this.segmentSize=z,this._shiftRegister=s(H,!0),this._aes=new P(E)};m.prototype.encrypt=function(E){if(E.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var H=s(E,!0),z,L=0;L<H.length;L+=this.segmentSize){z=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)H[L+D]^=z[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(H,this._shiftRegister,16-this.segmentSize,L,L+this.segmentSize)}return H},m.prototype.decrypt=function(E){if(E.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var H=s(E,!0),z,L=0;L<H.length;L+=this.segmentSize){z=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)H[L+D]^=z[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(E,this._shiftRegister,16-this.segmentSize,L,L+this.segmentSize)}return H};var A=function(E,H){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!H)H=a(16);else if(H.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(H,!0),this._lastPrecipherIndex=16,this._aes=new P(E)};A.prototype.encrypt=function(E){for(var H=s(E,!0),z=0;z<H.length;z++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),H[z]^=this._lastPrecipher[this._lastPrecipherIndex++];return H},A.prototype.decrypt=A.prototype.encrypt;var v=function(E){if(!(this instanceof v))throw Error("Counter must be instanitated with `new`");E!==0&&!E&&(E=1),typeof E=="number"?(this._counter=a(16),this.setValue(E)):this.setBytes(E)};v.prototype.setValue=function(E){if(typeof E!="number"||parseInt(E)!=E)throw new Error("invalid counter value (must be an integer)");for(var H=15;H>=0;--H)this._counter[H]=E%256,E=E>>8},v.prototype.setBytes=function(E){if(E=s(E,!0),E.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=E},v.prototype.increment=function(){for(var E=15;E>=0;E--)if(this._counter[E]===255)this._counter[E]=0;else{this._counter[E]++;break}};var M=function(E,H){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",H instanceof v||(H=new v(H)),this._counter=H,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new P(E)};M.prototype.encrypt=function(E){for(var H=s(E,!0),z=0;z<H.length;z++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),H[z]^=this._remainingCounter[this._remainingCounterIndex++];return H},M.prototype.decrypt=M.prototype.encrypt;function I(E){E=s(E,!0);var H=16-E.length%16,z=a(E.length+H);o(E,z);for(var L=E.length;L<z.length;L++)z[L]=H;return z}function B(E){if(E=s(E,!0),E.length<16)throw new Error("PKCS#7 invalid length");var H=E[E.length-1];if(H>16)throw new Error("PKCS#7 padding byte out of range");for(var z=E.length-H,L=0;L<H;L++)if(E[z+L]!==H)throw new Error("PKCS#7 invalid padding byte");var D=a(z);return o(E,D,0,0,z),D}var y={AES:P,Counter:v,ModeOfOperation:{ecb:l,cbc:x,cfb:m,ofb:A,ctr:M},utils:{hex:u,utf8:c},padding:{pkcs7:{pad:I,strip:B}},_arrayTest:{coerceArray:s,createArray:a,copyArray:o}};t.exports=y})()})(Mc)),Mc.exports}var S2=E2();const dn=Mr(S2),sx="json-wallets/5.8.0";function ui(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),fe(t)}function us(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function Cu(t){return typeof t=="string"?hn(t,xi.NFKC):fe(t)}function zt(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const a in r)if(a.toLowerCase()===n[i]){s=r[a];break}if(s===null)return null;r=s}return r}function A2(t){const e=fe(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=ve(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const T2=new ce(sx);class R2 extends Xi{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function ax(t,e){const r=JSON.parse(t);e=Cu(e);const n=Yt(zt(r,"ethaddr")),i=ui(zt(r,"encseed"));(!i||i.length%16!==0)&&T2.throwArgumentError("invalid encseed","json",t);const s=fe(ku(e,e,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),o=i.slice(16),c=new dn.ModeOfOperation.cbc(s,a),u=dn.padding.pkcs7.strip(fe(c.decrypt(o)));let f="";for(let g=0;g<u.length;g++)f+=String.fromCharCode(u[g]);const d=hn(f),h=Qt(d);return new R2({_isCrowdsaleAccount:!0,address:n,privateKey:h})}function ox(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function cx(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var Cc={exports:{}},Tl;function P2(){return Tl||(Tl=1,(function(t,e){(function(r){function i(S){const _=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let C=1779033703,F=3144134277,q=1013904242,U=2773480762,O=1359893119,$=2600822924,J=528734635,Y=1541459225;const ee=new Uint32Array(64);function Z(M){let I=0,B=M.length;for(;B>=64;){let y=C,E=F,H=q,z=U,L=O,D=$,ne=J,we=Y,Te,xe,Me,Ut,Xe;for(xe=0;xe<16;xe++)Me=I+xe*4,ee[xe]=(M[Me]&255)<<24|(M[Me+1]&255)<<16|(M[Me+2]&255)<<8|M[Me+3]&255;for(xe=16;xe<64;xe++)Te=ee[xe-2],Ut=(Te>>>17|Te<<15)^(Te>>>19|Te<<13)^Te>>>10,Te=ee[xe-15],Xe=(Te>>>7|Te<<25)^(Te>>>18|Te<<14)^Te>>>3,ee[xe]=(Ut+ee[xe-7]|0)+(Xe+ee[xe-16]|0)|0;for(xe=0;xe<64;xe++)Ut=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&D^~L&ne)|0)+(we+(_[xe]+ee[xe]|0)|0)|0,Xe=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&E^y&H^E&H)|0,we=ne,ne=D,D=L,L=z+Ut|0,z=H,H=E,E=y,y=Ut+Xe|0;C=C+y|0,F=F+E|0,q=q+H|0,U=U+z|0,O=O+L|0,$=$+D|0,J=J+ne|0,Y=Y+we|0,I+=64,B-=64}}Z(S);let P,l=S.length%64,x=S.length/536870912|0,m=S.length<<3,A=l<56?56:120,v=S.slice(S.length-l,S.length);for(v.push(128),P=l+1;P<A;P++)v.push(0);return v.push(x>>>24&255),v.push(x>>>16&255),v.push(x>>>8&255),v.push(x>>>0&255),v.push(m>>>24&255),v.push(m>>>16&255),v.push(m>>>8&255),v.push(m>>>0&255),Z(v),[C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,$>>>24&255,$>>>16&255,$>>>8&255,$>>>0&255,J>>>24&255,J>>>16&255,J>>>8&255,J>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255]}function s(S,_,C){S=S.length<=64?S:i(S);const F=64+_.length+4,q=new Array(F),U=new Array(64);let O,$=[];for(O=0;O<64;O++)q[O]=54;for(O=0;O<S.length;O++)q[O]^=S[O];for(O=0;O<_.length;O++)q[64+O]=_[O];for(O=F-4;O<F;O++)q[O]=0;for(O=0;O<64;O++)U[O]=92;for(O=0;O<S.length;O++)U[O]^=S[O];function J(){for(let Y=F-1;Y>=F-4;Y--){if(q[Y]++,q[Y]<=255)return;q[Y]=0}}for(;C>=32;)J(),$=$.concat(i(U.concat(i(q)))),C-=32;return C>0&&(J(),$=$.concat(i(U.concat(i(q))).slice(0,C))),$}function a(S,_,C,F,q){let U;for(f(S,(2*C-1)*16,q,0,16),U=0;U<2*C;U++)u(S,U*16,q,16),c(q,F),f(q,0,S,_+U*16,16);for(U=0;U<C;U++)f(S,_+U*2*16,S,U*16,16);for(U=0;U<C;U++)f(S,_+(U*2+1)*16,S,(U+C)*16,16)}function o(S,_){return S<<_|S>>>32-_}function c(S,_){f(S,0,_,0,16);for(let C=8;C>0;C-=2)_[4]^=o(_[0]+_[12],7),_[8]^=o(_[4]+_[0],9),_[12]^=o(_[8]+_[4],13),_[0]^=o(_[12]+_[8],18),_[9]^=o(_[5]+_[1],7),_[13]^=o(_[9]+_[5],9),_[1]^=o(_[13]+_[9],13),_[5]^=o(_[1]+_[13],18),_[14]^=o(_[10]+_[6],7),_[2]^=o(_[14]+_[10],9),_[6]^=o(_[2]+_[14],13),_[10]^=o(_[6]+_[2],18),_[3]^=o(_[15]+_[11],7),_[7]^=o(_[3]+_[15],9),_[11]^=o(_[7]+_[3],13),_[15]^=o(_[11]+_[7],18),_[1]^=o(_[0]+_[3],7),_[2]^=o(_[1]+_[0],9),_[3]^=o(_[2]+_[1],13),_[0]^=o(_[3]+_[2],18),_[6]^=o(_[5]+_[4],7),_[7]^=o(_[6]+_[5],9),_[4]^=o(_[7]+_[6],13),_[5]^=o(_[4]+_[7],18),_[11]^=o(_[10]+_[9],7),_[8]^=o(_[11]+_[10],9),_[9]^=o(_[8]+_[11],13),_[10]^=o(_[9]+_[8],18),_[12]^=o(_[15]+_[14],7),_[13]^=o(_[12]+_[15],9),_[14]^=o(_[13]+_[12],13),_[15]^=o(_[14]+_[13],18);for(let C=0;C<16;++C)S[C]+=_[C]}function u(S,_,C,F){for(let q=0;q<F;q++)C[q]^=S[_+q]}function f(S,_,C,F,q){for(;q--;)C[F++]=S[_++]}function d(S){if(!S||typeof S.length!="number")return!1;for(let _=0;_<S.length;_++){const C=S[_];if(typeof C!="number"||C%1||C<0||C>=256)return!1}return!0}function h(S,_){if(typeof S!="number"||S%1)throw new Error("invalid "+_);return S}function g(S,_,C,F,q,U,O){if(C=h(C,"N"),F=h(F,"r"),q=h(q,"p"),U=h(U,"dkLen"),C===0||(C&C-1)!==0)throw new Error("N must be power of 2");if(C>2147483647/128/F)throw new Error("N too large");if(F>2147483647/128/q)throw new Error("r too large");if(!d(S))throw new Error("password must be an array or buffer");if(S=Array.prototype.slice.call(S),!d(_))throw new Error("salt must be an array or buffer");_=Array.prototype.slice.call(_);let $=s(S,_,q*128*F);const J=new Uint32Array(q*32*F);for(let L=0;L<J.length;L++){const D=L*4;J[L]=($[D+3]&255)<<24|($[D+2]&255)<<16|($[D+1]&255)<<8|($[D+0]&255)<<0}const Y=new Uint32Array(64*F),ee=new Uint32Array(32*F*C),Z=32*F,P=new Uint32Array(16),l=new Uint32Array(16),x=q*C*2;let m=0,A=null,v=!1,M=0,I=0,B,y;const E=O?parseInt(1e3/F):4294967295,H=typeof setImmediate<"u"?setImmediate:setTimeout,z=function(){if(v)return O(new Error("cancelled"),m/x);let L;switch(M){case 0:y=I*32*F,f(J,y,Y,0,Z),M=1,B=0;case 1:L=C-B,L>E&&(L=E);for(let ne=0;ne<L;ne++)f(Y,0,ee,(B+ne)*Z,Z),a(Y,Z,F,P,l);if(B+=L,m+=L,O){const ne=parseInt(1e3*m/x);if(ne!==A){if(v=O(null,m/x),v)break;A=ne}}if(B<C)break;B=0,M=2;case 2:L=C-B,L>E&&(L=E);for(let ne=0;ne<L;ne++){const we=(2*F-1)*16,Te=Y[we]&C-1;u(ee,Te*Z,Y,Z),a(Y,Z,F,P,l)}if(B+=L,m+=L,O){const ne=parseInt(1e3*m/x);if(ne!==A){if(v=O(null,m/x),v)break;A=ne}}if(B<C)break;if(f(Y,0,J,y,Z),I++,I<q){M=0;break}$=[];for(let ne=0;ne<J.length;ne++)$.push(J[ne]>>0&255),$.push(J[ne]>>8&255),$.push(J[ne]>>16&255),$.push(J[ne]>>24&255);const D=s(S,$,U);return O&&O(null,1,D),D}O&&H(z)};if(!O)for(;;){const L=z();if(L!=null)return L}z()}const b={scrypt:function(S,_,C,F,q,U,O){return new Promise(function($,J){let Y=0;O&&O(0),g(S,_,C,F,q,U,function(ee,Z,P){if(ee)J(ee);else if(P)O&&Y!==1&&O(1),$(new Uint8Array(P));else if(O&&Z!==Y)return Y=Z,O(Z)})})},syncScrypt:function(S,_,C,F,q,U){return new Uint8Array(g(S,_,C,F,q,U))}};t.exports=b})()})(Cc)),Cc.exports}var k2=P2();const Iu=Mr(k2);var B2=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const tu=new ce(sx);function Rl(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class M2 extends Xi{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function C2(t,e,r){if(zt(t,"crypto/cipher")==="aes-128-ctr"){const i=ui(zt(t,"crypto/cipherparams/iv")),s=new dn.Counter(i),a=new dn.ModeOfOperation.ctr(e,s);return fe(a.decrypt(r))}return null}function fx(t,e){const r=ui(zt(t,"crypto/ciphertext"));if(ve(Qt(_r([e.slice(16,32),r]))).substring(2)!==zt(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=C2(t,e.slice(0,16),r);i||tu.throwError("unsupported cipher",ce.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),a=On(i);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),Yt(c)!==a)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:a,privateKey:ve(i)};if(zt(t,"x-ethers/version")==="0.1"){const c=ui(zt(t,"x-ethers/mnemonicCiphertext")),u=ui(zt(t,"x-ethers/mnemonicCounter")),f=new dn.Counter(u),d=new dn.ModeOfOperation.ctr(s,f),h=zt(t,"x-ethers/path")||Gs,g=zt(t,"x-ethers/locale")||"en",b=fe(d.decrypt(c));try{const S=Mu(b,g),_=Lr.fromMnemonic(S,null,g).derivePath(h);if(_.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=_.mnemonic}catch(S){if(S.code!==ce.errors.INVALID_ARGUMENT||S.argument!=="wordlist")throw S}}return new M2(o)}function ux(t,e,r,n,i){return fe(ku(t,e,r,n,i))}function I2(t,e,r,n,i){return Promise.resolve(ux(t,e,r,n,i))}function lx(t,e,r,n,i){const s=Cu(e),a=zt(t,"crypto/kdf");if(a&&typeof a=="string"){const o=function(c,u){return tu.throwArgumentError("invalid key-derivation function parameters",c,u)};if(a.toLowerCase()==="scrypt"){const c=ui(zt(t,"crypto/kdfparams/salt")),u=parseInt(zt(t,"crypto/kdfparams/n")),f=parseInt(zt(t,"crypto/kdfparams/r")),d=parseInt(zt(t,"crypto/kdfparams/p"));(!u||!f||!d)&&o("kdf",a),(u&u-1)!==0&&o("N",u);const h=parseInt(zt(t,"crypto/kdfparams/dklen"));return h!==32&&o("dklen",h),n(s,c,u,f,d,64,i)}else if(a.toLowerCase()==="pbkdf2"){const c=ui(zt(t,"crypto/kdfparams/salt"));let u=null;const f=zt(t,"crypto/kdfparams/prf");f==="hmac-sha256"?u="sha256":f==="hmac-sha512"?u="sha512":o("prf",f);const d=parseInt(zt(t,"crypto/kdfparams/c")),h=parseInt(zt(t,"crypto/kdfparams/dklen"));return h!==32&&o("dklen",h),r(s,c,d,h,u)}}return tu.throwArgumentError("unsupported key-derivation function","kdf",a)}function U2(t,e){const r=JSON.parse(t),n=lx(r,e,ux,Iu.syncScrypt);return fx(r,n)}function O2(t,e,r){return B2(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield lx(n,e,I2,Iu.scrypt,r);return fx(n,i)})}function q2(t,e,r,n){try{if(Yt(t.address)!==On(t.privateKey))throw new Error("address/privateKey mismatch");if(Rl(t)){const _=t.mnemonic;if(Lr.fromMnemonic(_.phrase,null,_.locale).derivePath(_.path||Gs).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(_){return Promise.reject(_)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=fe(t.privateKey),s=Cu(e);let a=null,o=null,c=null;if(Rl(t)){const _=t.mnemonic;a=fe(ix(_.phrase,_.locale||"en")),o=_.path||Gs,c=_.locale||"en"}let u=r.client;u||(u="ethers.js");let f=null;r.salt?f=fe(r.salt):f=Cs(32);let d=null;if(r.iv){if(d=fe(r.iv),d.length!==16)throw new Error("invalid iv")}else d=Cs(16);let h=null;if(r.uuid){if(h=fe(r.uuid),h.length!==16)throw new Error("invalid uuid")}else h=Cs(16);let g=1<<17,b=8,S=1;return r.scrypt&&(r.scrypt.N&&(g=r.scrypt.N),r.scrypt.r&&(b=r.scrypt.r),r.scrypt.p&&(S=r.scrypt.p)),Iu.scrypt(s,f,g,b,S,64,n).then(_=>{_=fe(_);const C=_.slice(0,16),F=_.slice(16,32),q=_.slice(32,64),U=new dn.Counter(d),O=new dn.ModeOfOperation.ctr(C,U),$=fe(O.encrypt(i)),J=Qt(_r([F,$])),Y={address:t.address.substring(2).toLowerCase(),id:A2(h),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ve(d).substring(2)},ciphertext:ve($).substring(2),kdf:"scrypt",kdfparams:{salt:ve(f).substring(2),n:g,dklen:32,p:S,r:b},mac:J.substring(2)}};if(a){const ee=Cs(16),Z=new dn.Counter(ee),P=new dn.ModeOfOperation.ctr(q,Z),l=fe(P.encrypt(a)),x=new Date,m=x.getUTCFullYear()+"-"+us(x.getUTCMonth()+1,2)+"-"+us(x.getUTCDate(),2)+"T"+us(x.getUTCHours(),2)+"-"+us(x.getUTCMinutes(),2)+"-"+us(x.getUTCSeconds(),2)+".0Z";Y["x-ethers"]={client:u,gethFilename:"UTC--"+m+"--"+Y.address,mnemonicCounter:ve(ee).substring(2),mnemonicCiphertext:ve(l).substring(2),path:o,locale:c,version:"0.1"}}return JSON.stringify(Y)})}function N2(t,e,r){if(ox(t)){r&&r(0);const n=ax(t,e);return r&&r(1),Promise.resolve(n)}return cx(t)?O2(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function L2(t,e){if(ox(t))return ax(t,e);if(cx(t))return U2(t,e);throw new Error("invalid JSON wallet")}const D2="wallet/5.8.0";var Pl=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Mi=new ce(D2);function F2(t){return t!=null&&Gt(t.privateKey,32)&&t.address!=null}function H2(t){const e=t.mnemonic;return e&&e.phrase}class In extends fa{constructor(e,r){if(super(),F2(e)){const n=new Di(e.privateKey);if(ae(this,"_signingKey",()=>n),ae(this,"address",On(this.publicKey)),this.address!==Yt(e.address)&&Mi.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),H2(e)){const i=e.mnemonic;ae(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Gs,locale:i.locale||"en"}));const s=this.mnemonic,a=Lr.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);On(a.privateKey)!==this.address&&Mi.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else ae(this,"_mnemonic",()=>null)}else{if(Di.isSigningKey(e))e.curve!=="secp256k1"&&Mi.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),ae(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new Di(e);ae(this,"_signingKey",()=>n)}ae(this,"_mnemonic",()=>null),ae(this,"address",On(this.publicKey))}r&&!Zp.isProvider(r)&&Mi.throwArgumentError("invalid provider","provider",r),ae(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new In(this,e)}signTransaction(e){return mn(e).then(r=>{r.from!=null&&(Yt(r.from)!==this.address&&Mi.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(Qt(wl(r)));return wl(r,n)})}signMessage(e){return Pl(this,void 0,void 0,function*(){return $0(this._signingKey().signDigest(_o(e)))})}_signTypedData(e,r,n){return Pl(this,void 0,void 0,function*(){const i=yield mr.resolveNames(e,r,n,s=>(this.provider==null&&Mi.throwError("cannot resolve ENS names without a provider",ce.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return $0(this._signingKey().signDigest(mr.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),q2(this,e,r,n)}static createRandom(e){let r=Cs(16);e||(e={}),e.extraEntropy&&(r=fe(pi(Qt(_r([r,e.extraEntropy])),0,16)));const n=Mu(r,e.locale);return In.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return N2(e,r,n).then(i=>new In(i))}static fromEncryptedJsonSync(e,r){return new In(L2(e,r))}static fromMnemonic(e,r,n){return r||(r=Gs),new In(Lr.fromMnemonic(e,null,n).derivePath(r))}}function K2(t,e){return Jp(_o(t),e)}function dx(t,e,r,n){return Jp(mr.hash(t,e,r),n)}class z2{signer;publicKey;ownerLength=Mt[et.ETHEREUM].pubLength;signatureLength=Mt[et.ETHEREUM].sigLength;signatureType=et.ETHEREUM;constructor(e){this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await _o(e),i=Wp(fe(n),r);this.publicKey=Q.Buffer.from(fe(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return Q.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=On(e);return K2(r,n)===i}}class Uu extends ca{get publicKey(){return os.decode(this.pk)}get key(){return os.decode(this._key)}constructor(e){const r=os.decode(e);super(os.encode(r.subarray(0,32)),os.encode(r.subarray(32,64)))}}var Ic,kl;function $2(){if(kl)return Ic;kl=1;const t={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function e(a,o){if(!a)throw new Error(o)}function r(a,o,c){if(e(o instanceof Uint8Array,`Expected ${a} to be an Uint8Array`),c!==void 0)if(Array.isArray(c)){const u=c.join(", "),f=`Expected ${a} to be an Uint8Array with length [${u}]`;e(c.includes(o.length),f)}else{const u=`Expected ${a} to be an Uint8Array with length ${c}`;e(o.length===c,u)}}function n(a){e(s(a)==="Boolean","Expected compressed to be a Boolean")}function i(a=c=>new Uint8Array(c),o){return typeof a=="function"&&(a=a(o)),r("output",a,o),a}function s(a){return Object.prototype.toString.call(a).slice(8,-1)}return Ic=a=>({contextRandomize(o){switch(e(o===null||o instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),o!==null&&r("seed",o,32),a.contextRandomize(o)){case 1:throw new Error(t.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(o){return r("private key",o,32),a.privateKeyVerify(o)===0},privateKeyNegate(o){switch(r("private key",o,32),a.privateKeyNegate(o)){case 0:return o;case 1:throw new Error(t.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(o,c){switch(r("private key",o,32),r("tweak",c,32),a.privateKeyTweakAdd(o,c)){case 0:return o;case 1:throw new Error(t.TWEAK_ADD)}},privateKeyTweakMul(o,c){switch(r("private key",o,32),r("tweak",c,32),a.privateKeyTweakMul(o,c)){case 0:return o;case 1:throw new Error(t.TWEAK_MUL)}},publicKeyVerify(o){return r("public key",o,[33,65]),a.publicKeyVerify(o)===0},publicKeyCreate(o,c=!0,u){switch(r("private key",o,32),n(c),u=i(u,c?33:65),a.publicKeyCreate(u,o)){case 0:return u;case 1:throw new Error(t.SECKEY_INVALID);case 2:throw new Error(t.PUBKEY_SERIALIZE)}},publicKeyConvert(o,c=!0,u){switch(r("public key",o,[33,65]),n(c),u=i(u,c?33:65),a.publicKeyConvert(u,o)){case 0:return u;case 1:throw new Error(t.PUBKEY_PARSE);case 2:throw new Error(t.PUBKEY_SERIALIZE)}},publicKeyNegate(o,c=!0,u){switch(r("public key",o,[33,65]),n(c),u=i(u,c?33:65),a.publicKeyNegate(u,o)){case 0:return u;case 1:throw new Error(t.PUBKEY_PARSE);case 2:throw new Error(t.IMPOSSIBLE_CASE);case 3:throw new Error(t.PUBKEY_SERIALIZE)}},publicKeyCombine(o,c=!0,u){e(Array.isArray(o),"Expected public keys to be an Array"),e(o.length>0,"Expected public keys array will have more than zero items");for(const f of o)r("public key",f,[33,65]);switch(n(c),u=i(u,c?33:65),a.publicKeyCombine(u,o)){case 0:return u;case 1:throw new Error(t.PUBKEY_PARSE);case 2:throw new Error(t.PUBKEY_COMBINE);case 3:throw new Error(t.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(o,c,u=!0,f){switch(r("public key",o,[33,65]),r("tweak",c,32),n(u),f=i(f,u?33:65),a.publicKeyTweakAdd(f,o,c)){case 0:return f;case 1:throw new Error(t.PUBKEY_PARSE);case 2:throw new Error(t.TWEAK_ADD)}},publicKeyTweakMul(o,c,u=!0,f){switch(r("public key",o,[33,65]),r("tweak",c,32),n(u),f=i(f,u?33:65),a.publicKeyTweakMul(f,o,c)){case 0:return f;case 1:throw new Error(t.PUBKEY_PARSE);case 2:throw new Error(t.TWEAK_MUL)}},signatureNormalize(o){switch(r("signature",o,64),a.signatureNormalize(o)){case 0:return o;case 1:throw new Error(t.SIG_PARSE)}},signatureExport(o,c){r("signature",o,64),c=i(c,72);const u={output:c,outputlen:72};switch(a.signatureExport(u,o)){case 0:return c.slice(0,u.outputlen);case 1:throw new Error(t.SIG_PARSE);case 2:throw new Error(t.IMPOSSIBLE_CASE)}},signatureImport(o,c){switch(r("signature",o),c=i(c,64),a.signatureImport(c,o)){case 0:return c;case 1:throw new Error(t.SIG_PARSE);case 2:throw new Error(t.IMPOSSIBLE_CASE)}},ecdsaSign(o,c,u={},f){r("message",o,32),r("private key",c,32),e(s(u)==="Object","Expected options to be an Object"),u.data!==void 0&&r("options.data",u.data),u.noncefn!==void 0&&e(s(u.noncefn)==="Function","Expected options.noncefn to be a Function"),f=i(f,64);const d={signature:f,recid:null};switch(a.ecdsaSign(d,o,c,u.data,u.noncefn)){case 0:return d;case 1:throw new Error(t.SIGN);case 2:throw new Error(t.IMPOSSIBLE_CASE)}},ecdsaVerify(o,c,u){switch(r("signature",o,64),r("message",c,32),r("public key",u,[33,65]),a.ecdsaVerify(o,c,u)){case 0:return!0;case 3:return!1;case 1:throw new Error(t.SIG_PARSE);case 2:throw new Error(t.PUBKEY_PARSE)}},ecdsaRecover(o,c,u,f=!0,d){switch(r("signature",o,64),e(s(c)==="Number"&&c>=0&&c<=3,"Expected recovery id to be a Number within interval [0, 3]"),r("message",u,32),n(f),d=i(d,f?33:65),a.ecdsaRecover(d,o,c,u)){case 0:return d;case 1:throw new Error(t.SIG_PARSE);case 2:throw new Error(t.RECOVER);case 3:throw new Error(t.IMPOSSIBLE_CASE)}},ecdh(o,c,u={},f){switch(r("public key",o,[33,65]),r("private key",c,32),e(s(u)==="Object","Expected options to be an Object"),u.data!==void 0&&r("options.data",u.data),u.hashfn!==void 0?(e(s(u.hashfn)==="Function","Expected options.hashfn to be a Function"),u.xbuf!==void 0&&r("options.xbuf",u.xbuf,32),u.ybuf!==void 0&&r("options.ybuf",u.ybuf,32),r("output",f)):f=i(f,32),a.ecdh(f,o,c,u.data,u.hashfn,u.xbuf,u.ybuf)){case 0:return f;case 1:throw new Error(t.PUBKEY_PARSE);case 2:throw new Error(t.ECDH)}}}),Ic}var Uc,Bl;function j2(){if(Bl)return Uc;Bl=1;const t=ig().ec,e=new t("secp256k1"),r=e.curve,n=r.n.constructor;function i(c,u){let f=new n(u);if(f.cmp(r.p)>=0)return null;f=f.toRed(r.red);let d=f.redSqr().redIMul(f).redIAdd(r.b).redSqrt();c===3!==d.isOdd()&&(d=d.redNeg());const h=f.redSqr().redIMul(f);return d.redSqr().redISub(h.redIAdd(r.b)).isZero()?e.keyPair({pub:{x:f,y:d}}):null}function s(c,u,f){let d=new n(u),h=new n(f);if(d.cmp(r.p)>=0||h.cmp(r.p)>=0||(d=d.toRed(r.red),h=h.toRed(r.red),(c===6||c===7)&&h.isOdd()!==(c===7)))return null;const g=d.redSqr().redIMul(d);return h.redSqr().redISub(g.redIAdd(r.b)).isZero()?e.keyPair({pub:{x:d,y:h}}):null}function a(c){const u=c[0];switch(u){case 2:case 3:return c.length!==33?null:i(u,c.subarray(1,33));case 4:case 6:case 7:return c.length!==65?null:s(u,c.subarray(1,33),c.subarray(33,65));default:return null}}function o(c,u){const f=u.encode(null,c.length===33);for(let d=0;d<c.length;++d)c[d]=f[d]}return Uc={contextRandomize(){return 0},privateKeyVerify(c){const u=new n(c);return u.cmp(r.n)<0&&!u.isZero()?0:1},privateKeyNegate(c){const u=new n(c),f=r.n.sub(u).umod(r.n).toArrayLike(Uint8Array,"be",32);return c.set(f),0},privateKeyTweakAdd(c,u){const f=new n(u);if(f.cmp(r.n)>=0||(f.iadd(new n(c)),f.cmp(r.n)>=0&&f.isub(r.n),f.isZero()))return 1;const d=f.toArrayLike(Uint8Array,"be",32);return c.set(d),0},privateKeyTweakMul(c,u){let f=new n(u);if(f.cmp(r.n)>=0||f.isZero())return 1;f.imul(new n(c)),f.cmp(r.n)>=0&&(f=f.umod(r.n));const d=f.toArrayLike(Uint8Array,"be",32);return c.set(d),0},publicKeyVerify(c){return a(c)===null?1:0},publicKeyCreate(c,u){const f=new n(u);if(f.cmp(r.n)>=0||f.isZero())return 1;const d=e.keyFromPrivate(u).getPublic();return o(c,d),0},publicKeyConvert(c,u){const f=a(u);if(f===null)return 1;const d=f.getPublic();return o(c,d),0},publicKeyNegate(c,u){const f=a(u);if(f===null)return 1;const d=f.getPublic();return d.y=d.y.redNeg(),o(c,d),0},publicKeyCombine(c,u){const f=new Array(u.length);for(let h=0;h<u.length;++h)if(f[h]=a(u[h]),f[h]===null)return 1;let d=f[0].getPublic();for(let h=1;h<f.length;++h)d=d.add(f[h].pub);return d.isInfinity()?2:(o(c,d),0)},publicKeyTweakAdd(c,u,f){const d=a(u);if(d===null)return 1;if(f=new n(f),f.cmp(r.n)>=0)return 2;const h=d.getPublic().add(r.g.mul(f));return h.isInfinity()?2:(o(c,h),0)},publicKeyTweakMul(c,u,f){const d=a(u);if(d===null)return 1;if(f=new n(f),f.cmp(r.n)>=0||f.isZero())return 2;const h=d.getPublic().mul(f);return o(c,h),0},signatureNormalize(c){const u=new n(c.subarray(0,32)),f=new n(c.subarray(32,64));return u.cmp(r.n)>=0||f.cmp(r.n)>=0?1:(f.cmp(e.nh)===1&&c.set(r.n.sub(f).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(c,u){const f=u.subarray(0,32),d=u.subarray(32,64);if(new n(f).cmp(r.n)>=0||new n(d).cmp(r.n)>=0)return 1;const{output:h}=c;let g=h.subarray(4,37);g[0]=0,g.set(f,1);let b=33,S=0;for(;b>1&&g[S]===0&&!(g[S+1]&128);--b,++S);if(g=g.subarray(S),g[0]&128||b>1&&g[0]===0&&!(g[1]&128))return 1;let _=h.subarray(39,72);_[0]=0,_.set(d,1);let C=33,F=0;for(;C>1&&_[F]===0&&!(_[F+1]&128);--C,++F);return _=_.subarray(F),_[0]&128||C>1&&_[0]===0&&!(_[1]&128)?1:(c.outputlen=6+b+C,h[0]=48,h[1]=c.outputlen-2,h[2]=2,h[3]=g.length,h.set(g,4),h[4+b]=2,h[5+b]=_.length,h.set(_,6+b),0)},signatureImport(c,u){if(u.length<8||u.length>72||u[0]!==48||u[1]!==u.length-2||u[2]!==2)return 1;const f=u[3];if(f===0||5+f>=u.length||u[4+f]!==2)return 1;const d=u[5+f];if(d===0||6+f+d!==u.length||u[4]&128||f>1&&u[4]===0&&!(u[5]&128)||u[f+6]&128||d>1&&u[f+6]===0&&!(u[f+7]&128))return 1;let h=u.subarray(4,4+f);if(h.length===33&&h[0]===0&&(h=h.subarray(1)),h.length>32)return 1;let g=u.subarray(6+f);if(g.length===33&&g[0]===0&&(g=g.slice(1)),g.length>32)throw new Error("S length is too long");let b=new n(h);b.cmp(r.n)>=0&&(b=new n(0));let S=new n(u.subarray(6+f));return S.cmp(r.n)>=0&&(S=new n(0)),c.set(b.toArrayLike(Uint8Array,"be",32),0),c.set(S.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(c,u,f,d,h){if(h){const S=h;h=_=>{const C=S(u,f,null,d,_);if(!(C instanceof Uint8Array&&C.length===32))throw new Error("This is the way");return new n(C)}}const g=new n(f);if(g.cmp(r.n)>=0||g.isZero())return 1;let b;try{b=e.sign(u,f,{canonical:!0,k:h,pers:d})}catch{return 1}return c.signature.set(b.r.toArrayLike(Uint8Array,"be",32),0),c.signature.set(b.s.toArrayLike(Uint8Array,"be",32),32),c.recid=b.recoveryParam,0},ecdsaVerify(c,u,f){const d={r:c.subarray(0,32),s:c.subarray(32,64)},h=new n(d.r),g=new n(d.s);if(h.cmp(r.n)>=0||g.cmp(r.n)>=0)return 1;if(g.cmp(e.nh)===1||h.isZero()||g.isZero())return 3;const b=a(f);if(b===null)return 2;const S=b.getPublic();return e.verify(u,d,S)?0:3},ecdsaRecover(c,u,f,d){const h={r:u.slice(0,32),s:u.slice(32,64)},g=new n(h.r),b=new n(h.s);if(g.cmp(r.n)>=0||b.cmp(r.n)>=0)return 1;if(g.isZero()||b.isZero())return 2;let S;try{S=e.recoverPubKey(d,h,f)}catch{return 2}return o(c,S),0},ecdh(c,u,f,d,h,g,b){const S=a(u);if(S===null)return 1;const _=new n(f);if(_.cmp(r.n)>=0||_.isZero())return 2;const C=S.getPublic().mul(_);if(h===void 0){const F=C.encode(null,!0),q=e.hash().update(F).digest();for(let U=0;U<32;++U)c[U]=q[U]}else{g||(g=new Uint8Array(32));const F=C.getX().toArray("be",32);for(let $=0;$<32;++$)g[$]=F[$];b||(b=new Uint8Array(32));const q=C.getY().toArray("be",32);for(let $=0;$<32;++$)b[$]=q[$];const U=h(g,b,d);if(!(U instanceof Uint8Array&&U.length===c.length))return 2;c.set(U)}return 0}},Uc}var Oc,Ml;function G2(){return Ml||(Ml=1,Oc=$2()(j2())),Oc}var W2=G2();const io=Mr(W2);var Ra={exports:{}},Cl;function hx(){return Cl||(Cl=1,(function(t,e){e=t.exports=sg(),e.Stream=e,e.Readable=e,e.Writable=ag(),e.Duplex=og(),e.Transform=cg(),e.PassThrough=fg(),e.finished=ug(),e.pipeline=lg()})(Ra,Ra.exports)),Ra.exports}var qc,Il;function V2(){if(Il)return qc;Il=1;const{Transform:t}=hx();return qc=e=>class px extends t{constructor(n,i,s,a,o){super(o),this._rate=n,this._capacity=i,this._delimitedSuffix=s,this._hashBitLength=a,this._options=o,this._state=new e,this._state.initialize(n,i),this._finalized=!1}_transform(n,i,s){let a=null;try{this.update(n,i)}catch(o){a=o}s(a)}_flush(n){let i=null;try{this.push(this.digest())}catch(s){i=s}n(i)}update(n,i){if(!Q.Buffer.isBuffer(n)&&typeof n!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Q.Buffer.isBuffer(n)||(n=Q.Buffer.from(n,i)),this._state.absorb(n),this}digest(n){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let i=this._state.squeeze(this._hashBitLength/8);return n!==void 0&&(i=i.toString(n)),this._resetState(),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const n=new px(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(n._state),n._finalized=this._finalized,n}},qc}var Nc,Ul;function J2(){if(Ul)return Nc;Ul=1;const{Transform:t}=hx();return Nc=e=>class xx extends t{constructor(n,i,s,a){super(a),this._rate=n,this._capacity=i,this._delimitedSuffix=s,this._options=a,this._state=new e,this._state.initialize(n,i),this._finalized=!1}_transform(n,i,s){let a=null;try{this.update(n,i)}catch(o){a=o}s(a)}_flush(){}_read(n){this.push(this.squeeze(n))}update(n,i){if(!Q.Buffer.isBuffer(n)&&typeof n!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Q.Buffer.isBuffer(n)||(n=Q.Buffer.from(n,i)),this._state.absorb(n),this}squeeze(n,i){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let s=this._state.squeeze(n);return i!==void 0&&(s=s.toString(i)),s}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const n=new xx(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(n._state),n._finalized=this._finalized,n}},Nc}var Lc,Ol;function X2(){if(Ol)return Lc;Ol=1;const t=V2(),e=J2();return Lc=function(r){const n=t(r),i=e(r);return function(s,a){switch(typeof s=="string"?s.toLowerCase():s){case"keccak224":return new n(1152,448,null,224,a);case"keccak256":return new n(1088,512,null,256,a);case"keccak384":return new n(832,768,null,384,a);case"keccak512":return new n(576,1024,null,512,a);case"sha3-224":return new n(1152,448,6,224,a);case"sha3-256":return new n(1088,512,6,256,a);case"sha3-384":return new n(832,768,6,384,a);case"sha3-512":return new n(576,1024,6,512,a);case"shake128":return new i(1344,256,31,a);case"shake256":return new i(1088,512,31,a);default:throw new Error("Invald algorithm: "+s)}}},Lc}var Dc={},ql;function Y2(){if(ql)return Dc;ql=1;const t=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];return Dc.p1600=function(e){for(let r=0;r<24;++r){const n=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],u=e[6]^e[16]^e[26]^e[36]^e[46],f=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],h=e[9]^e[19]^e[29]^e[39]^e[49];let g=d^(s<<1|a>>>31),b=h^(a<<1|s>>>31);const S=e[0]^g,_=e[1]^b,C=e[10]^g,F=e[11]^b,q=e[20]^g,U=e[21]^b,O=e[30]^g,$=e[31]^b,J=e[40]^g,Y=e[41]^b;g=n^(o<<1|c>>>31),b=i^(c<<1|o>>>31);const ee=e[2]^g,Z=e[3]^b,P=e[12]^g,l=e[13]^b,x=e[22]^g,m=e[23]^b,A=e[32]^g,v=e[33]^b,M=e[42]^g,I=e[43]^b;g=s^(u<<1|f>>>31),b=a^(f<<1|u>>>31);const B=e[4]^g,y=e[5]^b,E=e[14]^g,H=e[15]^b,z=e[24]^g,L=e[25]^b,D=e[34]^g,ne=e[35]^b,we=e[44]^g,Te=e[45]^b;g=o^(d<<1|h>>>31),b=c^(h<<1|d>>>31);const xe=e[6]^g,Me=e[7]^b,Ut=e[16]^g,Xe=e[17]^b,Et=e[26]^g,zn=e[27]^b,kt=e[36]^g,Bt=e[37]^b,An=e[46]^g,St=e[47]^b;g=u^(n<<1|i>>>31),b=f^(i<<1|n>>>31);const it=e[8]^g,tn=e[9]^b,At=e[18]^g,gt=e[19]^b,pn=e[28]^g,ht=e[29]^b,bt=e[38]^g,rn=e[39]^b,mt=e[48]^g,wt=e[49]^b,xn=S,Tt=_,pt=F<<4|C>>>28,nn=C<<4|F>>>28,ut=q<<3|U>>>29,at=U<<3|q>>>29,Sr=$<<9|O>>>23,ot=O<<9|$>>>23,lt=J<<18|Y>>>14,Ir=Y<<18|J>>>14,ct=ee<<1|Z>>>31,xt=Z<<1|ee>>>31,yn=l<<12|P>>>20,Rt=P<<12|l>>>20,Pt=x<<10|m>>>22,ar=m<<10|x>>>22,rt=v<<13|A>>>19,st=A<<13|v>>>19,sn=M<<2|I>>>30,yt=I<<2|M>>>30,vt=y<<30|B>>>2,Tn=B<<30|y>>>2,je=E<<6|H>>>26,_t=H<<6|E>>>26,w=L<<11|z>>>21,R=z<<11|L>>>21,T=D<<15|ne>>>17,p=ne<<15|D>>>17,k=Te<<29|we>>>3,K=we<<29|Te>>>3,j=xe<<28|Me>>>4,X=Me<<28|xe>>>4,te=Xe<<23|Ut>>>9,be=Ut<<23|Xe>>>9,le=Et<<25|zn>>>7,Fe=zn<<25|Et>>>7,he=kt<<21|Bt>>>11,_e=Bt<<21|kt>>>11,Ee=St<<24|An>>>8,Ce=An<<24|St>>>8,ke=it<<27|tn>>>5,Se=tn<<27|it>>>5,Re=At<<20|gt>>>12,Ae=gt<<20|At>>>12,pe=ht<<7|pn>>>25,me=pn<<7|ht>>>25,de=bt<<8|rn>>>24,ye=rn<<8|bt>>>24,ge=mt<<14|wt>>>18,ue=wt<<14|mt>>>18;e[0]=xn^~yn&w,e[1]=Tt^~Rt&R,e[10]=j^~Re&ut,e[11]=X^~Ae&at,e[20]=ct^~je&le,e[21]=xt^~_t&Fe,e[30]=ke^~pt&Pt,e[31]=Se^~nn&ar,e[40]=vt^~te&pe,e[41]=Tn^~be&me,e[2]=yn^~w&he,e[3]=Rt^~R&_e,e[12]=Re^~ut&rt,e[13]=Ae^~at&st,e[22]=je^~le&de,e[23]=_t^~Fe&ye,e[32]=pt^~Pt&T,e[33]=nn^~ar&p,e[42]=te^~pe&Sr,e[43]=be^~me&ot,e[4]=w^~he&ge,e[5]=R^~_e&ue,e[14]=ut^~rt&k,e[15]=at^~st&K,e[24]=le^~de&lt,e[25]=Fe^~ye&Ir,e[34]=Pt^~T&Ee,e[35]=ar^~p&Ce,e[44]=pe^~Sr&sn,e[45]=me^~ot&yt,e[6]=he^~ge&xn,e[7]=_e^~ue&Tt,e[16]=rt^~k&j,e[17]=st^~K&X,e[26]=de^~lt&ct,e[27]=ye^~Ir&xt,e[36]=T^~Ee&ke,e[37]=p^~Ce&Se,e[46]=Sr^~sn&vt,e[47]=ot^~yt&Tn,e[8]=ge^~xn&yn,e[9]=ue^~Tt&Rt,e[18]=k^~j&Re,e[19]=K^~X&Ae,e[28]=lt^~ct&je,e[29]=Ir^~xt&_t,e[38]=Ee^~ke&pt,e[39]=Ce^~Se&nn,e[48]=sn^~vt&te,e[49]=yt^~Tn&be,e[0]^=t[r*2],e[1]^=t[r*2+1]}},Dc}var Fc,Nl;function Z2(){if(Nl)return Fc;Nl=1;const t=Y2();function e(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}return e.prototype.initialize=function(r,n){for(let i=0;i<50;++i)this.state[i]=0;this.blockSize=r/8,this.count=0,this.squeezing=!1},e.prototype.absorb=function(r){for(let n=0;n<r.length;++n)this.state[~~(this.count/4)]^=r[n]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(t.p1600(this.state),this.count=0)},e.prototype.absorbLastFewBits=function(r){this.state[~~(this.count/4)]^=r<<8*(this.count%4),(r&128)!==0&&this.count===this.blockSize-1&&t.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),t.p1600(this.state),this.count=0,this.squeezing=!0},e.prototype.squeeze=function(r){this.squeezing||this.absorbLastFewBits(1);const n=Q.Buffer.alloc(r);for(let i=0;i<r;++i)n[i]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(t.p1600(this.state),this.count=0);return n},e.prototype.copy=function(r){for(let n=0;n<50;++n)r.state[n]=this.state[n];r.blockSize=this.blockSize,r.count=this.count,r.squeezing=this.squeezing},Fc=e,Fc}var Hc,Ll;function Q2(){return Ll||(Ll=1,Hc=X2()(Z2())),Hc}var ew=Q2();const tw=Mr(ew);function Ws(t){return t=yx(t),tw("keccak256").update(t).digest()}function yx(t){if(!Q.Buffer.isBuffer(t))if(Array.isArray(t))t=Q.Buffer.from(t);else if(typeof t=="string")gx(t)?t=Q.Buffer.from(Ou(bx(t)),"hex"):t=Q.Buffer.from(t);else if(typeof t=="number")t=wx(t);else if(t==null)t=Q.Buffer.allocUnsafe(0);else if(Be.isBN(t))t=t.toArrayLike(Q.Buffer);else if(t.toArray)t=Q.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function gx(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function Ou(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function bx(t){return typeof t!="string"?t:mx(t)?t.slice(2):t}function mx(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.startsWith("0x")}function wx(t){const e=vx(t);return Q.Buffer.from(Ou(e.slice(2)),"hex")}function vx(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=Ws);const rw={intToBuffer:wx,intToHex:vx,isHexPrefixed:mx,stripHexPrefix:bx,padToEven:Ou,isHexString:gx,toBuffer:yx};class _x{_key;ownerLength=Mt[et.ETHEREUM].pubLength;signatureLength=Mt[et.ETHEREUM].sigLength;signatureType=et.ETHEREUM;pk;constructor(e,r){this._key=e,this.pk=r.toString("hex")}get publicKey(){throw new Error("You must implement `publicKey`")}get key(){return Q.Buffer.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=$e.toBuffer(e));let s=!1;try{s=io.ecdsaVerify(n,Ws(Q.Buffer.from(r)),i)}catch{}return s}async sign(e){return io.ecdsaSign(Ws(Q.Buffer.from(e)),Q.Buffer.from(this.key)).signature}}class Ao extends _x{get publicKey(){return Q.Buffer.from(this.pk,"hex")}constructor(e){e.startsWith("0x")&&(e=e.slice(2));const r=Q.Buffer.from(e,"hex"),n=io.publicKeyCreate(r,!1);super(e,Q.Buffer.from(n))}async sign(e){return new In(this._key).signMessage(e).then(n=>Q.Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){return io.ecdsaVerify(n.length===65?n.slice(0,-1):n,fe(_o(r)),typeof e=="string"?$e.toBuffer(e):e)}}class nw extends Ao{}class ru extends Uu{constructor(e){super(e.replace("ed25519:",""))}}class iw extends ca{get publicKey(){return Q.Buffer.from(this.pk)}get key(){return Q.Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}let so=class extends qp{signatureType=4;constructor(e){super(e)}async sign(e){return super.sign(Q.Buffer.from(Q.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,Q.Buffer.from(Q.Buffer.from(r).toString("hex")),n)}};class sw extends Uu{signatureType=4;constructor(e){super(e)}async sign(e){return super.sign(Q.Buffer.from(Q.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,Q.Buffer.from(Q.Buffer.from(r).toString("hex")),n)}}class aw extends ca{constructor(e,r){super(e,r)}get publicKey(){return Q.Buffer.from(this.pk.slice(2),"hex")}get key(){return Q.Buffer.from(this._key.slice(2),"hex")}}class ao{_publicKey;ownerLength=Mt[et.INJECTEDAPTOS].pubLength;signatureLength=Mt[et.INJECTEDAPTOS].sigLength;signatureType=et.INJECTEDAPTOS;pem;provider;constructor(e,r){this.provider=e,this._publicKey=r}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");const r=await this.provider.signMessage({message:Q.Buffer.from(e).toString("hex"),nonce:"bundlr"});return Q.Buffer.from(r.signature,"hex")}static async verify(e,r,n){const i=e;return po(Q.Buffer.from(n),Q.Buffer.from(`APTOS
message: ${Q.Buffer.from(r).toString("hex")}
nonce: bundlr`),Q.Buffer.from(i))}}class Ex{_publicKey;ownerLength=Mt[et.MULTIAPTOS].pubLength;signatureLength=Mt[et.MULTIAPTOS].sigLength;signatureType=et.MULTIAPTOS;collectSignatures;provider;constructor(e,r){this._publicKey=e,this.collectSignatures=r}get publicKey(){return this._publicKey}async sign(e){const{signatures:r,bitmap:n}=await this.collectSignatures(e),i=128,s=new Uint8Array([0,0,0,0]),a=new Set;n.forEach(u=>{if(u>=32)throw new Error(`Invalid bit value ${u}.`);if(a.has(u))throw new Error("Duplicated bits detected.");a.add(u);const f=Math.floor(u/8);let d=s[f];d|=i>>u%8,s[f]=d});const o=Q.Buffer.alloc(this.signatureLength);let c=0;for(let u=0;u<32;u++)n.includes(u)&&o.set(r[c++],u*64);return o.set(s,this.signatureLength-4),o}static async verify(e,r,n){const s=Mt[et.MULTIAPTOS].sigLength-4,a=n.slice(0,s),o=n.slice(s);let c=!1;for(let u=0;u<32;u++){const f=Math.floor(u/8),d=u-f*8;if((o[f]&128>>d)!==0){const g=a.slice(u*64,(u+1)*64),b=e.slice(u*32,(u+1)*32);await po(Q.Buffer.from(g),Q.Buffer.from(r),Q.Buffer.from(b))||(c=!0)}}return!c}}class Sx extends Ao{ownerLength=Mt[et.TYPEDETHEREUM].pubLength;signatureLength=Mt[et.TYPEDETHEREUM].sigLength;signatureType=et.TYPEDETHEREUM;address;signer;constructor(e){super(e),this.address="0x"+Ws(super.publicKey.slice(1)).slice(-20).toString("hex"),this.signer=new In(e)}get publicKey(){return Q.Buffer.from(this.address)}async sign(e){const r=await this.signer._signTypedData(oo,co,{address:this.address,"Transaction hash":e});return Q.Buffer.from(r.slice(2),"hex")}static async verify(e,r,n){const i=e.toString(),s=dx(oo,co,{address:i,"Transaction hash":r},n);return i.toLowerCase()===s.toLowerCase()}}const oo={name:"Bundlr",version:"1"},co={Bundlr:[{name:"Transaction hash",type:"bytes"},{name:"address",type:"address"}]};class qu{ownerLength=Mt[et.TYPEDETHEREUM].pubLength;signatureLength=Mt[et.TYPEDETHEREUM].sigLength;signatureType=et.TYPEDETHEREUM;address;signer;publicKey;constructor(e){this.signer=e.getSigner()}async ready(){this.address=(await this.signer.getAddress()).toString().toLowerCase(),this.publicKey=Q.Buffer.from(this.address)}async sign(e){const r=await this.signer._signTypedData(oo,co,{address:this.address,"Transaction hash":e});return Q.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=e.toString(),s=dx(oo,co,{address:i,"Transaction hash":r},n);return i.toLowerCase()===s.toLowerCase()}}class ow{signer;publicKey;ownerLength=Mt[et.ARWEAVE].pubLength;signatureLength=Mt[et.ARWEAVE].sigLength;signatureType=et.ARWEAVE;arweave;constructor(e,r){this.signer=e,this.arweave=r}async setPublicKey(){const e=await this.signer.getActivePublicKey();this.publicKey=$e.toBuffer(e)}async sign(e){this.publicKey||await this.setPublicKey();const r={name:"RSA-PSS",saltLength:32},n=await this.signer.signature(e,r);return new Uint8Array(Object.values(n).map(s=>+s))}static async verify(e,r,n){return await tr().verify(e,r,n)}}const Nu={1:vo,2:ca,3:Ao,4:so,5:ao,6:Ex,7:Sx};async function nu(t){return Ji([tt("dataitem"),tt("1"),tt(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}function la(t,e){const r=new Uint8Array(t);if(e<0)throw new Error("Array is unsigned, cannot represent -ve numbers");if(e>2**(t*8)-1)throw new Error(`Number ${e} is too large for an array of ${t} bytes`);for(let n=0;n<r.length;n++){const i=e&255;r[n]=i,e=(e-i)/256}return r}function iu(t){return la(8,t)}function Ax(t){return la(2,t)}function cw(t){return la(16,t)}function su(t){return la(32,t)}function Xt(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}class Lu{buf;pos;constructor(e=Q.Buffer.alloc(Fu),r=0){this.buf=e,this.pos=r}writeTags(e){if(!Array.isArray(e))throw new Error("input must be array");const r=e.length;let n;if(r)for(this.writeLong(r),n=0;n<r;n++){const i=e[n];if(typeof i?.name!="string"||typeof i?.value!="string")throw new Error(`Invalid tag format for ${i}, expected {name:string, value: string}`);this.writeString(i.name),this.writeString(i.value)}this.writeLong(0)}toBuffer(){const e=Q.Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(e,0,0,this.pos),e}writeLong(e){const r=this.buf;let n,i;if(e>=-1073741824&&e<1073741824){i=e>=0?e<<1:~e<<1|1;do r[this.pos]=i&127,i>>=7;while(i&&(r[this.pos++]|=128))}else{n=e>=0?e*2:-e*2-1;do r[this.pos]=n&127,n/=128;while(n>=1&&(r[this.pos++]|=128))}this.pos++,this.buf=r}writeString(e){const r=Q.Buffer.byteLength(e),n=this.buf;this.writeLong(r);let i=this.pos;if(this.pos+=r,!(this.pos>n.length)){if(r>64)this.buf.write(e,this.pos-r,r,"utf8");else{let s,a,o,c;for(s=0,a=r;s<a;s++)o=e.charCodeAt(s),o<128?n[i++]=o:o<2048?(n[i++]=o>>6|192,n[i++]=o&63|128):(o&64512)===55296&&((c=e.charCodeAt(s+1))&64512)===56320?(o=65536+((o&1023)<<10)+(c&1023),s++,n[i++]=o>>18|240,n[i++]=o>>12&63|128,n[i++]=o>>6&63|128,n[i++]=o&63|128):(n[i++]=o>>12|224,n[i++]=o>>6&63|128,n[i++]=o&63|128)}this.buf=n}}readLong(){let e=0,r=0;const n=this.buf;let i,s,a,o;do i=n[this.pos++],s=i&128,e|=(i&127)<<r,r+=7;while(s&&r<28);if(s){a=e,o=268435456;do i=n[this.pos++],a+=(i&127)*o,o*=128;while(i&128);return(a%2?-(a+1):a)/2}return e>>1^-(e&1)}skipLong(){const e=this.buf;for(;e[this.pos++]&128;);}readTags(){const e=[];let r;for(;r=this.readLong();)for(r<0&&(r=-r,this.skipLong());r--;){const n=this.readString(),i=this.readString();e.push({name:n,value:i})}return e}readString(){const e=this.readLong(),r=this.pos,n=this.buf;if(this.pos+=e,this.pos>n.length)throw new Error("TAP Position out of range");return this.buf.slice(r,r+e).toString()}}function Tx(t){if(t?.length===0)return Q.Buffer.allocUnsafe(0);const e=new Lu;return e.writeTags(t),e.toBuffer()}function fo(t){return new Lu(t).readTags()}const Du=80,Fu=4096;class _n{binary;_id;constructor(e){this.binary=e}static isDataItem(e){return e.binary!==void 0}get signatureType(){const e=Xt(this.binary.subarray(0,2));if(et?.[e]!==void 0)return e;throw new Error("Unknown signature type: "+e)}async isValid(){return _n.verify(this.binary)}get id(){return $e.encode(this.rawId)}set id(e){this._id=$e.toBuffer(e)}get rawId(){return di.createHash("sha256").update(this.rawSignature).digest()}set rawId(e){this._id=e}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return $e.encode(this.rawSignature)}set rawOwner(e){if(e.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${e.byteLength} bytes.`);this.binary.set(e,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return Mt[this.signatureType].sigLength}get owner(){return $e.encode(this.rawOwner)}get ownerLength(){return Mt[this.signatureType].pubLength}get rawTarget(){const e=this.getTargetStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):Q.Buffer.alloc(0)}get target(){return $e.encode(this.rawTarget)}get rawAnchor(){const e=this.getAnchorStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):Q.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const e=this.getTagsStart(),r=Xt(this.binary.subarray(e+8,e+16));return this.binary.subarray(e+16,e+16+r)}get tags(){const e=this.getTagsStart();if(Xt(this.binary.subarray(e,e+8))==0)return[];const n=Xt(this.binary.subarray(e+8,e+16));return fo(Q.Buffer.from(this.binary.subarray(e+16,e+16+n)))}get tagsB64Url(){return this.tags.map(r=>({name:$e.encode(r.name),value:$e.encode(r.value)}))}getStartOfData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=Xt(r);return e+16+n}get rawData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=Xt(r),i=e+16+n;return this.binary.subarray(i,this.binary.length)}get data(){return $e.encode(this.rawData)}getRaw(){return this.binary}async sign(e){return this._id=await Ku(this,e),this.rawId}async setSignature(e){this.binary.set(e,2),this._id=Q.Buffer.from(await tr().hash(e))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(e=>({name:$e.encode(e.name),value:$e.encode(e.value)})),data:this.data}}static async verify(e){if(e.byteLength<Du)return!1;const r=new _n(e),n=r.signatureType,i=r.getTagsStart(),s=Xt(e.subarray(i,i+8)),a=e.subarray(i+8,i+16),o=Xt(a);if(o>Fu)return!1;if(s>0)try{if(fo(Q.Buffer.from(e.subarray(i+16,i+16+o))).length!==s)return!1}catch{return!1}const c=Nu[n],u=await nu(r);return await c.verify(r.rawOwner,u,r.rawSignature)}async getSignatureData(){return nu(this)}getTagsStart(){const e=this.getTargetStart(),r=this.binary[e]==1;let n=e+(r?33:1);const i=this.binary[n]==1;return n+=i?33:1,n}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let e=this.getTargetStart()+1;const r=this.binary[this.getTargetStart()]==1;return e+=r?32:0,e}}const on=32;class Hu{length;items;binary;constructor(e){this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=on;r<on+64*this.length;r+=64)e.push(Xt(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=on;r<on+64*this.length;r+=64){const n=this.binary.subarray(r+32,r+64);if(n.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");e.push($e.encode(n))}return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return $e.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const i=await r.createTransaction({data:this.binary,...e},n);return i.addTag("Bundle-Format","binary"),i.addTag("Bundle-Version","2.0.0"),i}async verify(){for(const e of this.items){const r=await e.isValid(),n=$e(di.createHash("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=on;n<on+64*this.length;n+=64){const i=Xt(this.binary.subarray(n,n+32));r+=i;const s=this.binary.subarray(n+32,n+64);if(Q.Buffer.compare(s,e)===0)return{startOffset:r,size:i}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=this.getBundleStart();let i=0,s,a;for(let f=on;f<on+64*this.length;f+=64){if(s=Xt(this.binary.subarray(f,f+32)),i++===e){a=this.binary.subarray(f+32,f+64);break}r+=s}const o=n+r,c=this.binary.subarray(o,o+s),u=new _n(c);return u.rawId=a,u}getById(e){const r=$e.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const s=this.getBundleStart()+n.startOffset;return new _n(this.binary.subarray(s,s+n.size))}getDataItemCount(){return Xt(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let i=0;for(let s=on;s<on+64*this.length;s+=64){const a=Xt(this.binary.subarray(s,s+32)),o=this.binary.subarray(s+32,s+64);if(o.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");const c=n+r,u=this.binary.subarray(c,c+a);r+=a;const f=new _n(u);f.rawId=o,e[i]=f,i++}return e}}function fw(t){return new Hu(t)}async function Rx(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(s,a)=>{const o=s.isSigned()?s.rawId:await Ku(s,e),c=new Uint8Array(64);return c.set(su(s.getRaw().byteLength),0),c.set(o,32),r.set(c,64*a),s.getRaw()})).then(s=>Q.Buffer.concat(s)),i=Q.Buffer.concat([Q.Buffer.from(su(t.length)),Q.Buffer.from(r),n]);return new Hu(i)}async function Px(t,e){const r=await nu(t),n=await e.sign(r),i=await tr().hash(n);return{signature:Q.Buffer.from(n),id:Q.Buffer.from(i)}}async function Ku(t,e){const{signature:r,id:n}=await Px(t,e);return t.getRaw().set(r,2),n}function zu(t,e,r){const n=e.publicKey,i=r?.target?$e.toBuffer(r.target):null,s=1+(i?.byteLength??0),a=r?.anchor?Q.Buffer.from(r.anchor):null,o=1+(a?.byteLength??0),c=(r?.tags?.length??0)>0?Tx(r?.tags):null,u=16+(c?c.byteLength:0),f=typeof t=="string"?Q.Buffer.from(t):Q.Buffer.from(t),d=f.byteLength,h=2+e.signatureLength+e.ownerLength+s+o+u+d,g=Q.Buffer.alloc(h);if(g.set(Ax(e.signatureType),0),g.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);g.set(n,2+e.signatureLength);const b=2+e.signatureLength+e.ownerLength;if(g[b]=i?1:0,i){if(i.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${i.byteLength}`);g.set(i,b+1)}const S=b+s;let _=S+1;if(g[S]=a?1:0,a){if(_+=a.byteLength,a.byteLength!==32)throw new Error("Anchor must be 32 bytes");g.set(a,S+1)}g.set(iu(r?.tags?.length??0),_);const C=iu(c?.byteLength??0);g.set(C,_+8),c&&g.set(c,_+16);const F=_+u;return g.set(f,F),new _n(g)}class uw{signatureType;rawSignature;signature;signatureLength;rawOwner;owner;ownerLength;rawTarget;target;rawAnchor;anchor;rawTags;tags;rawData;data;static async verify(...e){throw new Error("You must implement `verify`")}}const lw=Object.freeze(Object.defineProperty({__proto__:null,AVSCTap:Lu,AlgorandSigner:iw,AptosSigner:aw,ArconnectSigner:ow,Arweave:_u,ArweaveSigner:vo,Bundle:Hu,BundleItem:uw,CryptoDriver:Rp,Curve25519:ca,DataItem:_n,EthereumSigner:Ao,HexInjectedSolanaSigner:so,HexSolanaSigner:sw,InjectedAptosSigner:ao,InjectedEthereumSigner:z2,InjectedSolanaSigner:qp,InjectedTypedEthereumSigner:qu,MAX_TAG_BYTES:Fu,MIN_BINARY_SIZE:Du,MultiSignatureAptosSigner:Ex,NearSigner:ru,PolygonSigner:nw,Rsa4096:Pp,SIG_CONFIG:Mt,get SignatureConfig(){return et},Signer:T1,SolanaSigner:Uu,TypedEthereumSigner:Sx,bundleAndSignData:Rx,byteArrayToLong:Xt,concatBuffers:yr,createData:zu,deepHash:Ji,deserializeTags:fo,exportForTesting:rw,getCryptoDriver:tr,getSignatureAndId:Px,indexToType:Nu,keccak256:Ws,longTo16ByteArray:cw,longTo32ByteArray:su,longTo8ByteArray:iu,longToNByteArray:la,secp256k1:_x,serializeTags:Tx,shortTo2ByteArray:Ax,sign:Ku,stringToBuffer:tt,unbundleData:fw},Symbol.toStringTag,{value:"Module"}));async function Dl(t){const e=kx(t);let r=(await e.next()).value;r=await xr(e,r,32);const n=Xt(r.subarray(0,32));r=r.subarray(32);const i=64*n;r=await xr(e,r,i);const s=new Array(n);for(let c=0;c<i;c+=64)s[c/64]=[Xt(r.subarray(c,c+32)),$e(Q.Buffer.from(r.subarray(c+32,c+64)))];r=r.subarray(i);let a=32+i;const o=[];for(const[c,u]of s){r=await xr(e,r,Du),r=await xr(e,r,2);const f=Xt(r.subarray(0,2));r=r.subarray(2);const{sigLength:d,pubLength:h,sigName:g}=Mt[f];r=await xr(e,r,d);const b=r.subarray(0,d);r=r.subarray(d),r=await xr(e,r,h);const S=r.subarray(0,h);r=r.subarray(h),r=await xr(e,r,1);const _=r[0]===1;_&&(r=await xr(e,r,33));const C=_?r.subarray(1,33):Q.Buffer.allocUnsafe(0);r=r.subarray(_?33:1),r=await xr(e,r,1);const F=r[0]===1;F&&(r=await xr(e,r,33));const q=F?r.subarray(1,33):Q.Buffer.allocUnsafe(0);r=r.subarray(F?33:1),r=await xr(e,r,8);const U=Xt(r.subarray(0,8));r=r.subarray(8),r=await xr(e,r,8);const O=Xt(r.subarray(0,8));r=r.subarray(8),r=await xr(e,r,O);const $=r.subarray(0,O),J=U!==0&&O!==0?fo(Q.Buffer.from($)):[];if(J.length!==U)throw new Error("Tags lengths don't match");r=r.subarray(O);const Y=new Hs.Transform;Y._transform=function(x,m,A){this.push(x),A()};const ee=Ji([tt("dataitem"),tt("1"),tt(f.toString()),S,C,q,$,Y]),Z=2+d+h+(_?33:1)+(F?33:1)+16+O,P=c-Z;if(r.byteLength>P)Y.write(r.subarray(0,P)),r=r.subarray(P);else{let x=r.byteLength;for(Y.write(r);P>x;){if(r=(await e.next()).value,!r)throw new Error(`Not enough data bytes  expected: ${P} received: ${x}`);x+=r.byteLength,x>P?Y.write(r.subarray(0,r.byteLength-(x-P))):Y.write(r)}r=r.subarray(r.byteLength-(x-P))}if(Y.end(),u!==$e(di.createHash("sha256").update(b).digest()))throw new Error("ID doesn't match signature");if(!await Nu[f].verify(S,await ee,b))throw new Error("Invalid signature");o.push({id:u,sigName:g,signature:$e(Q.Buffer.from(b)),target:$e(Q.Buffer.from(C)),anchor:$e(Q.Buffer.from(q)),owner:$e(Q.Buffer.from(S)),tags:J,dataOffset:a+Z,dataSize:P}),a+=Z+P}return o}async function dw(t,e,r,n){const i=zu("",r,n),s=new Hs.PassThrough,a=[tt("dataitem"),tt("1"),tt(i.signatureType.toString()),i.rawOwner,i.rawTarget,i.rawAnchor,i.rawTags,t],o=await Ji(a),c=Q.Buffer.from(await r.sign(o));return i.setSignature(c),s.write(i.getRaw()),e.pipe(s)}async function xr(t,e,r){if(e.byteLength>=r)return e;const{done:n,value:i}=await t.next();if(n&&!i)throw new Error("Invalid buffer");return xr(t,Q.Buffer.concat([Q.Buffer.from(e),Q.Buffer.from(i)]),r)}async function*kx(t){for await(const e of t)yield e}const hw={readBytes:xr,getReader:kx},pw=Object.freeze(Object.defineProperty({__proto__:null,default:Dl,processStream:Dl,streamExportForTesting:hw,streamSigner:dw},Symbol.toStringTag,{value:"Module"})),xw={...lw,stream:pw};globalThis.arbundles??=xw;const yw=Object.freeze(Object.defineProperty({__proto__:null,DataItem:_n,bundleAndSignData:Rx,createData:zu,deepHash:Ji,getCryptoDriver:tr,stringToBuffer:tt},Symbol.toStringTag,{value:"Module"}));class To{base;wallet;_address;providerUrl;providerInstance;ticker;name;irys;minConfirm=5;isSlow=!1;needsFee=!0;inheritsRPC=!1;constructor(e){Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return $e.encode(Q.Buffer.from(await tr().hash(await e.rawSignature())))}async price(){return Bx(this.ticker)}}async function Bx(t){const e=await Ct.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await rr.checkAndThrow(e,"Getting price data"),e.data[0].value}const gw=qu;class Ro extends To{signer;w3signer;inheritsRPC=!0;constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");if(!n.to)throw new Error(`Unable to resolve transactions ${e} receiver`);return{from:n.from,to:n.to,blockHeight:n.blockNumber?new Ue(n.blockNumber):void 0,amount:new Ue(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return e.toString().toLowerCase()}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new qu(this.wallet)),this.signer}async verify(e,r,n){return gw.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new Ue(r,16)}async getFee(e,r){const n=this.providerInstance,i={to:r,from:this.address,value:"0x"+new Ue(e).toString(16)},s=await n.estimateGas(i),a=await n.getGasPrice();return new Ue(s.mul(a).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const i=Ie.from(new Ue(e).toFixed()),s=this.w3signer,a=await s.estimateGas({to:r,from:this.address,value:i.toHexString()});let o=await s.getGasPrice();return this.name==="matic"&&(o=Ie.from(new Ue(o.toString()).multipliedBy(10).decimalPlaces(0).toString())),{txId:void 0,tx:await s.populateTransaction({to:r,from:this.address,value:i.toHexString(),gasPrice:o,gasLimit:a})}}async getPublicKey(){return this.address}async ready(){this.w3signer=await this.wallet.getSigner(),this._address=(await this.w3signer.getAddress()).toString().toLowerCase(),await this.getSigner().ready(),this.providerInstance=this.wallet,await this.providerInstance?._ready?.()}}var Kc={},zc={},Fl;function $u(){return Fl||(Fl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,(function(e){e[e.ED25519=0]="ED25519"})(t.KeyType||(t.KeyType={}))})(zc)),zc}var ls={},ds={},Hl;function Mx(){if(Hl)return ds;Hl=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.KeyPairBase=void 0;class t{}return ds.KeyPairBase=t,ds}var $n={},$c={exports:{}},Kl;function da(){return Kl||(Kl=1,(function(t){(function(e){var r=function(w){var R,T=new Float64Array(16);if(w)for(R=0;R<w.length;R++)T[R]=w[R];return T},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var a=r(),o=r([1]),c=r([56129,1]),u=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function b(w,R,T,p){w[R]=T>>24&255,w[R+1]=T>>16&255,w[R+2]=T>>8&255,w[R+3]=T&255,w[R+4]=p>>24&255,w[R+5]=p>>16&255,w[R+6]=p>>8&255,w[R+7]=p&255}function S(w,R,T,p,k){var K,j=0;for(K=0;K<k;K++)j|=w[R+K]^T[p+K];return(1&j-1>>>8)-1}function _(w,R,T,p){return S(w,R,T,p,16)}function C(w,R,T,p){return S(w,R,T,p,32)}function F(w,R,T,p){for(var k=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,K=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,j=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,X=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,te=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,be=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,le=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,Fe=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,he=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,_e=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,Ee=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,Ce=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,ke=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,Se=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,Re=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Ae=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,pe=k,me=K,de=j,ye=X,ge=te,ue=be,G=le,W=Fe,se=he,re=_e,ie=Ee,oe=Ce,Pe=ke,Ne=Se,He=Re,Le=Ae,N,ze=0;ze<20;ze+=2)N=pe+Pe|0,ge^=N<<7|N>>>25,N=ge+pe|0,se^=N<<9|N>>>23,N=se+ge|0,Pe^=N<<13|N>>>19,N=Pe+se|0,pe^=N<<18|N>>>14,N=ue+me|0,re^=N<<7|N>>>25,N=re+ue|0,Ne^=N<<9|N>>>23,N=Ne+re|0,me^=N<<13|N>>>19,N=me+Ne|0,ue^=N<<18|N>>>14,N=ie+G|0,He^=N<<7|N>>>25,N=He+ie|0,de^=N<<9|N>>>23,N=de+He|0,G^=N<<13|N>>>19,N=G+de|0,ie^=N<<18|N>>>14,N=Le+oe|0,ye^=N<<7|N>>>25,N=ye+Le|0,W^=N<<9|N>>>23,N=W+ye|0,oe^=N<<13|N>>>19,N=oe+W|0,Le^=N<<18|N>>>14,N=pe+ye|0,me^=N<<7|N>>>25,N=me+pe|0,de^=N<<9|N>>>23,N=de+me|0,ye^=N<<13|N>>>19,N=ye+de|0,pe^=N<<18|N>>>14,N=ue+ge|0,G^=N<<7|N>>>25,N=G+ue|0,W^=N<<9|N>>>23,N=W+G|0,ge^=N<<13|N>>>19,N=ge+W|0,ue^=N<<18|N>>>14,N=ie+re|0,oe^=N<<7|N>>>25,N=oe+ie|0,se^=N<<9|N>>>23,N=se+oe|0,re^=N<<13|N>>>19,N=re+se|0,ie^=N<<18|N>>>14,N=Le+He|0,Pe^=N<<7|N>>>25,N=Pe+Le|0,Ne^=N<<9|N>>>23,N=Ne+Pe|0,He^=N<<13|N>>>19,N=He+Ne|0,Le^=N<<18|N>>>14;pe=pe+k|0,me=me+K|0,de=de+j|0,ye=ye+X|0,ge=ge+te|0,ue=ue+be|0,G=G+le|0,W=W+Fe|0,se=se+he|0,re=re+_e|0,ie=ie+Ee|0,oe=oe+Ce|0,Pe=Pe+ke|0,Ne=Ne+Se|0,He=He+Re|0,Le=Le+Ae|0,w[0]=pe>>>0&255,w[1]=pe>>>8&255,w[2]=pe>>>16&255,w[3]=pe>>>24&255,w[4]=me>>>0&255,w[5]=me>>>8&255,w[6]=me>>>16&255,w[7]=me>>>24&255,w[8]=de>>>0&255,w[9]=de>>>8&255,w[10]=de>>>16&255,w[11]=de>>>24&255,w[12]=ye>>>0&255,w[13]=ye>>>8&255,w[14]=ye>>>16&255,w[15]=ye>>>24&255,w[16]=ge>>>0&255,w[17]=ge>>>8&255,w[18]=ge>>>16&255,w[19]=ge>>>24&255,w[20]=ue>>>0&255,w[21]=ue>>>8&255,w[22]=ue>>>16&255,w[23]=ue>>>24&255,w[24]=G>>>0&255,w[25]=G>>>8&255,w[26]=G>>>16&255,w[27]=G>>>24&255,w[28]=W>>>0&255,w[29]=W>>>8&255,w[30]=W>>>16&255,w[31]=W>>>24&255,w[32]=se>>>0&255,w[33]=se>>>8&255,w[34]=se>>>16&255,w[35]=se>>>24&255,w[36]=re>>>0&255,w[37]=re>>>8&255,w[38]=re>>>16&255,w[39]=re>>>24&255,w[40]=ie>>>0&255,w[41]=ie>>>8&255,w[42]=ie>>>16&255,w[43]=ie>>>24&255,w[44]=oe>>>0&255,w[45]=oe>>>8&255,w[46]=oe>>>16&255,w[47]=oe>>>24&255,w[48]=Pe>>>0&255,w[49]=Pe>>>8&255,w[50]=Pe>>>16&255,w[51]=Pe>>>24&255,w[52]=Ne>>>0&255,w[53]=Ne>>>8&255,w[54]=Ne>>>16&255,w[55]=Ne>>>24&255,w[56]=He>>>0&255,w[57]=He>>>8&255,w[58]=He>>>16&255,w[59]=He>>>24&255,w[60]=Le>>>0&255,w[61]=Le>>>8&255,w[62]=Le>>>16&255,w[63]=Le>>>24&255}function q(w,R,T,p){for(var k=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,K=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,j=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,X=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,te=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,be=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,le=R[0]&255|(R[1]&255)<<8|(R[2]&255)<<16|(R[3]&255)<<24,Fe=R[4]&255|(R[5]&255)<<8|(R[6]&255)<<16|(R[7]&255)<<24,he=R[8]&255|(R[9]&255)<<8|(R[10]&255)<<16|(R[11]&255)<<24,_e=R[12]&255|(R[13]&255)<<8|(R[14]&255)<<16|(R[15]&255)<<24,Ee=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,Ce=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,ke=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,Se=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,Re=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Ae=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,pe=k,me=K,de=j,ye=X,ge=te,ue=be,G=le,W=Fe,se=he,re=_e,ie=Ee,oe=Ce,Pe=ke,Ne=Se,He=Re,Le=Ae,N,ze=0;ze<20;ze+=2)N=pe+Pe|0,ge^=N<<7|N>>>25,N=ge+pe|0,se^=N<<9|N>>>23,N=se+ge|0,Pe^=N<<13|N>>>19,N=Pe+se|0,pe^=N<<18|N>>>14,N=ue+me|0,re^=N<<7|N>>>25,N=re+ue|0,Ne^=N<<9|N>>>23,N=Ne+re|0,me^=N<<13|N>>>19,N=me+Ne|0,ue^=N<<18|N>>>14,N=ie+G|0,He^=N<<7|N>>>25,N=He+ie|0,de^=N<<9|N>>>23,N=de+He|0,G^=N<<13|N>>>19,N=G+de|0,ie^=N<<18|N>>>14,N=Le+oe|0,ye^=N<<7|N>>>25,N=ye+Le|0,W^=N<<9|N>>>23,N=W+ye|0,oe^=N<<13|N>>>19,N=oe+W|0,Le^=N<<18|N>>>14,N=pe+ye|0,me^=N<<7|N>>>25,N=me+pe|0,de^=N<<9|N>>>23,N=de+me|0,ye^=N<<13|N>>>19,N=ye+de|0,pe^=N<<18|N>>>14,N=ue+ge|0,G^=N<<7|N>>>25,N=G+ue|0,W^=N<<9|N>>>23,N=W+G|0,ge^=N<<13|N>>>19,N=ge+W|0,ue^=N<<18|N>>>14,N=ie+re|0,oe^=N<<7|N>>>25,N=oe+ie|0,se^=N<<9|N>>>23,N=se+oe|0,re^=N<<13|N>>>19,N=re+se|0,ie^=N<<18|N>>>14,N=Le+He|0,Pe^=N<<7|N>>>25,N=Pe+Le|0,Ne^=N<<9|N>>>23,N=Ne+Pe|0,He^=N<<13|N>>>19,N=He+Ne|0,Le^=N<<18|N>>>14;w[0]=pe>>>0&255,w[1]=pe>>>8&255,w[2]=pe>>>16&255,w[3]=pe>>>24&255,w[4]=ue>>>0&255,w[5]=ue>>>8&255,w[6]=ue>>>16&255,w[7]=ue>>>24&255,w[8]=ie>>>0&255,w[9]=ie>>>8&255,w[10]=ie>>>16&255,w[11]=ie>>>24&255,w[12]=Le>>>0&255,w[13]=Le>>>8&255,w[14]=Le>>>16&255,w[15]=Le>>>24&255,w[16]=G>>>0&255,w[17]=G>>>8&255,w[18]=G>>>16&255,w[19]=G>>>24&255,w[20]=W>>>0&255,w[21]=W>>>8&255,w[22]=W>>>16&255,w[23]=W>>>24&255,w[24]=se>>>0&255,w[25]=se>>>8&255,w[26]=se>>>16&255,w[27]=se>>>24&255,w[28]=re>>>0&255,w[29]=re>>>8&255,w[30]=re>>>16&255,w[31]=re>>>24&255}function U(w,R,T,p){F(w,R,T,p)}function O(w,R,T,p){q(w,R,T,p)}var $=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function J(w,R,T,p,k,K,j){var X=new Uint8Array(16),te=new Uint8Array(64),be,le;for(le=0;le<16;le++)X[le]=0;for(le=0;le<8;le++)X[le]=K[le];for(;k>=64;){for(U(te,X,j,$),le=0;le<64;le++)w[R+le]=T[p+le]^te[le];for(be=1,le=8;le<16;le++)be=be+(X[le]&255)|0,X[le]=be&255,be>>>=8;k-=64,R+=64,p+=64}if(k>0)for(U(te,X,j,$),le=0;le<k;le++)w[R+le]=T[p+le]^te[le];return 0}function Y(w,R,T,p,k){var K=new Uint8Array(16),j=new Uint8Array(64),X,te;for(te=0;te<16;te++)K[te]=0;for(te=0;te<8;te++)K[te]=p[te];for(;T>=64;){for(U(j,K,k,$),te=0;te<64;te++)w[R+te]=j[te];for(X=1,te=8;te<16;te++)X=X+(K[te]&255)|0,K[te]=X&255,X>>>=8;T-=64,R+=64}if(T>0)for(U(j,K,k,$),te=0;te<T;te++)w[R+te]=j[te];return 0}function ee(w,R,T,p,k){var K=new Uint8Array(32);O(K,p,k,$);for(var j=new Uint8Array(8),X=0;X<8;X++)j[X]=p[X+16];return Y(w,R,T,j,K)}function Z(w,R,T,p,k,K,j){var X=new Uint8Array(32);O(X,K,j,$);for(var te=new Uint8Array(8),be=0;be<8;be++)te[be]=K[be+16];return J(w,R,T,p,k,te,X)}var P=function(w){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var R,T,p,k,K,j,X,te;R=w[0]&255|(w[1]&255)<<8,this.r[0]=R&8191,T=w[2]&255|(w[3]&255)<<8,this.r[1]=(R>>>13|T<<3)&8191,p=w[4]&255|(w[5]&255)<<8,this.r[2]=(T>>>10|p<<6)&7939,k=w[6]&255|(w[7]&255)<<8,this.r[3]=(p>>>7|k<<9)&8191,K=w[8]&255|(w[9]&255)<<8,this.r[4]=(k>>>4|K<<12)&255,this.r[5]=K>>>1&8190,j=w[10]&255|(w[11]&255)<<8,this.r[6]=(K>>>14|j<<2)&8191,X=w[12]&255|(w[13]&255)<<8,this.r[7]=(j>>>11|X<<5)&8065,te=w[14]&255|(w[15]&255)<<8,this.r[8]=(X>>>8|te<<8)&8191,this.r[9]=te>>>5&127,this.pad[0]=w[16]&255|(w[17]&255)<<8,this.pad[1]=w[18]&255|(w[19]&255)<<8,this.pad[2]=w[20]&255|(w[21]&255)<<8,this.pad[3]=w[22]&255|(w[23]&255)<<8,this.pad[4]=w[24]&255|(w[25]&255)<<8,this.pad[5]=w[26]&255|(w[27]&255)<<8,this.pad[6]=w[28]&255|(w[29]&255)<<8,this.pad[7]=w[30]&255|(w[31]&255)<<8};P.prototype.blocks=function(w,R,T){for(var p=this.fin?0:2048,k,K,j,X,te,be,le,Fe,he,_e,Ee,Ce,ke,Se,Re,Ae,pe,me,de,ye=this.h[0],ge=this.h[1],ue=this.h[2],G=this.h[3],W=this.h[4],se=this.h[5],re=this.h[6],ie=this.h[7],oe=this.h[8],Pe=this.h[9],Ne=this.r[0],He=this.r[1],Le=this.r[2],N=this.r[3],ze=this.r[4],Ye=this.r[5],Ze=this.r[6],Ke=this.r[7],Ve=this.r[8],Je=this.r[9];T>=16;)k=w[R+0]&255|(w[R+1]&255)<<8,ye+=k&8191,K=w[R+2]&255|(w[R+3]&255)<<8,ge+=(k>>>13|K<<3)&8191,j=w[R+4]&255|(w[R+5]&255)<<8,ue+=(K>>>10|j<<6)&8191,X=w[R+6]&255|(w[R+7]&255)<<8,G+=(j>>>7|X<<9)&8191,te=w[R+8]&255|(w[R+9]&255)<<8,W+=(X>>>4|te<<12)&8191,se+=te>>>1&8191,be=w[R+10]&255|(w[R+11]&255)<<8,re+=(te>>>14|be<<2)&8191,le=w[R+12]&255|(w[R+13]&255)<<8,ie+=(be>>>11|le<<5)&8191,Fe=w[R+14]&255|(w[R+15]&255)<<8,oe+=(le>>>8|Fe<<8)&8191,Pe+=Fe>>>5|p,he=0,_e=he,_e+=ye*Ne,_e+=ge*(5*Je),_e+=ue*(5*Ve),_e+=G*(5*Ke),_e+=W*(5*Ze),he=_e>>>13,_e&=8191,_e+=se*(5*Ye),_e+=re*(5*ze),_e+=ie*(5*N),_e+=oe*(5*Le),_e+=Pe*(5*He),he+=_e>>>13,_e&=8191,Ee=he,Ee+=ye*He,Ee+=ge*Ne,Ee+=ue*(5*Je),Ee+=G*(5*Ve),Ee+=W*(5*Ke),he=Ee>>>13,Ee&=8191,Ee+=se*(5*Ze),Ee+=re*(5*Ye),Ee+=ie*(5*ze),Ee+=oe*(5*N),Ee+=Pe*(5*Le),he+=Ee>>>13,Ee&=8191,Ce=he,Ce+=ye*Le,Ce+=ge*He,Ce+=ue*Ne,Ce+=G*(5*Je),Ce+=W*(5*Ve),he=Ce>>>13,Ce&=8191,Ce+=se*(5*Ke),Ce+=re*(5*Ze),Ce+=ie*(5*Ye),Ce+=oe*(5*ze),Ce+=Pe*(5*N),he+=Ce>>>13,Ce&=8191,ke=he,ke+=ye*N,ke+=ge*Le,ke+=ue*He,ke+=G*Ne,ke+=W*(5*Je),he=ke>>>13,ke&=8191,ke+=se*(5*Ve),ke+=re*(5*Ke),ke+=ie*(5*Ze),ke+=oe*(5*Ye),ke+=Pe*(5*ze),he+=ke>>>13,ke&=8191,Se=he,Se+=ye*ze,Se+=ge*N,Se+=ue*Le,Se+=G*He,Se+=W*Ne,he=Se>>>13,Se&=8191,Se+=se*(5*Je),Se+=re*(5*Ve),Se+=ie*(5*Ke),Se+=oe*(5*Ze),Se+=Pe*(5*Ye),he+=Se>>>13,Se&=8191,Re=he,Re+=ye*Ye,Re+=ge*ze,Re+=ue*N,Re+=G*Le,Re+=W*He,he=Re>>>13,Re&=8191,Re+=se*Ne,Re+=re*(5*Je),Re+=ie*(5*Ve),Re+=oe*(5*Ke),Re+=Pe*(5*Ze),he+=Re>>>13,Re&=8191,Ae=he,Ae+=ye*Ze,Ae+=ge*Ye,Ae+=ue*ze,Ae+=G*N,Ae+=W*Le,he=Ae>>>13,Ae&=8191,Ae+=se*He,Ae+=re*Ne,Ae+=ie*(5*Je),Ae+=oe*(5*Ve),Ae+=Pe*(5*Ke),he+=Ae>>>13,Ae&=8191,pe=he,pe+=ye*Ke,pe+=ge*Ze,pe+=ue*Ye,pe+=G*ze,pe+=W*N,he=pe>>>13,pe&=8191,pe+=se*Le,pe+=re*He,pe+=ie*Ne,pe+=oe*(5*Je),pe+=Pe*(5*Ve),he+=pe>>>13,pe&=8191,me=he,me+=ye*Ve,me+=ge*Ke,me+=ue*Ze,me+=G*Ye,me+=W*ze,he=me>>>13,me&=8191,me+=se*N,me+=re*Le,me+=ie*He,me+=oe*Ne,me+=Pe*(5*Je),he+=me>>>13,me&=8191,de=he,de+=ye*Je,de+=ge*Ve,de+=ue*Ke,de+=G*Ze,de+=W*Ye,he=de>>>13,de&=8191,de+=se*ze,de+=re*N,de+=ie*Le,de+=oe*He,de+=Pe*Ne,he+=de>>>13,de&=8191,he=(he<<2)+he|0,he=he+_e|0,_e=he&8191,he=he>>>13,Ee+=he,ye=_e,ge=Ee,ue=Ce,G=ke,W=Se,se=Re,re=Ae,ie=pe,oe=me,Pe=de,R+=16,T-=16;this.h[0]=ye,this.h[1]=ge,this.h[2]=ue,this.h[3]=G,this.h[4]=W,this.h[5]=se,this.h[6]=re,this.h[7]=ie,this.h[8]=oe,this.h[9]=Pe},P.prototype.finish=function(w,R){var T=new Uint16Array(10),p,k,K,j;if(this.leftover){for(j=this.leftover,this.buffer[j++]=1;j<16;j++)this.buffer[j]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(p=this.h[1]>>>13,this.h[1]&=8191,j=2;j<10;j++)this.h[j]+=p,p=this.h[j]>>>13,this.h[j]&=8191;for(this.h[0]+=p*5,p=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=p,p=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=p,T[0]=this.h[0]+5,p=T[0]>>>13,T[0]&=8191,j=1;j<10;j++)T[j]=this.h[j]+p,p=T[j]>>>13,T[j]&=8191;for(T[9]-=8192,k=(p^1)-1,j=0;j<10;j++)T[j]&=k;for(k=~k,j=0;j<10;j++)this.h[j]=this.h[j]&k|T[j];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,K=this.h[0]+this.pad[0],this.h[0]=K&65535,j=1;j<8;j++)K=(this.h[j]+this.pad[j]|0)+(K>>>16)|0,this.h[j]=K&65535;w[R+0]=this.h[0]>>>0&255,w[R+1]=this.h[0]>>>8&255,w[R+2]=this.h[1]>>>0&255,w[R+3]=this.h[1]>>>8&255,w[R+4]=this.h[2]>>>0&255,w[R+5]=this.h[2]>>>8&255,w[R+6]=this.h[3]>>>0&255,w[R+7]=this.h[3]>>>8&255,w[R+8]=this.h[4]>>>0&255,w[R+9]=this.h[4]>>>8&255,w[R+10]=this.h[5]>>>0&255,w[R+11]=this.h[5]>>>8&255,w[R+12]=this.h[6]>>>0&255,w[R+13]=this.h[6]>>>8&255,w[R+14]=this.h[7]>>>0&255,w[R+15]=this.h[7]>>>8&255},P.prototype.update=function(w,R,T){var p,k;if(this.leftover){for(k=16-this.leftover,k>T&&(k=T),p=0;p<k;p++)this.buffer[this.leftover+p]=w[R+p];if(T-=k,R+=k,this.leftover+=k,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(T>=16&&(k=T-T%16,this.blocks(w,R,k),R+=k,T-=k),T){for(p=0;p<T;p++)this.buffer[this.leftover+p]=w[R+p];this.leftover+=T}};function l(w,R,T,p,k,K){var j=new P(K);return j.update(T,p,k),j.finish(w,R),0}function x(w,R,T,p,k,K){var j=new Uint8Array(16);return l(j,0,T,p,k,K),_(w,R,j,0)}function m(w,R,T,p,k){var K;if(T<32)return-1;for(Z(w,0,R,0,T,p,k),l(w,16,w,32,T-32,w),K=0;K<16;K++)w[K]=0;return 0}function A(w,R,T,p,k){var K,j=new Uint8Array(32);if(T<32||(ee(j,0,32,p,k),x(R,16,R,32,T-32,j)!==0))return-1;for(Z(w,0,R,0,T,p,k),K=0;K<32;K++)w[K]=0;return 0}function v(w,R){var T;for(T=0;T<16;T++)w[T]=R[T]|0}function M(w){var R,T,p=1;for(R=0;R<16;R++)T=w[R]+p+65535,p=Math.floor(T/65536),w[R]=T-p*65536;w[0]+=p-1+37*(p-1)}function I(w,R,T){for(var p,k=~(T-1),K=0;K<16;K++)p=k&(w[K]^R[K]),w[K]^=p,R[K]^=p}function B(w,R){var T,p,k,K=r(),j=r();for(T=0;T<16;T++)j[T]=R[T];for(M(j),M(j),M(j),p=0;p<2;p++){for(K[0]=j[0]-65517,T=1;T<15;T++)K[T]=j[T]-65535-(K[T-1]>>16&1),K[T-1]&=65535;K[15]=j[15]-32767-(K[14]>>16&1),k=K[15]>>16&1,K[14]&=65535,I(j,K,1-k)}for(T=0;T<16;T++)w[2*T]=j[T]&255,w[2*T+1]=j[T]>>8}function y(w,R){var T=new Uint8Array(32),p=new Uint8Array(32);return B(T,w),B(p,R),C(T,0,p,0)}function E(w){var R=new Uint8Array(32);return B(R,w),R[0]&1}function H(w,R){var T;for(T=0;T<16;T++)w[T]=R[2*T]+(R[2*T+1]<<8);w[15]&=32767}function z(w,R,T){for(var p=0;p<16;p++)w[p]=R[p]+T[p]}function L(w,R,T){for(var p=0;p<16;p++)w[p]=R[p]-T[p]}function D(w,R,T){var p,k,K=0,j=0,X=0,te=0,be=0,le=0,Fe=0,he=0,_e=0,Ee=0,Ce=0,ke=0,Se=0,Re=0,Ae=0,pe=0,me=0,de=0,ye=0,ge=0,ue=0,G=0,W=0,se=0,re=0,ie=0,oe=0,Pe=0,Ne=0,He=0,Le=0,N=T[0],ze=T[1],Ye=T[2],Ze=T[3],Ke=T[4],Ve=T[5],Je=T[6],Ht=T[7],dt=T[8],Lt=T[9],Dt=T[10],Ft=T[11],Vt=T[12],or=T[13],cr=T[14],fr=T[15];p=R[0],K+=p*N,j+=p*ze,X+=p*Ye,te+=p*Ze,be+=p*Ke,le+=p*Ve,Fe+=p*Je,he+=p*Ht,_e+=p*dt,Ee+=p*Lt,Ce+=p*Dt,ke+=p*Ft,Se+=p*Vt,Re+=p*or,Ae+=p*cr,pe+=p*fr,p=R[1],j+=p*N,X+=p*ze,te+=p*Ye,be+=p*Ze,le+=p*Ke,Fe+=p*Ve,he+=p*Je,_e+=p*Ht,Ee+=p*dt,Ce+=p*Lt,ke+=p*Dt,Se+=p*Ft,Re+=p*Vt,Ae+=p*or,pe+=p*cr,me+=p*fr,p=R[2],X+=p*N,te+=p*ze,be+=p*Ye,le+=p*Ze,Fe+=p*Ke,he+=p*Ve,_e+=p*Je,Ee+=p*Ht,Ce+=p*dt,ke+=p*Lt,Se+=p*Dt,Re+=p*Ft,Ae+=p*Vt,pe+=p*or,me+=p*cr,de+=p*fr,p=R[3],te+=p*N,be+=p*ze,le+=p*Ye,Fe+=p*Ze,he+=p*Ke,_e+=p*Ve,Ee+=p*Je,Ce+=p*Ht,ke+=p*dt,Se+=p*Lt,Re+=p*Dt,Ae+=p*Ft,pe+=p*Vt,me+=p*or,de+=p*cr,ye+=p*fr,p=R[4],be+=p*N,le+=p*ze,Fe+=p*Ye,he+=p*Ze,_e+=p*Ke,Ee+=p*Ve,Ce+=p*Je,ke+=p*Ht,Se+=p*dt,Re+=p*Lt,Ae+=p*Dt,pe+=p*Ft,me+=p*Vt,de+=p*or,ye+=p*cr,ge+=p*fr,p=R[5],le+=p*N,Fe+=p*ze,he+=p*Ye,_e+=p*Ze,Ee+=p*Ke,Ce+=p*Ve,ke+=p*Je,Se+=p*Ht,Re+=p*dt,Ae+=p*Lt,pe+=p*Dt,me+=p*Ft,de+=p*Vt,ye+=p*or,ge+=p*cr,ue+=p*fr,p=R[6],Fe+=p*N,he+=p*ze,_e+=p*Ye,Ee+=p*Ze,Ce+=p*Ke,ke+=p*Ve,Se+=p*Je,Re+=p*Ht,Ae+=p*dt,pe+=p*Lt,me+=p*Dt,de+=p*Ft,ye+=p*Vt,ge+=p*or,ue+=p*cr,G+=p*fr,p=R[7],he+=p*N,_e+=p*ze,Ee+=p*Ye,Ce+=p*Ze,ke+=p*Ke,Se+=p*Ve,Re+=p*Je,Ae+=p*Ht,pe+=p*dt,me+=p*Lt,de+=p*Dt,ye+=p*Ft,ge+=p*Vt,ue+=p*or,G+=p*cr,W+=p*fr,p=R[8],_e+=p*N,Ee+=p*ze,Ce+=p*Ye,ke+=p*Ze,Se+=p*Ke,Re+=p*Ve,Ae+=p*Je,pe+=p*Ht,me+=p*dt,de+=p*Lt,ye+=p*Dt,ge+=p*Ft,ue+=p*Vt,G+=p*or,W+=p*cr,se+=p*fr,p=R[9],Ee+=p*N,Ce+=p*ze,ke+=p*Ye,Se+=p*Ze,Re+=p*Ke,Ae+=p*Ve,pe+=p*Je,me+=p*Ht,de+=p*dt,ye+=p*Lt,ge+=p*Dt,ue+=p*Ft,G+=p*Vt,W+=p*or,se+=p*cr,re+=p*fr,p=R[10],Ce+=p*N,ke+=p*ze,Se+=p*Ye,Re+=p*Ze,Ae+=p*Ke,pe+=p*Ve,me+=p*Je,de+=p*Ht,ye+=p*dt,ge+=p*Lt,ue+=p*Dt,G+=p*Ft,W+=p*Vt,se+=p*or,re+=p*cr,ie+=p*fr,p=R[11],ke+=p*N,Se+=p*ze,Re+=p*Ye,Ae+=p*Ze,pe+=p*Ke,me+=p*Ve,de+=p*Je,ye+=p*Ht,ge+=p*dt,ue+=p*Lt,G+=p*Dt,W+=p*Ft,se+=p*Vt,re+=p*or,ie+=p*cr,oe+=p*fr,p=R[12],Se+=p*N,Re+=p*ze,Ae+=p*Ye,pe+=p*Ze,me+=p*Ke,de+=p*Ve,ye+=p*Je,ge+=p*Ht,ue+=p*dt,G+=p*Lt,W+=p*Dt,se+=p*Ft,re+=p*Vt,ie+=p*or,oe+=p*cr,Pe+=p*fr,p=R[13],Re+=p*N,Ae+=p*ze,pe+=p*Ye,me+=p*Ze,de+=p*Ke,ye+=p*Ve,ge+=p*Je,ue+=p*Ht,G+=p*dt,W+=p*Lt,se+=p*Dt,re+=p*Ft,ie+=p*Vt,oe+=p*or,Pe+=p*cr,Ne+=p*fr,p=R[14],Ae+=p*N,pe+=p*ze,me+=p*Ye,de+=p*Ze,ye+=p*Ke,ge+=p*Ve,ue+=p*Je,G+=p*Ht,W+=p*dt,se+=p*Lt,re+=p*Dt,ie+=p*Ft,oe+=p*Vt,Pe+=p*or,Ne+=p*cr,He+=p*fr,p=R[15],pe+=p*N,me+=p*ze,de+=p*Ye,ye+=p*Ze,ge+=p*Ke,ue+=p*Ve,G+=p*Je,W+=p*Ht,se+=p*dt,re+=p*Lt,ie+=p*Dt,oe+=p*Ft,Pe+=p*Vt,Ne+=p*or,He+=p*cr,Le+=p*fr,K+=38*me,j+=38*de,X+=38*ye,te+=38*ge,be+=38*ue,le+=38*G,Fe+=38*W,he+=38*se,_e+=38*re,Ee+=38*ie,Ce+=38*oe,ke+=38*Pe,Se+=38*Ne,Re+=38*He,Ae+=38*Le,k=1,p=K+k+65535,k=Math.floor(p/65536),K=p-k*65536,p=j+k+65535,k=Math.floor(p/65536),j=p-k*65536,p=X+k+65535,k=Math.floor(p/65536),X=p-k*65536,p=te+k+65535,k=Math.floor(p/65536),te=p-k*65536,p=be+k+65535,k=Math.floor(p/65536),be=p-k*65536,p=le+k+65535,k=Math.floor(p/65536),le=p-k*65536,p=Fe+k+65535,k=Math.floor(p/65536),Fe=p-k*65536,p=he+k+65535,k=Math.floor(p/65536),he=p-k*65536,p=_e+k+65535,k=Math.floor(p/65536),_e=p-k*65536,p=Ee+k+65535,k=Math.floor(p/65536),Ee=p-k*65536,p=Ce+k+65535,k=Math.floor(p/65536),Ce=p-k*65536,p=ke+k+65535,k=Math.floor(p/65536),ke=p-k*65536,p=Se+k+65535,k=Math.floor(p/65536),Se=p-k*65536,p=Re+k+65535,k=Math.floor(p/65536),Re=p-k*65536,p=Ae+k+65535,k=Math.floor(p/65536),Ae=p-k*65536,p=pe+k+65535,k=Math.floor(p/65536),pe=p-k*65536,K+=k-1+37*(k-1),k=1,p=K+k+65535,k=Math.floor(p/65536),K=p-k*65536,p=j+k+65535,k=Math.floor(p/65536),j=p-k*65536,p=X+k+65535,k=Math.floor(p/65536),X=p-k*65536,p=te+k+65535,k=Math.floor(p/65536),te=p-k*65536,p=be+k+65535,k=Math.floor(p/65536),be=p-k*65536,p=le+k+65535,k=Math.floor(p/65536),le=p-k*65536,p=Fe+k+65535,k=Math.floor(p/65536),Fe=p-k*65536,p=he+k+65535,k=Math.floor(p/65536),he=p-k*65536,p=_e+k+65535,k=Math.floor(p/65536),_e=p-k*65536,p=Ee+k+65535,k=Math.floor(p/65536),Ee=p-k*65536,p=Ce+k+65535,k=Math.floor(p/65536),Ce=p-k*65536,p=ke+k+65535,k=Math.floor(p/65536),ke=p-k*65536,p=Se+k+65535,k=Math.floor(p/65536),Se=p-k*65536,p=Re+k+65535,k=Math.floor(p/65536),Re=p-k*65536,p=Ae+k+65535,k=Math.floor(p/65536),Ae=p-k*65536,p=pe+k+65535,k=Math.floor(p/65536),pe=p-k*65536,K+=k-1+37*(k-1),w[0]=K,w[1]=j,w[2]=X,w[3]=te,w[4]=be,w[5]=le,w[6]=Fe,w[7]=he,w[8]=_e,w[9]=Ee,w[10]=Ce,w[11]=ke,w[12]=Se,w[13]=Re,w[14]=Ae,w[15]=pe}function ne(w,R){D(w,R,R)}function we(w,R){var T=r(),p;for(p=0;p<16;p++)T[p]=R[p];for(p=253;p>=0;p--)ne(T,T),p!==2&&p!==4&&D(T,T,R);for(p=0;p<16;p++)w[p]=T[p]}function Te(w,R){var T=r(),p;for(p=0;p<16;p++)T[p]=R[p];for(p=250;p>=0;p--)ne(T,T),p!==1&&D(T,T,R);for(p=0;p<16;p++)w[p]=T[p]}function xe(w,R,T){var p=new Uint8Array(32),k=new Float64Array(80),K,j,X=r(),te=r(),be=r(),le=r(),Fe=r(),he=r();for(j=0;j<31;j++)p[j]=R[j];for(p[31]=R[31]&127|64,p[0]&=248,H(k,T),j=0;j<16;j++)te[j]=k[j],le[j]=X[j]=be[j]=0;for(X[0]=le[0]=1,j=254;j>=0;--j)K=p[j>>>3]>>>(j&7)&1,I(X,te,K),I(be,le,K),z(Fe,X,be),L(X,X,be),z(be,te,le),L(te,te,le),ne(le,Fe),ne(he,X),D(X,be,X),D(be,te,Fe),z(Fe,X,be),L(X,X,be),ne(te,X),L(be,le,he),D(X,be,c),z(X,X,le),D(be,be,X),D(X,le,he),D(le,te,k),ne(te,Fe),I(X,te,K),I(be,le,K);for(j=0;j<16;j++)k[j+16]=X[j],k[j+32]=be[j],k[j+48]=te[j],k[j+64]=le[j];var _e=k.subarray(32),Ee=k.subarray(16);return we(_e,_e),D(Ee,Ee,_e),B(w,Ee),0}function Me(w,R){return xe(w,R,s)}function Ut(w,R){return n(R,32),Me(w,R)}function Xe(w,R,T){var p=new Uint8Array(32);return xe(p,T,R),O(w,i,p,$)}var Et=m,zn=A;function kt(w,R,T,p,k,K){var j=new Uint8Array(32);return Xe(j,k,K),Et(w,R,T,p,j)}function Bt(w,R,T,p,k,K){var j=new Uint8Array(32);return Xe(j,k,K),zn(w,R,T,p,j)}var An=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function St(w,R,T,p){for(var k=new Int32Array(16),K=new Int32Array(16),j,X,te,be,le,Fe,he,_e,Ee,Ce,ke,Se,Re,Ae,pe,me,de,ye,ge,ue,G,W,se,re,ie,oe,Pe=w[0],Ne=w[1],He=w[2],Le=w[3],N=w[4],ze=w[5],Ye=w[6],Ze=w[7],Ke=R[0],Ve=R[1],Je=R[2],Ht=R[3],dt=R[4],Lt=R[5],Dt=R[6],Ft=R[7],Vt=0;p>=128;){for(ge=0;ge<16;ge++)ue=8*ge+Vt,k[ge]=T[ue+0]<<24|T[ue+1]<<16|T[ue+2]<<8|T[ue+3],K[ge]=T[ue+4]<<24|T[ue+5]<<16|T[ue+6]<<8|T[ue+7];for(ge=0;ge<80;ge++)if(j=Pe,X=Ne,te=He,be=Le,le=N,Fe=ze,he=Ye,_e=Ze,Ee=Ke,Ce=Ve,ke=Je,Se=Ht,Re=dt,Ae=Lt,pe=Dt,me=Ft,G=Ze,W=Ft,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=(N>>>14|dt<<18)^(N>>>18|dt<<14)^(dt>>>9|N<<23),W=(dt>>>14|N<<18)^(dt>>>18|N<<14)^(N>>>9|dt<<23),se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,G=N&ze^~N&Ye,W=dt&Lt^~dt&Dt,se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,G=An[ge*2],W=An[ge*2+1],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,G=k[ge%16],W=K[ge%16],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,de=ie&65535|oe<<16,ye=se&65535|re<<16,G=de,W=ye,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=(Pe>>>28|Ke<<4)^(Ke>>>2|Pe<<30)^(Ke>>>7|Pe<<25),W=(Ke>>>28|Pe<<4)^(Pe>>>2|Ke<<30)^(Pe>>>7|Ke<<25),se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,G=Pe&Ne^Pe&He^Ne&He,W=Ke&Ve^Ke&Je^Ve&Je,se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,_e=ie&65535|oe<<16,me=se&65535|re<<16,G=be,W=Se,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=de,W=ye,se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,be=ie&65535|oe<<16,Se=se&65535|re<<16,Ne=j,He=X,Le=te,N=be,ze=le,Ye=Fe,Ze=he,Pe=_e,Ve=Ee,Je=Ce,Ht=ke,dt=Se,Lt=Re,Dt=Ae,Ft=pe,Ke=me,ge%16===15)for(ue=0;ue<16;ue++)G=k[ue],W=K[ue],se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=k[(ue+9)%16],W=K[(ue+9)%16],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,de=k[(ue+1)%16],ye=K[(ue+1)%16],G=(de>>>1|ye<<31)^(de>>>8|ye<<24)^de>>>7,W=(ye>>>1|de<<31)^(ye>>>8|de<<24)^(ye>>>7|de<<25),se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,de=k[(ue+14)%16],ye=K[(ue+14)%16],G=(de>>>19|ye<<13)^(ye>>>29|de<<3)^de>>>6,W=(ye>>>19|de<<13)^(de>>>29|ye<<3)^(ye>>>6|de<<26),se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,k[ue]=ie&65535|oe<<16,K[ue]=se&65535|re<<16;G=Pe,W=Ke,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[0],W=R[0],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[0]=Pe=ie&65535|oe<<16,R[0]=Ke=se&65535|re<<16,G=Ne,W=Ve,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[1],W=R[1],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[1]=Ne=ie&65535|oe<<16,R[1]=Ve=se&65535|re<<16,G=He,W=Je,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[2],W=R[2],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[2]=He=ie&65535|oe<<16,R[2]=Je=se&65535|re<<16,G=Le,W=Ht,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[3],W=R[3],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[3]=Le=ie&65535|oe<<16,R[3]=Ht=se&65535|re<<16,G=N,W=dt,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[4],W=R[4],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[4]=N=ie&65535|oe<<16,R[4]=dt=se&65535|re<<16,G=ze,W=Lt,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[5],W=R[5],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[5]=ze=ie&65535|oe<<16,R[5]=Lt=se&65535|re<<16,G=Ye,W=Dt,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[6],W=R[6],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[6]=Ye=ie&65535|oe<<16,R[6]=Dt=se&65535|re<<16,G=Ze,W=Ft,se=W&65535,re=W>>>16,ie=G&65535,oe=G>>>16,G=w[7],W=R[7],se+=W&65535,re+=W>>>16,ie+=G&65535,oe+=G>>>16,re+=se>>>16,ie+=re>>>16,oe+=ie>>>16,w[7]=Ze=ie&65535|oe<<16,R[7]=Ft=se&65535|re<<16,Vt+=128,p-=128}return p}function it(w,R,T){var p=new Int32Array(8),k=new Int32Array(8),K=new Uint8Array(256),j,X=T;for(p[0]=1779033703,p[1]=3144134277,p[2]=1013904242,p[3]=2773480762,p[4]=1359893119,p[5]=2600822924,p[6]=528734635,p[7]=1541459225,k[0]=4089235720,k[1]=2227873595,k[2]=4271175723,k[3]=1595750129,k[4]=2917565137,k[5]=725511199,k[6]=4215389547,k[7]=327033209,St(p,k,R,T),T%=128,j=0;j<T;j++)K[j]=R[X-T+j];for(K[T]=128,T=256-128*(T<112?1:0),K[T-9]=0,b(K,T-8,X/536870912|0,X<<3),St(p,k,K,T),j=0;j<8;j++)b(w,8*j,p[j],k[j]);return 0}function tn(w,R){var T=r(),p=r(),k=r(),K=r(),j=r(),X=r(),te=r(),be=r(),le=r();L(T,w[1],w[0]),L(le,R[1],R[0]),D(T,T,le),z(p,w[0],w[1]),z(le,R[0],R[1]),D(p,p,le),D(k,w[3],R[3]),D(k,k,f),D(K,w[2],R[2]),z(K,K,K),L(j,p,T),L(X,K,k),z(te,K,k),z(be,p,T),D(w[0],j,X),D(w[1],be,te),D(w[2],te,X),D(w[3],j,be)}function At(w,R,T){var p;for(p=0;p<4;p++)I(w[p],R[p],T)}function gt(w,R){var T=r(),p=r(),k=r();we(k,R[2]),D(T,R[0],k),D(p,R[1],k),B(w,p),w[31]^=E(T)<<7}function pn(w,R,T){var p,k;for(v(w[0],a),v(w[1],o),v(w[2],o),v(w[3],a),k=255;k>=0;--k)p=T[k/8|0]>>(k&7)&1,At(w,R,p),tn(R,w),tn(w,w),At(w,R,p)}function ht(w,R){var T=[r(),r(),r(),r()];v(T[0],d),v(T[1],h),v(T[2],o),D(T[3],d,h),pn(w,T,R)}function bt(w,R,T){var p=new Uint8Array(64),k=[r(),r(),r(),r()],K;for(T||n(R,32),it(p,R,32),p[0]&=248,p[31]&=127,p[31]|=64,ht(k,p),gt(w,k),K=0;K<32;K++)R[K+32]=w[K];return 0}var rn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function mt(w,R){var T,p,k,K;for(p=63;p>=32;--p){for(T=0,k=p-32,K=p-12;k<K;++k)R[k]+=T-16*R[p]*rn[k-(p-32)],T=Math.floor((R[k]+128)/256),R[k]-=T*256;R[k]+=T,R[p]=0}for(T=0,k=0;k<32;k++)R[k]+=T-(R[31]>>4)*rn[k],T=R[k]>>8,R[k]&=255;for(k=0;k<32;k++)R[k]-=T*rn[k];for(p=0;p<32;p++)R[p+1]+=R[p]>>8,w[p]=R[p]&255}function wt(w){var R=new Float64Array(64),T;for(T=0;T<64;T++)R[T]=w[T];for(T=0;T<64;T++)w[T]=0;mt(w,R)}function xn(w,R,T,p){var k=new Uint8Array(64),K=new Uint8Array(64),j=new Uint8Array(64),X,te,be=new Float64Array(64),le=[r(),r(),r(),r()];it(k,p,32),k[0]&=248,k[31]&=127,k[31]|=64;var Fe=T+64;for(X=0;X<T;X++)w[64+X]=R[X];for(X=0;X<32;X++)w[32+X]=k[32+X];for(it(j,w.subarray(32),T+32),wt(j),ht(le,j),gt(w,le),X=32;X<64;X++)w[X]=p[X];for(it(K,w,T+64),wt(K),X=0;X<64;X++)be[X]=0;for(X=0;X<32;X++)be[X]=j[X];for(X=0;X<32;X++)for(te=0;te<32;te++)be[X+te]+=K[X]*k[te];return mt(w.subarray(32),be),Fe}function Tt(w,R){var T=r(),p=r(),k=r(),K=r(),j=r(),X=r(),te=r();return v(w[2],o),H(w[1],R),ne(k,w[1]),D(K,k,u),L(k,k,w[2]),z(K,w[2],K),ne(j,K),ne(X,j),D(te,X,j),D(T,te,k),D(T,T,K),Te(T,T),D(T,T,k),D(T,T,K),D(T,T,K),D(w[0],T,K),ne(p,w[0]),D(p,p,K),y(p,k)&&D(w[0],w[0],g),ne(p,w[0]),D(p,p,K),y(p,k)?-1:(E(w[0])===R[31]>>7&&L(w[0],a,w[0]),D(w[3],w[0],w[1]),0)}function pt(w,R,T,p){var k,K=new Uint8Array(32),j=new Uint8Array(64),X=[r(),r(),r(),r()],te=[r(),r(),r(),r()];if(T<64||Tt(te,p))return-1;for(k=0;k<T;k++)w[k]=R[k];for(k=0;k<32;k++)w[k+32]=p[k];if(it(j,w,T),wt(j),pn(X,te,j),ht(te,R.subarray(32)),tn(X,te),gt(K,X),T-=64,C(R,0,K,0)){for(k=0;k<T;k++)w[k]=0;return-1}for(k=0;k<T;k++)w[k]=R[k+64];return T}var nn=32,ut=24,at=32,Sr=16,ot=32,lt=32,Ir=32,ct=32,xt=32,yn=ut,Rt=at,Pt=Sr,ar=64,rt=32,st=64,sn=32,yt=64;e.lowlevel={crypto_core_hsalsa20:O,crypto_stream_xor:Z,crypto_stream:ee,crypto_stream_salsa20_xor:J,crypto_stream_salsa20:Y,crypto_onetimeauth:l,crypto_onetimeauth_verify:x,crypto_verify_16:_,crypto_verify_32:C,crypto_secretbox:m,crypto_secretbox_open:A,crypto_scalarmult:xe,crypto_scalarmult_base:Me,crypto_box_beforenm:Xe,crypto_box_afternm:Et,crypto_box:kt,crypto_box_open:Bt,crypto_box_keypair:Ut,crypto_hash:it,crypto_sign:xn,crypto_sign_keypair:bt,crypto_sign_open:pt,crypto_secretbox_KEYBYTES:nn,crypto_secretbox_NONCEBYTES:ut,crypto_secretbox_ZEROBYTES:at,crypto_secretbox_BOXZEROBYTES:Sr,crypto_scalarmult_BYTES:ot,crypto_scalarmult_SCALARBYTES:lt,crypto_box_PUBLICKEYBYTES:Ir,crypto_box_SECRETKEYBYTES:ct,crypto_box_BEFORENMBYTES:xt,crypto_box_NONCEBYTES:yn,crypto_box_ZEROBYTES:Rt,crypto_box_BOXZEROBYTES:Pt,crypto_sign_BYTES:ar,crypto_sign_PUBLICKEYBYTES:rt,crypto_sign_SECRETKEYBYTES:st,crypto_sign_SEEDBYTES:sn,crypto_hash_BYTES:yt,gf:r,D:u,L:rn,pack25519:B,unpack25519:H,M:D,A:z,S:ne,Z:L,pow2523:Te,add:tn,set25519:v,modL:mt,scalarmult:pn,scalarbase:ht};function vt(w,R){if(w.length!==nn)throw new Error("bad key size");if(R.length!==ut)throw new Error("bad nonce size")}function Tn(w,R){if(w.length!==Ir)throw new Error("bad public key size");if(R.length!==ct)throw new Error("bad secret key size")}function je(){for(var w=0;w<arguments.length;w++)if(!(arguments[w]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function _t(w){for(var R=0;R<w.length;R++)w[R]=0}e.randomBytes=function(w){var R=new Uint8Array(w);return n(R,w),R},e.secretbox=function(w,R,T){je(w,R,T),vt(T,R);for(var p=new Uint8Array(at+w.length),k=new Uint8Array(p.length),K=0;K<w.length;K++)p[K+at]=w[K];return m(k,p,p.length,R,T),k.subarray(Sr)},e.secretbox.open=function(w,R,T){je(w,R,T),vt(T,R);for(var p=new Uint8Array(Sr+w.length),k=new Uint8Array(p.length),K=0;K<w.length;K++)p[K+Sr]=w[K];return p.length<32||A(k,p,p.length,R,T)!==0?null:k.subarray(at)},e.secretbox.keyLength=nn,e.secretbox.nonceLength=ut,e.secretbox.overheadLength=Sr,e.scalarMult=function(w,R){if(je(w,R),w.length!==lt)throw new Error("bad n size");if(R.length!==ot)throw new Error("bad p size");var T=new Uint8Array(ot);return xe(T,w,R),T},e.scalarMult.base=function(w){if(je(w),w.length!==lt)throw new Error("bad n size");var R=new Uint8Array(ot);return Me(R,w),R},e.scalarMult.scalarLength=lt,e.scalarMult.groupElementLength=ot,e.box=function(w,R,T,p){var k=e.box.before(T,p);return e.secretbox(w,R,k)},e.box.before=function(w,R){je(w,R),Tn(w,R);var T=new Uint8Array(xt);return Xe(T,w,R),T},e.box.after=e.secretbox,e.box.open=function(w,R,T,p){var k=e.box.before(T,p);return e.secretbox.open(w,R,k)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var w=new Uint8Array(Ir),R=new Uint8Array(ct);return Ut(w,R),{publicKey:w,secretKey:R}},e.box.keyPair.fromSecretKey=function(w){if(je(w),w.length!==ct)throw new Error("bad secret key size");var R=new Uint8Array(Ir);return Me(R,w),{publicKey:R,secretKey:new Uint8Array(w)}},e.box.publicKeyLength=Ir,e.box.secretKeyLength=ct,e.box.sharedKeyLength=xt,e.box.nonceLength=yn,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(w,R){if(je(w,R),R.length!==st)throw new Error("bad secret key size");var T=new Uint8Array(ar+w.length);return xn(T,w,w.length,R),T},e.sign.open=function(w,R){if(je(w,R),R.length!==rt)throw new Error("bad public key size");var T=new Uint8Array(w.length),p=pt(T,w,w.length,R);if(p<0)return null;for(var k=new Uint8Array(p),K=0;K<k.length;K++)k[K]=T[K];return k},e.sign.detached=function(w,R){for(var T=e.sign(w,R),p=new Uint8Array(ar),k=0;k<p.length;k++)p[k]=T[k];return p},e.sign.detached.verify=function(w,R,T){if(je(w,R,T),R.length!==ar)throw new Error("bad signature size");if(T.length!==rt)throw new Error("bad public key size");var p=new Uint8Array(ar+w.length),k=new Uint8Array(ar+w.length),K;for(K=0;K<ar;K++)p[K]=R[K];for(K=0;K<w.length;K++)p[K+ar]=w[K];return pt(k,p,p.length,T)>=0},e.sign.keyPair=function(){var w=new Uint8Array(rt),R=new Uint8Array(st);return bt(w,R),{publicKey:w,secretKey:R}},e.sign.keyPair.fromSecretKey=function(w){if(je(w),w.length!==st)throw new Error("bad secret key size");for(var R=new Uint8Array(rt),T=0;T<R.length;T++)R[T]=w[32+T];return{publicKey:R,secretKey:new Uint8Array(w)}},e.sign.keyPair.fromSeed=function(w){if(je(w),w.length!==sn)throw new Error("bad seed size");for(var R=new Uint8Array(rt),T=new Uint8Array(st),p=0;p<32;p++)T[p]=w[p];return bt(R,T,!0),{publicKey:R,secretKey:T}},e.sign.publicKeyLength=rt,e.sign.secretKeyLength=st,e.sign.seedLength=sn,e.sign.signatureLength=ar,e.hash=function(w){je(w);var R=new Uint8Array(yt);return it(R,w,w.length),R},e.hash.hashLength=yt,e.verify=function(w,R){return je(w,R),w.length===0||R.length===0||w.length!==R.length?!1:S(w,0,R,0,w.length)===0},e.setPRNG=function(w){n=w},(function(){var w=typeof self<"u"?self.crypto||self.msCrypto:null;if(w&&w.getRandomValues){var R=65536;e.setPRNG(function(T,p){var k,K=new Uint8Array(p);for(k=0;k<p;k+=R)w.getRandomValues(K.subarray(k,k+Math.min(p-k,R)));for(k=0;k<p;k++)T[k]=K[k];_t(K)})}else typeof wg<"u"&&(w=dg(),w&&w.randomBytes&&e.setPRNG(function(T,p){var k,K=w.randomBytes(p);for(k=0;k<p;k++)T[k]=K[k];_t(K)}))})()})(t.exports?t.exports:self.nacl=self.nacl||{})})($c)),$c.exports}var jn={},Gn={},hs={},zl;function bw(){if(zl)return hs;zl=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.Assignable=void 0;class t{constructor(r){Object.keys(r).map(n=>{this[n]=r[n]})}}return hs.Assignable=t,hs}var jr={},$l;function mw(){if($l)return jr;$l=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.ErrorContext=jr.TypedError=jr.ArgumentTypeError=jr.PositionalArgsError=void 0;class t extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}jr.PositionalArgsError=t;class e extends Error{constructor(s,a,o){super(`Expected ${a} for '${s}' argument, but got '${JSON.stringify(o)}'`)}}jr.ArgumentTypeError=e;class r extends Error{constructor(s,a,o){super(s),this.type=a||"UntypedError",this.context=o}}jr.TypedError=r;class n{constructor(s){this.transactionHash=s}}return jr.ErrorContext=n,jr}var jc={},Gc={},jl;function ww(){return jl||(jl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,(function(e){e.Transaction="transaction",e.Receipt="receipt"})(t.IdType||(t.IdType={}))})(Gc)),Gc}var Wc={},Gl;function vw(){return Gl||(Gl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,(function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"})(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),(function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"})(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(Wc)),Wc}var Wl;function _w(){return Wl||(Wl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=ww();Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=vw();Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(jc)),jc}var Vl;function Ew(){return Vl||(Vl=1,(function(t){var e=Gn&&Gn.__createBinding||(Object.create?(function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}):(function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]})),r=Gn&&Gn.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bw(),t),r(mw(),t),r(_w(),t)})(Gn)),Gn}var Jl;function Cx(){if(Jl)return jn;Jl=1;var t=jn&&jn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(jn,"__esModule",{value:!0}),jn.PublicKey=void 0;const e=Ew(),r=ra(),n=t(da()),i=$u();function s(c){switch(c){case i.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${c}`)}}function a(c){switch(c.toLowerCase()){case"ed25519":return i.KeyType.ED25519;default:throw new Error(`Unknown key type ${c}`)}}class o extends e.Assignable{static from(u){return typeof u=="string"?o.fromString(u):u}static fromString(u){const f=u.split(":");if(f.length===1)return new o({keyType:i.KeyType.ED25519,data:(0,r.baseDecode)(f[0])});if(f.length===2)return new o({keyType:a(f[0]),data:(0,r.baseDecode)(f[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${s(this.keyType)}:${(0,r.baseEncode)(this.data)}`}verify(u,f){switch(this.keyType){case i.KeyType.ED25519:return n.default.sign.detached.verify(u,f,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}return jn.PublicKey=o,jn}var Xl;function Ix(){if(Xl)return $n;Xl=1;var t=$n&&$n.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty($n,"__esModule",{value:!0}),$n.KeyPairEd25519=void 0;const e=ra(),r=t(da()),n=$u(),i=Mx(),s=Cx();class a extends i.KeyPairBase{constructor(c){super();const u=r.default.sign.keyPair.fromSecretKey((0,e.baseDecode)(c));this.publicKey=new s.PublicKey({keyType:n.KeyType.ED25519,data:u.publicKey}),this.secretKey=c}static fromRandom(){const c=r.default.sign.keyPair();return new a((0,e.baseEncode)(c.secretKey))}sign(c){return{signature:r.default.sign.detached(c,(0,e.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(c,u){return this.publicKey.verify(c,u)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}return $n.KeyPairEd25519=a,$n}var Yl;function Sw(){if(Yl)return ls;Yl=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.KeyPair=void 0;const t=Mx(),e=Ix();class r extends t.KeyPairBase{static fromRandom(i){switch(i.toUpperCase()){case"ED25519":return e.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${i}`)}}static fromString(i){const s=i.split(":");if(s.length===1)return new e.KeyPairEd25519(s[0]);if(s.length===2)switch(s[0].toUpperCase()){case"ED25519":return new e.KeyPairEd25519(s[1]);default:throw new Error(`Unknown curve: ${s[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}return ls.KeyPair=r,ls}var Zl;function ju(){return Zl||(Zl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=$u();Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=Sw();Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=Ix();Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var i=Cx();Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return i.PublicKey}})})(Kc)),Kc}var Aw=ju(),Vc={},Wn={},Jc={},Vn={},ps={},Ql;function Gu(){if(Ql)return ps;Ql=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.KeyStore=void 0;class t{}return ps.KeyStore=t,ps}var ed;function Tw(){if(ed)return Vn;ed=1;var t=Vn&&Vn.__awaiter||function(i,s,a,o){function c(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function d(b){try{g(o.next(b))}catch(S){f(S)}}function h(b){try{g(o.throw(b))}catch(S){f(S)}}function g(b){b.done?u(b.value):c(b.value).then(d,h)}g((o=o.apply(i,s||[])).next())})};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.InMemoryKeyStore=void 0;const e=ju(),r=Gu();class n extends r.KeyStore{constructor(){super(),this.keys={}}setKey(s,a,o){return t(this,void 0,void 0,function*(){this.keys[`${a}:${s}`]=o.toString()})}getKey(s,a){return t(this,void 0,void 0,function*(){const o=this.keys[`${a}:${s}`];return o?e.KeyPair.fromString(o):null})}removeKey(s,a){return t(this,void 0,void 0,function*(){delete this.keys[`${a}:${s}`]})}clear(){return t(this,void 0,void 0,function*(){this.keys={}})}getNetworks(){return t(this,void 0,void 0,function*(){const s=new Set;return Object.keys(this.keys).forEach(a=>{const o=a.split(":");s.add(o[1])}),Array.from(s.values())})}getAccounts(s){return t(this,void 0,void 0,function*(){const a=new Array;return Object.keys(this.keys).forEach(o=>{const c=o.split(":");c[c.length-1]===s&&a.push(c.slice(0,c.length-1).join(":"))}),a})}toString(){return"InMemoryKeyStore"}}return Vn.InMemoryKeyStore=n,Vn}var Jn={},td;function Rw(){if(td)return Jn;td=1;var t=Jn&&Jn.__awaiter||function(n,i,s,a){function o(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(g){try{h(a.next(g))}catch(b){u(b)}}function d(g){try{h(a.throw(g))}catch(b){u(b)}}function h(g){g.done?c(g.value):o(g.value).then(f,d)}h((a=a.apply(n,i||[])).next())})};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.MergeKeyStore=void 0;const e=Gu();class r extends e.KeyStore{constructor(i,s={writeKeyStoreIndex:0}){super(),this.options=s,this.keyStores=i}setKey(i,s,a){return t(this,void 0,void 0,function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(i,s,a)})}getKey(i,s){return t(this,void 0,void 0,function*(){for(const a of this.keyStores){const o=yield a.getKey(i,s);if(o)return o}return null})}removeKey(i,s){return t(this,void 0,void 0,function*(){for(const a of this.keyStores)yield a.removeKey(i,s)})}clear(){return t(this,void 0,void 0,function*(){for(const i of this.keyStores)yield i.clear()})}getNetworks(){return t(this,void 0,void 0,function*(){const i=new Set;for(const s of this.keyStores)for(const a of yield s.getNetworks())i.add(a);return Array.from(i)})}getAccounts(i){return t(this,void 0,void 0,function*(){const s=new Set;for(const a of this.keyStores)for(const o of yield a.getAccounts(i))s.add(o);return Array.from(s)})}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}return Jn.MergeKeyStore=r,Jn}var rd;function Pw(){return rd||(rd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.KeyStore=t.InMemoryKeyStore=void 0;var e=Tw();Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return e.InMemoryKeyStore}});var r=Gu();Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});var n=Rw();Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}})})(Jc)),Jc}var nd;function kw(){if(nd)return Wn;nd=1;var t=Wn&&Wn.__awaiter||function(s,a,o,c){function u(f){return f instanceof o?f:new o(function(d){d(f)})}return new(o||(o=Promise))(function(f,d){function h(S){try{b(c.next(S))}catch(_){d(_)}}function g(S){try{b(c.throw(S))}catch(_){d(_)}}function b(S){S.done?f(S.value):u(S.value).then(h,g)}b((c=c.apply(s,a||[])).next())})};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.BrowserLocalStorageKeyStore=void 0;const e=ju(),r=Pw(),n="near-api-js:keystore:";class i extends r.KeyStore{constructor(a=window.localStorage,o=n){super(),this.localStorage=a,this.prefix=o}setKey(a,o,c){return t(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(a,o),c.toString())})}getKey(a,o){return t(this,void 0,void 0,function*(){const c=this.localStorage.getItem(this.storageKeyForSecretKey(a,o));return c?e.KeyPair.fromString(c):null})}removeKey(a,o){return t(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(a,o))})}clear(){return t(this,void 0,void 0,function*(){for(const a of this.storageKeys())a.startsWith(this.prefix)&&this.localStorage.removeItem(a)})}getNetworks(){return t(this,void 0,void 0,function*(){const a=new Set;for(const o of this.storageKeys())if(o.startsWith(this.prefix)){const c=o.substring(this.prefix.length).split(":");a.add(c[1])}return Array.from(a.values())})}getAccounts(a){return t(this,void 0,void 0,function*(){const o=new Array;for(const c of this.storageKeys())if(c.startsWith(this.prefix)){const u=c.substring(this.prefix.length).split(":");u[1]===a&&o.push(u[0])}return o})}storageKeyForSecretKey(a,o){return`${this.prefix}${o}:${a}`}*storageKeys(){for(let a=0;a<this.localStorage.length;a++)yield this.localStorage.key(a)}}return Wn.BrowserLocalStorageKeyStore=i,Wn}var id;function Bw(){return id||(id=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var e=kw();Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return e.BrowserLocalStorageKeyStore}})})(Vc)),Vc}var Mw=Bw(),Xn={},Yn={},Qe={},Zn={},xs={},sd;function Cw(){if(sd)return xs;sd=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.Assignable=void 0;class t{constructor(r){Object.keys(r).map(n=>{this[n]=r[n]})}}return xs.Assignable=t,xs}var Gr={},ad;function Iw(){if(ad)return Gr;ad=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.ErrorContext=Gr.TypedError=Gr.ArgumentTypeError=Gr.PositionalArgsError=void 0;class t extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Gr.PositionalArgsError=t;class e extends Error{constructor(s,a,o){super(`Expected ${a} for '${s}' argument, but got '${JSON.stringify(o)}'`)}}Gr.ArgumentTypeError=e;class r extends Error{constructor(s,a,o){super(s),this.type=a||"UntypedError",this.context=o}}Gr.TypedError=r;class n{constructor(s){this.transactionHash=s}}return Gr.ErrorContext=n,Gr}var Xc={},Yc={},od;function Uw(){return od||(od=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,(function(e){e.Transaction="transaction",e.Receipt="receipt"})(t.IdType||(t.IdType={}))})(Yc)),Yc}var Zc={},cd;function Ow(){return cd||(cd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,(function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"})(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),(function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"})(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(Zc)),Zc}var fd;function qw(){return fd||(fd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=Uw();Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=Ow();Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(Xc)),Xc}var ud;function Zi(){return ud||(ud=1,(function(t){var e=Zn&&Zn.__createBinding||(Object.create?(function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}):(function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]})),r=Zn&&Zn.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Cw(),t),r(Iw(),t),r(qw(),t)})(Zn)),Zn}var ld;function Po(){if(ld)return Qe;ld=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Action=Qe.SignedDelegate=Qe.DeleteAccount=Qe.DeleteKey=Qe.AddKey=Qe.Stake=Qe.Transfer=Qe.FunctionCall=Qe.DeployContract=Qe.CreateAccount=Qe.IAction=Qe.AccessKey=Qe.AccessKeyPermission=Qe.FullAccessPermission=Qe.FunctionCallPermission=void 0;const t=Zi();class e{constructor(F){if(Object.keys(F).length!==1)throw new Error("Enum can only take single value");Object.keys(F).map(q=>{this[q]=F[q],this.enum=q})}}class r extends t.Assignable{}Qe.FunctionCallPermission=r;class n extends t.Assignable{}Qe.FullAccessPermission=n;class i extends e{}Qe.AccessKeyPermission=i;class s extends t.Assignable{}Qe.AccessKey=s;class a extends t.Assignable{}Qe.IAction=a;class o extends a{}Qe.CreateAccount=o;class c extends a{}Qe.DeployContract=c;class u extends a{}Qe.FunctionCall=u;class f extends a{}Qe.Transfer=f;class d extends a{}Qe.Stake=d;class h extends a{}Qe.AddKey=h;class g extends a{}Qe.DeleteKey=g;class b extends a{}Qe.DeleteAccount=b;class S extends a{}Qe.SignedDelegate=S;class _ extends e{}return Qe.Action=_,Qe}var dd;function Nw(){if(dd)return Yn;dd=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.actionCreators=Yn.stringifyJsonOrBytes=void 0;const t=Po();function e(){return new t.AccessKey({permission:new t.AccessKeyPermission({fullAccess:new t.FullAccessPermission({})})})}function r(g,b,S){return new t.AccessKey({permission:new t.AccessKeyPermission({functionCall:new t.FunctionCallPermission({receiverId:g,allowance:S,methodNames:b})})})}function n(){return new t.Action({createAccount:new t.CreateAccount({})})}function i(g){return new t.Action({deployContract:new t.DeployContract({code:g})})}function s(g){return g.byteLength!==void 0&&g.byteLength===g.length?g:Q.Buffer.from(JSON.stringify(g))}Yn.stringifyJsonOrBytes=s;function a(g,b,S,_,C=s,F=!1){return F?new t.Action({functionCall:new t.FunctionCall({methodName:g,args:b,gas:S,deposit:_})}):new t.Action({functionCall:new t.FunctionCall({methodName:g,args:C(b),gas:S,deposit:_})})}function o(g){return new t.Action({transfer:new t.Transfer({deposit:g})})}function c(g,b){return new t.Action({stake:new t.Stake({stake:g,publicKey:b})})}function u(g,b){return new t.Action({addKey:new t.AddKey({publicKey:g,accessKey:b})})}function f(g){return new t.Action({deleteKey:new t.DeleteKey({publicKey:g})})}function d(g){return new t.Action({deleteAccount:new t.DeleteAccount({beneficiaryId:g})})}function h({delegateAction:g,signature:b}){return new t.Action({signedDelegate:new t.SignedDelegate({delegateAction:g,signature:b})})}return Yn.actionCreators={addKey:u,createAccount:n,deleteAccount:d,deleteKey:f,deployContract:i,fullAccessKey:e,functionCall:a,functionCallAccessKey:r,signedDelegate:h,stake:c,transfer:o},Yn}var ys={},Qc={},ef={},tf={},hd;function Wu(){return hd||(hd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,(function(e){e[e.ED25519=0]="ED25519"})(t.KeyType||(t.KeyType={}))})(tf)),tf}var gs={},bs={},pd;function Ux(){if(pd)return bs;pd=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.KeyPairBase=void 0;class t{}return bs.KeyPairBase=t,bs}var Qn={},ei={},xd;function Ox(){if(xd)return ei;xd=1;var t=ei&&ei.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ei,"__esModule",{value:!0}),ei.PublicKey=void 0;const e=Zi(),r=ra(),n=t(da()),i=Wu();function s(c){switch(c){case i.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${c}`)}}function a(c){switch(c.toLowerCase()){case"ed25519":return i.KeyType.ED25519;default:throw new Error(`Unknown key type ${c}`)}}class o extends e.Assignable{static from(u){return typeof u=="string"?o.fromString(u):u}static fromString(u){const f=u.split(":");if(f.length===1)return new o({keyType:i.KeyType.ED25519,data:(0,r.baseDecode)(f[0])});if(f.length===2)return new o({keyType:a(f[0]),data:(0,r.baseDecode)(f[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${s(this.keyType)}:${(0,r.baseEncode)(this.data)}`}verify(u,f){switch(this.keyType){case i.KeyType.ED25519:return n.default.sign.detached.verify(u,f,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}return ei.PublicKey=o,ei}var yd;function qx(){if(yd)return Qn;yd=1;var t=Qn&&Qn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.KeyPairEd25519=void 0;const e=ra(),r=t(da()),n=Wu(),i=Ux(),s=Ox();class a extends i.KeyPairBase{constructor(c){super();const u=r.default.sign.keyPair.fromSecretKey((0,e.baseDecode)(c));this.publicKey=new s.PublicKey({keyType:n.KeyType.ED25519,data:u.publicKey}),this.secretKey=c}static fromRandom(){const c=r.default.sign.keyPair();return new a((0,e.baseEncode)(c.secretKey))}sign(c){return{signature:r.default.sign.detached(c,(0,e.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(c,u){return this.publicKey.verify(c,u)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}return Qn.KeyPairEd25519=a,Qn}var gd;function Lw(){if(gd)return gs;gd=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.KeyPair=void 0;const t=Ux(),e=qx();class r extends t.KeyPairBase{static fromRandom(i){switch(i.toUpperCase()){case"ED25519":return e.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${i}`)}}static fromString(i){const s=i.split(":");if(s.length===1)return new e.KeyPairEd25519(s[0]);if(s.length===2)switch(s[0].toUpperCase()){case"ED25519":return new e.KeyPairEd25519(s[1]);default:throw new Error(`Unknown curve: ${s[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}return gs.KeyPair=r,gs}var bd;function Dw(){return bd||(bd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=Wu();Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=Lw();Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=qx();Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var i=Ox();Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return i.PublicKey}})})(ef)),ef}var ti={},md;function Nx(){if(md)return ti;md=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.buildDelegateAction=ti.DelegateAction=void 0;const t=Zi();class e extends t.Assignable{}ti.DelegateAction=e;function r({actions:n,maxBlockHeight:i,nonce:s,publicKey:a,receiverId:o,senderId:c}){return new e({senderId:c,receiverId:o,actions:n,nonce:s,maxBlockHeight:i,publicKey:a})}return ti.buildDelegateAction=r,ti}var ms={},wd;function Fw(){if(wd)return ms;wd=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.DelegateActionPrefix=void 0;const t=Zi(),e=Math.pow(2,30),r={MetaTransactions:366};class n extends t.Assignable{}class i extends n{constructor(o){super({prefix:e+o})}}class s extends i{constructor(){super(r.MetaTransactions)}}return ms.DelegateActionPrefix=s,ms}var ws={},vd;function Vu(){if(vd)return ws;vd=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.Signature=void 0;const t=Zi();class e extends t.Assignable{}return ws.Signature=e,ws}var _d;function Ju(){return _d||(_d=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SignedTransaction=t.Transaction=t.decodeSignedTransaction=t.decodeTransaction=t.encodeTransaction=t.encodeSignedDelegate=t.encodeDelegateAction=void 0;const e=Dw(),r=Zi(),n=ra(),i=Po(),s=Nx(),a=Fw(),o=Vu();function c(S){return new Uint8Array([...(0,n.serialize)(t.SCHEMA,new a.DelegateActionPrefix),...(0,n.serialize)(t.SCHEMA,S)])}t.encodeDelegateAction=c;function u(S){return(0,n.serialize)(t.SCHEMA,S)}t.encodeSignedDelegate=u;function f(S){return(0,n.serialize)(t.SCHEMA,S)}t.encodeTransaction=f;function d(S){return(0,n.deserialize)(t.SCHEMA,g,S)}t.decodeTransaction=d;function h(S){return(0,n.deserialize)(t.SCHEMA,b,S)}t.decodeSignedTransaction=h;class g extends r.Assignable{encode(){return f(this)}static decode(_){return d(_)}}t.Transaction=g;class b extends r.Assignable{encode(){return f(this)}static decode(_){return h(_)}}t.SignedTransaction=b,t.SCHEMA=new Map([[o.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[b,{kind:"struct",fields:[["transaction",g],["signature",o.Signature]]}],[g,{kind:"struct",fields:[["signerId","string"],["publicKey",e.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[i.Action]]]}],[e.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[i.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",i.AccessKeyPermission]]}],[i.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",i.FunctionCallPermission],["fullAccess",i.FullAccessPermission]]}],[i.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[i.FullAccessPermission,{kind:"struct",fields:[]}],[i.Action,{kind:"enum",field:"enum",values:[["createAccount",i.CreateAccount],["deployContract",i.DeployContract],["functionCall",i.FunctionCall],["transfer",i.Transfer],["stake",i.Stake],["addKey",i.AddKey],["deleteKey",i.DeleteKey],["deleteAccount",i.DeleteAccount],["signedDelegate",i.SignedDelegate]]}],[i.CreateAccount,{kind:"struct",fields:[]}],[i.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[i.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[i.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[i.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",e.PublicKey]]}],[i.AddKey,{kind:"struct",fields:[["publicKey",e.PublicKey],["accessKey",i.AccessKey]]}],[i.DeleteKey,{kind:"struct",fields:[["publicKey",e.PublicKey]]}],[i.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[s.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[i.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",e.PublicKey]]}],[a.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[i.SignedDelegate,{kind:"struct",fields:[["delegateAction",s.DelegateAction],["signature",o.Signature]]}]])})(Qc)),Qc}var Ed;function Lx(){if(Ed)return ys;Ed=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.createTransaction=void 0;const t=Ju();function e(r,n,i,s,a,o){return new t.Transaction({signerId:r,publicKey:n,nonce:s,receiverId:i,actions:a,blockHash:o})}return ys.createTransaction=e,ys}var Wr={},Sd;function Hw(){if(Sd)return Wr;Sd=1;var t=Wr&&Wr.__awaiter||function(f,d,h,g){function b(S){return S instanceof h?S:new h(function(_){_(S)})}return new(h||(h=Promise))(function(S,_){function C(U){try{q(g.next(U))}catch(O){_(O)}}function F(U){try{q(g.throw(U))}catch(O){_(O)}}function q(U){U.done?S(U.value):b(U.value).then(C,F)}q((g=g.apply(f,d||[])).next())})},e=Wr&&Wr.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.signDelegateAction=Wr.signTransaction=void 0;const r=e(hg()),n=Po(),i=Lx(),s=Ju(),a=Vu();function o(f,d,h,g){return t(this,void 0,void 0,function*(){const b=(0,s.encodeTransaction)(f),S=new Uint8Array(r.default.sha256.array(b)),_=yield d.signMessage(b,h,g),C=new s.SignedTransaction({transaction:f,signature:new a.Signature({keyType:f.publicKey.keyType,data:_.signature})});return[S,C]})}function c(...f){return t(this,void 0,void 0,function*(){if(f[0].constructor===s.Transaction){const[d,h,g,b]=f;return o(d,h,g,b)}else{const[d,h,g,b,S,_,C]=f,F=yield S.getPublicKey(_,C),q=(0,i.createTransaction)(_,F,d,h,g,b);return o(q,S,_,C)}})}Wr.signTransaction=c;function u({delegateAction:f,signer:d}){return t(this,void 0,void 0,function*(){const h=(0,s.encodeDelegateAction)(f),g=yield d.sign(h),b=new n.SignedDelegate({delegateAction:f,signature:new a.Signature({keyType:f.publicKey.keyType,data:g})});return{hash:new Uint8Array(r.default.sha256.array(h)),signedDelegateAction:b}})}return Wr.signDelegateAction=u,Wr}var Ad;function Kw(){return Ad||(Ad=1,(function(t){var e=Xn&&Xn.__createBinding||(Object.create?(function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}):(function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]})),r=Xn&&Xn.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Nw(),t),r(Po(),t),r(Lx(),t),r(Nx(),t),r(Ju(),t),r(Hw(),t),r(Vu(),t)})(Xn)),Xn}var vs=Kw(),rf,Td;function zw(){if(Td)return rf;Td=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var o=e.length,c=e.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function d(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var S=0,_=0,C=0,F=b.length;C!==F&&b[C]===0;)C++,S++;for(var q=(F-C)*f+1>>>0,U=new Uint8Array(q);C!==F;){for(var O=b[C],$=0,J=q-1;(O!==0||$<_)&&J!==-1;J--,$++)O+=256*U[J]>>>0,U[J]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");_=$,C++}for(var Y=q-_;Y!==q&&U[Y]===0;)Y++;for(var ee=c.repeat(S);Y<q;++Y)ee+=e.charAt(U[Y]);return ee}function h(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;for(var S=0,_=0,C=0;b[S]===c;)_++,S++;for(var F=(b.length-S)*u+1>>>0,q=new Uint8Array(F);b[S];){var U=b.charCodeAt(S);if(U>255)return;var O=r[U];if(O===255)return;for(var $=0,J=F-1;(O!==0||$<C)&&J!==-1;J--,$++)O+=o*q[J]>>>0,q[J]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");C=$,S++}for(var Y=F-C;Y!==F&&q[Y]===0;)Y++;for(var ee=new Uint8Array(_+(F-Y)),Z=_;Y!==F;)ee[Z++]=q[Y++];return ee}function g(b){var S=h(b);if(S)return S;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:h,decode:g}}return rf=t,rf}var nf,Rd;function $w(){return Rd||(Rd=1,nf=zw()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),nf}var jw=$w();const Is=Mr(jw);class Gw extends To{keyPair;near;constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new Mw.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=Aw.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){const r=await this.providerInstance,[n,i]=e.split(":"),s=await r.txStatusReceipts(Is.decode(i),n),a=await r.block(s.transaction_outcome.block_hash),o=(await r.block({finality:"final"})).header.height;if(s.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const c=s.receipts[0].receipt.Action.actions[0].Transfer.deposit??0;return{from:n,to:s.transaction.receiver_id,amount:new Ue(c),blockHeight:new Ue(a.header.height),pending:!1,confirmed:o-a.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:Is.encode(e);return Q.Buffer.from(Is.decode(r.replace("ed25519:",""))).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new ru(this.keyPair.secretKey)}async verify(e,r,n){return ru.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new Ue(e.sync_info.latest_block_height)}async getFee(e,r){const n=(await this.providerInstance.block({finality:"final"})).header.height,i=await this.providerInstance.gasPrice(n);return new Ue(i.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,a=Q.Buffer.from(Is.decode(i.block_hash)),o=[vs.actionCreators.transfer(new Be(new Ue(e).toString()))],c=vs.createTransaction(this.address,this.keyPair.getPublicKey(),r,s,o,a),u=pg.serialize(vs.SCHEMA,c),f=new Uint8Array(xg.sha256.array(u)),d=this.keyPair.sign(f);return{tx:new vs.SignedTransaction({transaction:c,signature:new vs.Signature({keyType:c.publicKey.keyType,data:d.signature})}),txId:void 0}}async getPublicKey(){return Q.Buffer.from(this.keyPair.getPublicKey().data)}}class Ww extends To{signer;minConfirm=1;constructor(e){super(e),this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new yg(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await r.getSlot("confirmed");if(!n.meta)throw new Error(`Unable to resolve transaction ${e}`);const s=new Ue(n.meta.postBalances[1]).minus(new Ue(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new Ue(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=Q.Buffer.from(e)),Is.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new so(this.wallet)),this.signer}verify(e,r,n){return so.verify(e,r,n)}async getCurrentHeight(){return new Ue((await(await this.getProvider()).getEpochInfo()).blockHeight??0)}async getFee(e,r){return new Ue(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const i=new d0(await this.getPublicKey()),s=await Dn(async o=>{try{return await(await this.getProvider()).getRecentBlockhash()}catch(c){throw c.message?.includes("blockhash")?c:(o(c),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),a=new gg({recentBlockhash:s.blockhash,feePayer:i});return a.add(bg.transfer({fromPubkey:i,toPubkey:new d0(r),lamports:+new Ue(e).toNumber()})),{tx:a,txId:void 0}}async getPublicKey(){if(!this.wallet.publicKey)throw new Error("Wallet.publicKey is undefined");return this.wallet.publicKey.toBuffer()}}const ha="abi/5.8.0",We=new ce(ha),yi={};let Pd={calldata:!0,memory:!0,storage:!0},Vw={calldata:!0,memory:!0};function Pa(t,e){if(t==="bytes"||t==="string"){if(Pd[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&Vw[e])return!0;return(Pd[e]||e==="payable")&&We.throwArgumentError("invalid modifier","name",e),!1}function Jw(t,e){let r=t;function n(o){We.throwArgumentError(`unexpected character at position ${o}`,"param",t)}t=t.replace(/\s/g," ");function i(o){let c={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<t.length;o++){let c=t[o];switch(c){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=Ii(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Pa(a.type,a.name)&&(a.name=""),a.type=Ii(a.type);let u=a;a=a.parent,a||n(o),delete u.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Pa(a.type,a.name)&&(a.name=""),a.type=Ii(a.type);let f=i(a.parent);a.parent.components.push(f),delete a.parent,a=f;break;case" ":a.state.allowType&&a.type!==""&&(a.type=Ii(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):Pa(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=c,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=c,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=c,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=c,delete a.state.allowArray):a.state.readArray?a.type+=c:n(o)}}return a.parent&&We.throwArgumentError("unexpected eof","param",t),delete s.state,a.name==="indexed"?(e||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):Pa(a.type,a.name)&&(a.name=""),s.type=Ii(s.type),s}function $a(t,e){for(let r in e)ae(t,r,e[r])}const nt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Xw=new RegExp(/^(.*)\[([0-9]*)\]$/);class Zt{constructor(e,r){e!==yi&&We.throwError("use fromString",ce.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),$a(this,r);let n=this.type.match(Xw);n?$a(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Zt.fromObject({type:n[1],components:this.components}),baseType:"array"}):$a(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=nt.sighash),nt[e]||We.throwArgumentError("invalid format type","format",e),e===nt.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==nt.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===nt.full?", ":",")+")"):r+=this.type,e!==nt.sighash&&(this.indexed===!0&&(r+=" indexed"),e===nt.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Zt.fromString(e,r):Zt.fromObject(e)}static fromObject(e){return Zt.isParamType(e)?e:new Zt(yi,{name:e.name||null,type:Ii(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Zt.fromObject):null})}static fromString(e,r){function n(i){return Zt.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(Jw(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Vs(t,e){return Zw(t).map(r=>Zt.fromString(r,e))}class wn{constructor(e,r){e!==yi&&We.throwError("use a static from method",ce.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),$a(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return wn.isFragment(e)?e:typeof e=="string"?wn.fromString(e):wn.fromObject(e)}static fromObject(e){if(wn.isFragment(e))return e;switch(e.type){case"function":return ln.fromObject(e);case"event":return bn.fromObject(e);case"constructor":return un.fromObject(e);case"error":return Un.fromObject(e);case"fallback":case"receive":return null}return We.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?bn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?ln.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?un.fromString(e.trim()):e.split(" ")[0]==="error"?Un.fromString(e.substring(5).trim()):We.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class bn extends wn{format(e){if(e||(e=nt.sighash),nt[e]||We.throwArgumentError("invalid format type","format",e),e===nt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==nt.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===nt.full?", ":",")+") ",e!==nt.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?bn.fromString(e):bn.fromObject(e)}static fromObject(e){if(bn.isEventFragment(e))return e;e.type!=="event"&&We.throwArgumentError("invalid event object","value",e);const r={name:Js(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Zt.fromObject):[],type:"event"};return new bn(yi,r)}static fromString(e){let r=e.match(Xs);r||We.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:We.warn("unknown modifier: "+i)}}),bn.fromObject({name:r[1].trim(),anonymous:n,inputs:Vs(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Dx(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&We.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||We.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=Ie.from(r[1]),r[0]):t}function Fx(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Hx(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&We.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&We.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&We.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&We.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&We.throwArgumentError("unable to determine stateMutability","value",t),e}class un extends wn{format(e){if(e||(e=nt.sighash),nt[e]||We.throwArgumentError("invalid format type","format",e),e===nt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===nt.sighash&&We.throwError("cannot format a constructor for sighash",ce.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===nt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?un.fromString(e):un.fromObject(e)}static fromObject(e){if(un.isConstructorFragment(e))return e;e.type!=="constructor"&&We.throwArgumentError("invalid constructor object","value",e);let r=Hx(e);r.constant&&We.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Zt.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Ie.from(e.gas):null};return new un(yi,n)}static fromString(e){let r={type:"constructor"};e=Dx(e,r);let n=e.match(Xs);return(!n||n[1].trim()!=="constructor")&&We.throwArgumentError("invalid constructor string","value",e),r.inputs=Vs(n[2].trim(),!1),Fx(n[3].trim(),r),un.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class ln extends un{format(e){if(e||(e=nt.sighash),nt[e]||We.throwArgumentError("invalid format type","format",e),e===nt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==nt.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===nt.full?", ":",")+") ",e!==nt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?ln.fromString(e):ln.fromObject(e)}static fromObject(e){if(ln.isFunctionFragment(e))return e;e.type!=="function"&&We.throwArgumentError("invalid function object","value",e);let r=Hx(e);const n={type:e.type,name:Js(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Zt.fromObject):[],outputs:e.outputs?e.outputs.map(Zt.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Ie.from(e.gas):null};return new ln(yi,n)}static fromString(e){let r={type:"function"};e=Dx(e,r);let n=e.split(" returns ");n.length>2&&We.throwArgumentError("invalid function string","value",e);let i=n[0].match(Xs);if(i||We.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&Js(r.name),r.inputs=Vs(i[2],!1),Fx(i[3].trim(),r),n.length>1){let s=n[1].match(Xs);(s[1].trim()!=""||s[3].trim()!="")&&We.throwArgumentError("unexpected tokens","value",e),r.outputs=Vs(s[2],!1)}else r.outputs=[];return ln.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function kd(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&We.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Un extends wn{format(e){if(e||(e=nt.sighash),nt[e]||We.throwArgumentError("invalid format type","format",e),e===nt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==nt.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===nt.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?Un.fromString(e):Un.fromObject(e)}static fromObject(e){if(Un.isErrorFragment(e))return e;e.type!=="error"&&We.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:Js(e.name),inputs:e.inputs?e.inputs.map(Zt.fromObject):[]};return kd(new Un(yi,r))}static fromString(e){let r={type:"error"},n=e.match(Xs);return n||We.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&Js(r.name),r.inputs=Vs(n[2],!1),kd(Un.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Ii(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const Yw=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Js(t){return(!t||!t.match(Yw))&&We.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Xs=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function Zw(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&We.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Xu=new ce(ha);function Qw(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{r(a,i[s])}catch(o){e.push({path:a,error:o})}}};return r([],t),e}class Sn{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Xu.throwArgumentError(e,this.localName,r)}}class au{constructor(e){ae(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return fi(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(_r(e._data))}writeBytes(e){let r=fe(e);const n=r.length%this.wordSize;return n&&(r=_r([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=fe(Ie.from(e));return r.length>this.wordSize&&Xu.throwError("value out-of-bounds",ce.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=_r([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class uo{constructor(e,r,n,i){ae(this,"_data",fe(e)),ae(this,"wordSize",r||32),ae(this,"_coerceFunc",n),ae(this,"allowLoose",i),this._offset=0}get data(){return ve(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):uo.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Xu.throwError("data out-of-bounds",ce.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new uo(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return Ie.from(this.readBytes(this.wordSize))}}class ev extends Sn{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Yt(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Yt(Er(e.readValue().toHexString(),20))}}class tv extends Sn{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const Ni=new ce(ha);function Kx(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const f=u.localName;return f||Ni.throwError("cannot encode object for signature with missing names",ce.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[f]&&Ni.throwError("cannot encode object for signature with duplicate names",ce.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[f]=!0,r[f]})}else Ni.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&Ni.throwArgumentError("types/value length mismatch","tuple",r);let i=new au(t.wordSize),s=new au(t.wordSize),a=[];e.forEach((c,u)=>{let f=n[u];if(c.dynamic){let d=s.length;c.encode(s,f);let h=i.writeUpdatableValue();a.push(g=>{h(g+d)})}else c.encode(i,f)}),a.forEach(c=>{c(i.length)});let o=t.appendWriter(i);return o+=t.appendWriter(s),o}function zx(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let a=null;if(s.dynamic){let o=t.readValue(),c=n.subReader(o.toNumber());try{a=s.decode(c)}catch(u){if(u.code===ce.errors.BUFFER_OVERRUN)throw u;a=u,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(t)}catch(o){if(o.code===ce.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}a!=null&&r.push(a)});const i=e.reduce((s,a)=>{const o=a.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});e.forEach((s,a)=>{let o=s.localName;if(!o||i[o]!==1||(o==="length"&&(o="_length"),r[o]!=null))return;const c=r[a];c instanceof Error?Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw c}}):r[o]=c});for(let s=0;s<r.length;s++){const a=r[s];a instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(r)}class rv extends Sn{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),Ni.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return Kx(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&Ni.throwError("insufficient data length",ce.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new tv(this.coder));return e.coerce(this.name,zx(e,n))}}class nv extends Sn{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class $x extends Sn{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=fe(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class iv extends $x{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,ve(super.decode(e)))}}class sv extends Sn{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=fe(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,ve(e.readBytes(this.size)))}}class av extends Sn{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class ov extends Sn{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=Ie.from(r),i=um.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(fm).mul(om)))&&this._throwError("value out-of-bounds",r)}else(n.lt(cm)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}class cv extends $x{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,hn(r))}decode(e){return gm(super.decode(e))}}class ka extends Sn{constructor(e,r){let n=!1;const i=[];e.forEach(a=>{a.dynamic&&(n=!0),i.push(a.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return Kx(e,this.coders,r)}decode(e){return e.coerce(this.name,zx(e,this.coders))}}const Ba=new ce(ha),fv=new RegExp(/^bytes([0-9]*)$/),uv=new RegExp(/^(u?int)([0-9]*)$/);class lv{constructor(e){ae(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new ev(e.name);case"bool":return new nv(e.name);case"string":return new cv(e.name);case"bytes":return new iv(e.name);case"array":return new rv(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new ka((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new av(e.name)}let r=e.type.match(uv);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Ba.throwArgumentError("invalid "+r[1]+" bit length","param",e),new ov(n/8,r[1]==="int",e.name)}if(r=e.type.match(fv),r){let n=parseInt(r[1]);return(n===0||n>32)&&Ba.throwArgumentError("invalid bytes length","param",e),new sv(n,e.name)}return Ba.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new uo(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new au(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(Zt.from(i)));return new ka(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Ba.throwError("types/values length mismatch",ce.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(a=>this._getCoder(Zt.from(a))),i=new ka(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(a=>this._getCoder(Zt.from(a)));return new ka(i,"_").decode(this._getReader(fe(r),n))}}const dv=new lv,Ot=new ce(ha);class hv extends Xi{}class pv extends Xi{}class xv extends Xi{}class ou extends Xi{static isIndexed(e){return!!(e&&e._isIndexed)}}const yv={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Bd(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class Md{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,ae(this,"fragments",r.map(n=>wn.from(n)).filter(n=>n!=null)),ae(this,"_abiCoder",Ms(new.target,"getAbiCoder")()),ae(this,"functions",{}),ae(this,"errors",{}),ae(this,"events",{}),ae(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Ot.warn("duplicate definition - constructor");return}ae(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Ot.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||ae(this,"deploy",un.from({payable:!1,type:"constructor"})),ae(this,"_isInterface",!0)}format(e){e||(e=nt.full),e===nt.sighash&&Ot.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===nt.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return dv}static getAddress(e){return Yt(e)}static getSighash(e){return pi(oi(e.format()),0,4)}static getEventTopic(e){return oi(e.format())}getFunction(e){if(Gt(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Ot.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Ot.throwArgumentError("no matching function","name",n):i.length>1&&Ot.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[ln.fromString(e).format()];return r||Ot.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Gt(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Ot.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Ot.throwArgumentError("no matching event","name",n):i.length>1&&Ot.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[bn.fromString(e).format()];return r||Ot.throwArgumentError("no matching event","signature",e),r}getError(e){if(Gt(e)){const n=Ms(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Ot.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Ot.throwArgumentError("no matching error","name",n):i.length>1&&Ot.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[ln.fromString(e).format()];return r||Ot.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Ms(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Ms(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=fe(r);return ve(n.slice(0,4))!==this.getSighash(e)&&Ot.throwArgumentError(`data signature does not match error ${e.name}.`,"data",ve(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),ve(_r([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=fe(r);return ve(n.slice(0,4))!==this.getSighash(e)&&Ot.throwArgumentError(`data signature does not match function ${e.name}.`,"data",ve(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),ve(_r([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=fe(r),i=null,s="",a=null,o=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const u=ve(n.slice(0,4)),f=yv[u];if(f)a=this._abiCoder.decode(f.inputs,n.slice(4)),o=f.name,c=f.signature,f.reason&&(i=a[0]),o==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const d=this.getError(u);a=this._abiCoder.decode(d.inputs,n.slice(4)),o=d.name,c=d.format()}catch{}break}}return Ot.throwError("call revert exception"+s,ce.errors.CALL_EXCEPTION,{method:e.format(),data:ve(r),errorArgs:a,errorName:o,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),ve(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Ot.throwError("too many arguments for "+e.format(),ce.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,a)=>s.type==="string"?oi(a):s.type==="bytes"?Qt(ve(a)):(s.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),s.type.match(/^u?int/)&&(a=Ie.from(a).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[a]),Er(ve(a),32));for(r.forEach((s,a)=>{let o=e.inputs[a];if(!o.indexed){s!=null&&Ot.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?Ot.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(c=>i(o,c))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Ot.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((a,o)=>{const c=r[o];if(a.indexed)if(a.type==="string")n.push(oi(c));else if(a.type==="bytes")n.push(Qt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[c]))}else i.push(a),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let h=this.getEventTopic(e);(!Gt(n[0],32)||n[0].toLowerCase()!==h)&&Ot.throwError("fragment/topic mismatch",ce.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:h,value:n[0]}),n=n.slice(1)}let i=[],s=[],a=[];e.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Zt.fromObject({type:"bytes32",name:h.name})),a.push(!0)):(i.push(h),a.push(!1)):(s.push(h),a.push(!1))});let o=n!=null?this._abiCoder.decode(i,_r(n)):null,c=this._abiCoder.decode(s,r,!0),u=[],f=0,d=0;e.inputs.forEach((h,g)=>{if(h.indexed)if(o==null)u[g]=new ou({_isIndexed:!0,hash:null});else if(a[g])u[g]=new ou({_isIndexed:!0,hash:o[d++]});else try{u[g]=o[d++]}catch(b){u[g]=b}else try{u[g]=c[f++]}catch(b){u[g]=b}if(h.name&&u[h.name]==null){const b=u[g];b instanceof Error?Object.defineProperty(u,h.name,{enumerable:!0,get:()=>{throw Bd(`property ${JSON.stringify(h.name)}`,b)}}):u[h.name]=b}});for(let h=0;h<u.length;h++){const g=u[h];g instanceof Error&&Object.defineProperty(u,h,{enumerable:!0,get:()=>{throw Bd(`index ${h}`,g)}})}return Object.freeze(u)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new pv({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:Ie.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new hv({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=ve(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new xv({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const gv="contracts/5.8.0";var gi=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const $t=new ce(gv);function lo(t,e){return gi(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&$t.throwArgumentError("invalid address or ENS name","name",r);try{return Yt(r)}catch{}t||$t.throwError("a provider or signer is needed to resolve ENS names",ce.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&$t.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function ja(t,e,r){return gi(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>ja(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield lo(t,e):r.type==="tuple"?yield ja(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>ja(t,n,r.arrayChildren))):Promise.reject($t.makeError("invalid value for array",ce.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function ko(t,e,r){return gi(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=qn(r.pop())),$t.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=mn({override:lo(t.signer,n.from),signer:t.signer.getAddress()}).then(u=>gi(this,void 0,void 0,function*(){return Yt(u.signer)!==u.override&&$t.throwError("Contract with a Signer cannot override from",ce.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):n.from=t.signer.getAddress():n.from&&(n.from=lo(t.provider,n.from));const i=yield mn({args:ja(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:mn(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),a={data:s,to:i.address},o=i.overrides;if(o.nonce!=null&&(a.nonce=Ie.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=Ie.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=Ie.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=Ie.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=Ie.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=Xp(o.accessList)),a.gasLimit==null&&e.gas!=null){let u=21e3;const f=fe(s);for(let d=0;d<f.length;d++)u+=4,f[d]&&(u+=64);a.gasLimit=Ie.from(e.gas).add(u)}if(o.value){const u=Ie.from(o.value);!u.isZero()&&!e.payable&&$t.throwError("non-payable method cannot override value",ce.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=u}o.customData&&(a.customData=qn(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(u=>n[u]!=null);return c.length&&$t.throwError(`cannot override ${c.map(u=>JSON.stringify(u)).join(",")}`,ce.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),a})}function bv(t,e){return function(...r){return ko(t,e,r)}}function mv(t,e){const r=t.signer||t.provider;return function(...n){return gi(this,void 0,void 0,function*(){r||$t.throwError("estimate require a provider or signer",ce.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield ko(t,e,n);return yield r.estimateGas(i)})}}function wv(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let a=zi(s),o=null;try{o=t.interface.parseLog(s)}catch{}return o&&(a.args=o.args,a.decode=(c,u)=>t.interface.decodeEventLog(o.eventFragment,c,u),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(i.blockHash),a.getTransaction=()=>t.provider.getTransaction(i.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(i),a}),i))}function jx(t,e,r){const n=t.signer||t.provider;return function(...i){return gi(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=qn(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const a=yield ko(t,e,i),o=yield n.call(a,s);try{let c=t.interface.decodeFunctionResult(e,o);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===ce.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=a),c}})}}function vv(t,e){return function(...r){return gi(this,void 0,void 0,function*(){t.signer||$t.throwError("sending a transaction requires a signer",ce.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield ko(t,e,r),i=yield t.signer.sendTransaction(n);return wv(t,i),i})}}function Cd(t,e,r){return e.constant?jx(t,e,r):vv(t,e)}function Gx(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Ys{constructor(e,r){ae(this,"tag",e),ae(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class _v extends Ys{constructor(){super("error",null)}}class Id extends Ys{constructor(e,r,n,i){const s={address:e};let a=r.getEventTopic(n);i?(a!==i[0]&&$t.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[a],super(Gx(s),s),ae(this,"address",e),ae(this,"interface",r),ae(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Qw(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class Ud extends Ys{constructor(e,r){super("*",{address:e}),ae(this,"address",e),ae(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class Ev{constructor(e,r,n){ae(this,"interface",Ms(new.target,"getInterface")(r)),n==null?(ae(this,"provider",null),ae(this,"signer",null)):fa.isSigner(n)?(ae(this,"provider",n.provider||null),ae(this,"signer",n)):Zp.isProvider(n)?(ae(this,"provider",n),ae(this,"signer",null)):$t.throwArgumentError("invalid signer or provider","signerOrProvider",n),ae(this,"callStatic",{}),ae(this,"estimateGas",{}),ae(this,"functions",{}),ae(this,"populateTransaction",{}),ae(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const c=this.interface.events[o];ae(this.filters,o,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,u)})),a[c.name]||(a[c.name]=[]),a[c.name].push(o)}),Object.keys(a).forEach(o=>{const c=a[o];c.length===1?ae(this.filters,o,this.filters[c[0]]):$t.warn(`Duplicate definition of ${o} (${c.join(", ")})`)})}if(ae(this,"_runningEvents",{}),ae(this,"_wrappedEmits",{}),e==null&&$t.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ae(this,"address",e),this.provider)ae(this,"resolvedAddress",lo(this.provider,e));else try{ae(this,"resolvedAddress",Promise.resolve(Yt(e)))}catch{$t.throwError("provider is required to use ENS name as contract address",ce.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const i={},s={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(s[a]){$t.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}s[a]=!0;{const c=o.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(a)}this[a]==null&&ae(this,a,Cd(this,o,!0)),this.functions[a]==null&&ae(this.functions,a,Cd(this,o,!1)),this.callStatic[a]==null&&ae(this.callStatic,a,jx(this,o,!0)),this.populateTransaction[a]==null&&ae(this.populateTransaction,a,bv(this,o)),this.estimateGas[a]==null&&ae(this.estimateGas,a,mv(this,o))}),Object.keys(i).forEach(a=>{const o=i[a];if(o.length>1)return;a=a.substring(1);const c=o[0];try{this[a]==null&&ae(this,a,this[c])}catch{}this.functions[a]==null&&ae(this.functions,a,this.functions[c]),this.callStatic[a]==null&&ae(this.callStatic,a,this.callStatic[c]),this.populateTransaction[a]==null&&ae(this.populateTransaction,a,this.populateTransaction[c]),this.estimateGas[a]==null&&ae(this.estimateGas,a,this.estimateGas[c])})}static getContractAddress(e){return Tm(e)}static getInterface(e){return Md.isInterface(e)?e:new Md(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&$t.throwError("contract not deployed",ce.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||$t.throwError("sending a transactions require a signer",ce.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=qn(e||{});return["from","to"].forEach(function(n){r[n]!=null&&$t.throwError("cannot override "+n,ce.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Pu(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ae(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return ou.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new _v);if(e==="event")return this._normalizeRunningEvent(new Ys("event",null));if(e==="*")return this._normalizeRunningEvent(new Ud(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new Id(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new Id(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Ys(Gx(r),r))}return this._normalizeRunningEvent(new Ud(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=zi(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||$t.throwError("events require a provider or a signer with a provider",ce.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let a=this._wrapEvent(e,s,r);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=qn(i.filter);return typeof r=="string"&&Gt(r,32)?(n!=null&&$t.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(a=>a.map(o=>this._wrapEvent(i,o,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Sv extends Ev{}class Av extends Ro{contractInstance;contractAddress;constructor(e){super(e),this.contractAddress=e.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new Sv(this.contractAddress,Tv,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(e){const r=await this.providerInstance.getTransaction(e);if(!r)throw new Error("Tx doesn't exist");if(r.data.length!==138||r.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const n=`0x${r.data.slice(34,74)}`,i=new Ue(r.data.slice(74),16);return{from:r.from,to:n,blockHeight:r.blockNumber?new Ue(r.blockNumber):void 0,amount:i,pending:!r.blockNumber,confirmed:r.confirmations>=this.minConfirm}}async getFee(e,r){const n="0x"+new Ue(e).toString(16),i=await this.getContract(),s=await this.providerInstance.getGasPrice(),a=await i.estimateGas.transfer(r,n),o=new Ue(s.mul(a).toString()),[c]=await this.getGas(),u=c.multipliedBy(o),f=new Ue(await this.price());return new Ue(u).dividedToIntegerBy(f)}async createTx(e,r,n){const i=await this.getContract(),s="0x"+new Ue(e).toString(16),a=await i.populateTransaction.transfer(r,s);if(a.gasPrice=await this.providerInstance.getGasPrice(),a.gasLimit=await i.estimateGas.transfer(r,s),a.chainId=(await this.providerInstance.getNetwork()).chainId,!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");return a.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:a}}async getGas(){return[new Ue(await Bx("ETH")),1e18]}}const Tv=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];var Rv=da();const Ma=Mr(Rv);var pr={},ur={},Od;function Bo(){if(Od)return ur;Od=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.output=ur.exists=ur.hash=ur.bytes=ur.bool=ur.number=void 0;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error(`Wrong positive integer: ${o}`)}ur.number=t;function e(o){if(typeof o!="boolean")throw new Error(`Expected boolean, not ${o}`)}ur.bool=e;function r(o,...c){if(!(o instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length>0&&!c.includes(o.length))throw new TypeError(`Expected Uint8Array of length ${c}, not of length=${o.length}`)}ur.bytes=r;function n(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}ur.hash=n;function i(o,c=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(c&&o.finished)throw new Error("Hash#digest() has already been called")}ur.exists=i;function s(o,c){r(o);const u=c.outputLen;if(o.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}ur.output=s;const a={number:t,bool:e,bytes:r,hash:n,exists:i,output:s};return ur.default=a,ur}var ri={},sf={},af={},_s={},qd;function Pv(){return qd||(qd=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.crypto=void 0,_s.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}),_s}var Nd;function Qi(){return Nd||(Nd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=Pv(),r=U=>new Uint8Array(U.buffer,U.byteOffset,U.byteLength);t.u8=r;const n=U=>new Uint32Array(U.buffer,U.byteOffset,Math.floor(U.byteLength/4));t.u32=n;const i=U=>new DataView(U.buffer,U.byteOffset,U.byteLength);t.createView=i;const s=(U,O)=>U<<32-O|U>>>O;if(t.rotr=s,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},(U,O)=>O.toString(16).padStart(2,"0"));function o(U){if(!(U instanceof Uint8Array))throw new Error("Uint8Array expected");let O="";for(let $=0;$<U.length;$++)O+=a[U[$]];return O}t.bytesToHex=o;function c(U){if(typeof U!="string")throw new TypeError("hexToBytes: expected string, got "+typeof U);if(U.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const O=new Uint8Array(U.length/2);for(let $=0;$<O.length;$++){const J=$*2,Y=U.slice(J,J+2),ee=Number.parseInt(Y,16);if(Number.isNaN(ee)||ee<0)throw new Error("Invalid byte sequence");O[$]=ee}return O}t.hexToBytes=c;const u=async()=>{};t.nextTick=u;async function f(U,O,$){let J=Date.now();for(let Y=0;Y<U;Y++){$(Y);const ee=Date.now()-J;ee>=0&&ee<O||(await(0,t.nextTick)(),J+=ee)}}t.asyncLoop=f;function d(U){if(typeof U!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof U}`);return new TextEncoder().encode(U)}t.utf8ToBytes=d;function h(U){if(typeof U=="string"&&(U=d(U)),!(U instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof U})`);return U}t.toBytes=h;function g(...U){if(!U.every(J=>J instanceof Uint8Array))throw new Error("Uint8Array list expected");if(U.length===1)return U[0];const O=U.reduce((J,Y)=>J+Y.length,0),$=new Uint8Array(O);for(let J=0,Y=0;J<U.length;J++){const ee=U[J];$.set(ee,Y),Y+=ee.length}return $}t.concatBytes=g;class b{clone(){return this._cloneInto()}}t.Hash=b;const S=U=>Object.prototype.toString.call(U)==="[object Object]"&&U.constructor===Object;function _(U,O){if(O!==void 0&&(typeof O!="object"||!S(O)))throw new TypeError("Options should be object or undefined");return Object.assign(U,O)}t.checkOpts=_;function C(U){const O=J=>U().update(h(J)).digest(),$=U();return O.outputLen=$.outputLen,O.blockLen=$.blockLen,O.create=()=>U(),O}t.wrapConstructor=C;function F(U){const O=(J,Y)=>U(Y).update(h(J)).digest(),$=U({});return O.outputLen=$.outputLen,O.blockLen=$.blockLen,O.create=J=>U(J),O}t.wrapConstructorWithOpts=F;function q(U=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(U));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(U).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=q})(af)),af}var Ld;function kv(){return Ld||(Ld=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=void 0;const e=Bo(),r=Qi();class n extends r.Hash{constructor(a,o){super(),this.finished=!1,this.destroyed=!1,e.default.hash(a);const c=(0,r.toBytes)(o);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,f=new Uint8Array(u);f.set(c.length>u?a.create().update(c).digest():c);for(let d=0;d<f.length;d++)f[d]^=54;this.iHash.update(f),this.oHash=a.create();for(let d=0;d<f.length;d++)f[d]^=106;this.oHash.update(f),f.fill(0)}update(a){return e.default.exists(this),this.iHash.update(a),this}digestInto(a){e.default.exists(this),e.default.bytes(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:c,finished:u,destroyed:f,blockLen:d,outputLen:h}=this;return a=a,a.finished=u,a.destroyed=f,a.blockLen=d,a.outputLen=h,a.oHash=o._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,a,o)=>new n(s,a).update(o).digest();t.hmac=i,t.hmac.create=(s,a)=>new n(s,a)})(sf)),sf}var Dd;function Bv(){if(Dd)return ri;Dd=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.pbkdf2Async=ri.pbkdf2=void 0;const t=Bo(),e=kv(),r=Qi();function n(o,c,u,f){t.default.hash(o);const d=(0,r.checkOpts)({dkLen:32,asyncTick:10},f),{c:h,dkLen:g,asyncTick:b}=d;if(t.default.number(h),t.default.number(g),t.default.number(b),h<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const S=(0,r.toBytes)(c),_=(0,r.toBytes)(u),C=new Uint8Array(g),F=e.hmac.create(o,S),q=F._cloneInto().update(_);return{c:h,dkLen:g,asyncTick:b,DK:C,PRF:F,PRFSalt:q}}function i(o,c,u,f,d){return o.destroy(),c.destroy(),f&&f.destroy(),d.fill(0),u}function s(o,c,u,f){const{c:d,dkLen:h,DK:g,PRF:b,PRFSalt:S}=n(o,c,u,f);let _;const C=new Uint8Array(4),F=(0,r.createView)(C),q=new Uint8Array(b.outputLen);for(let U=1,O=0;O<h;U++,O+=b.outputLen){const $=g.subarray(O,O+b.outputLen);F.setInt32(0,U,!1),(_=S._cloneInto(_)).update(C).digestInto(q),$.set(q.subarray(0,$.length));for(let J=1;J<d;J++){b._cloneInto(_).update(q).digestInto(q);for(let Y=0;Y<$.length;Y++)$[Y]^=q[Y]}}return i(b,S,g,_,q)}ri.pbkdf2=s;async function a(o,c,u,f){const{c:d,dkLen:h,asyncTick:g,DK:b,PRF:S,PRFSalt:_}=n(o,c,u,f);let C;const F=new Uint8Array(4),q=(0,r.createView)(F),U=new Uint8Array(S.outputLen);for(let O=1,$=0;$<h;O++,$+=S.outputLen){const J=b.subarray($,$+S.outputLen);q.setInt32(0,O,!1),(C=_._cloneInto(C)).update(F).digestInto(U),J.set(U.subarray(0,J.length)),await(0,r.asyncLoop)(d-1,g,Y=>{S._cloneInto(C).update(U).digestInto(U);for(let ee=0;ee<J.length;ee++)J[ee]^=U[ee]})}return i(S,_,b,C,U)}return ri.pbkdf2Async=a,ri}var ni={},Es={},Fd;function Wx(){if(Fd)return Es;Fd=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SHA2=void 0;const t=Bo(),e=Qi();function r(i,s,a,o){if(typeof i.setBigUint64=="function")return i.setBigUint64(s,a,o);const c=BigInt(32),u=BigInt(4294967295),f=Number(a>>c&u),d=Number(a&u),h=o?4:0,g=o?0:4;i.setUint32(s+h,f,o),i.setUint32(s+g,d,o)}class n extends e.Hash{constructor(s,a,o,c){super(),this.blockLen=s,this.outputLen=a,this.padOffset=o,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=(0,e.createView)(this.buffer)}update(s){t.default.exists(this);const{view:a,buffer:o,blockLen:c}=this;s=(0,e.toBytes)(s);const u=s.length;for(let f=0;f<u;){const d=Math.min(c-this.pos,u-f);if(d===c){const h=(0,e.createView)(s);for(;c<=u-f;f+=c)this.process(h,f);continue}o.set(s.subarray(f,f+d),this.pos),this.pos+=d,f+=d,this.pos===c&&(this.process(a,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){t.default.exists(this),t.default.output(s,this),this.finished=!0;const{buffer:a,view:o,blockLen:c,isLE:u}=this;let{pos:f}=this;a[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>c-f&&(this.process(o,0),f=0);for(let S=f;S<c;S++)a[S]=0;r(o,c-8,BigInt(this.length*8),u),this.process(o,0);const d=(0,e.createView)(s),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=h/4,b=this.get();if(g>b.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<g;S++)d.setUint32(4*S,b[S],u)}digest(){const{buffer:s,outputLen:a}=this;this.digestInto(s);const o=s.slice(0,a);return this.destroy(),o}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:a,buffer:o,length:c,finished:u,destroyed:f,pos:d}=this;return s.length=c,s.pos=d,s.finished=u,s.destroyed=f,c%a&&s.buffer.set(o),s}}return Es.SHA2=n,Es}var Hd;function Mv(){if(Hd)return ni;Hd=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.sha224=ni.sha256=void 0;const t=Wx(),e=Qi(),r=(u,f,d)=>u&f^~u&d,n=(u,f,d)=>u&f^u&d^f&d,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class o extends t.SHA2{constructor(){super(64,32,8,!1),this.A=s[0]|0,this.B=s[1]|0,this.C=s[2]|0,this.D=s[3]|0,this.E=s[4]|0,this.F=s[5]|0,this.G=s[6]|0,this.H=s[7]|0}get(){const{A:f,B:d,C:h,D:g,E:b,F:S,G:_,H:C}=this;return[f,d,h,g,b,S,_,C]}set(f,d,h,g,b,S,_,C){this.A=f|0,this.B=d|0,this.C=h|0,this.D=g|0,this.E=b|0,this.F=S|0,this.G=_|0,this.H=C|0}process(f,d){for(let U=0;U<16;U++,d+=4)a[U]=f.getUint32(d,!1);for(let U=16;U<64;U++){const O=a[U-15],$=a[U-2],J=(0,e.rotr)(O,7)^(0,e.rotr)(O,18)^O>>>3,Y=(0,e.rotr)($,17)^(0,e.rotr)($,19)^$>>>10;a[U]=Y+a[U-7]+J+a[U-16]|0}let{A:h,B:g,C:b,D:S,E:_,F:C,G:F,H:q}=this;for(let U=0;U<64;U++){const O=(0,e.rotr)(_,6)^(0,e.rotr)(_,11)^(0,e.rotr)(_,25),$=q+O+r(_,C,F)+i[U]+a[U]|0,Y=((0,e.rotr)(h,2)^(0,e.rotr)(h,13)^(0,e.rotr)(h,22))+n(h,g,b)|0;q=F,F=C,C=_,_=S+$|0,S=b,b=g,g=h,h=$+Y|0}h=h+this.A|0,g=g+this.B|0,b=b+this.C|0,S=S+this.D|0,_=_+this.E|0,C=C+this.F|0,F=F+this.G|0,q=q+this.H|0,this.set(h,g,b,S,_,C,F,q)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class c extends o{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}return ni.sha256=(0,e.wrapConstructor)(()=>new o),ni.sha224=(0,e.wrapConstructor)(()=>new c),ni}var Ar={},of={},Kd;function Cv(){return Kd||(Kd=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.toBig=t.split=t.fromBig=void 0;const e=BigInt(2**32-1),r=BigInt(32);function n(Z,P=!1){return P?{h:Number(Z&e),l:Number(Z>>r&e)}:{h:Number(Z>>r&e)|0,l:Number(Z&e)|0}}t.fromBig=n;function i(Z,P=!1){let l=new Uint32Array(Z.length),x=new Uint32Array(Z.length);for(let m=0;m<Z.length;m++){const{h:A,l:v}=n(Z[m],P);[l[m],x[m]]=[A,v]}return[l,x]}t.split=i;const s=(Z,P)=>BigInt(Z>>>0)<<r|BigInt(P>>>0);t.toBig=s;const a=(Z,P,l)=>Z>>>l,o=(Z,P,l)=>Z<<32-l|P>>>l,c=(Z,P,l)=>Z>>>l|P<<32-l,u=(Z,P,l)=>Z<<32-l|P>>>l,f=(Z,P,l)=>Z<<64-l|P>>>l-32,d=(Z,P,l)=>Z>>>l-32|P<<64-l,h=(Z,P)=>P,g=(Z,P)=>Z,b=(Z,P,l)=>Z<<l|P>>>32-l,S=(Z,P,l)=>P<<l|Z>>>32-l,_=(Z,P,l)=>P<<l-32|Z>>>64-l,C=(Z,P,l)=>Z<<l-32|P>>>64-l;function F(Z,P,l,x){const m=(P>>>0)+(x>>>0);return{h:Z+l+(m/2**32|0)|0,l:m|0}}t.add=F;const q=(Z,P,l)=>(Z>>>0)+(P>>>0)+(l>>>0),U=(Z,P,l,x)=>P+l+x+(Z/2**32|0)|0,O=(Z,P,l,x)=>(Z>>>0)+(P>>>0)+(l>>>0)+(x>>>0),$=(Z,P,l,x,m)=>P+l+x+m+(Z/2**32|0)|0,J=(Z,P,l,x,m)=>(Z>>>0)+(P>>>0)+(l>>>0)+(x>>>0)+(m>>>0),Y=(Z,P,l,x,m,A)=>P+l+x+m+A+(Z/2**32|0)|0,ee={fromBig:n,split:i,toBig:t.toBig,shrSH:a,shrSL:o,rotrSH:c,rotrSL:u,rotrBH:f,rotrBL:d,rotr32H:h,rotr32L:g,rotlSH:b,rotlSL:S,rotlBH:_,rotlBL:C,add:F,add3L:q,add3H:U,add4L:O,add4H:$,add5H:Y,add5L:J};t.default=ee})(of)),of}var zd;function Iv(){if(zd)return Ar;zd=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.sha384=Ar.sha512_256=Ar.sha512_224=Ar.sha512=Ar.SHA512=void 0;const t=Wx(),e=Cv(),r=Qi(),[n,i]=e.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(d=>BigInt(d))),s=new Uint32Array(80),a=new Uint32Array(80);class o extends t.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:h,Al:g,Bh:b,Bl:S,Ch:_,Cl:C,Dh:F,Dl:q,Eh:U,El:O,Fh:$,Fl:J,Gh:Y,Gl:ee,Hh:Z,Hl:P}=this;return[h,g,b,S,_,C,F,q,U,O,$,J,Y,ee,Z,P]}set(h,g,b,S,_,C,F,q,U,O,$,J,Y,ee,Z,P){this.Ah=h|0,this.Al=g|0,this.Bh=b|0,this.Bl=S|0,this.Ch=_|0,this.Cl=C|0,this.Dh=F|0,this.Dl=q|0,this.Eh=U|0,this.El=O|0,this.Fh=$|0,this.Fl=J|0,this.Gh=Y|0,this.Gl=ee|0,this.Hh=Z|0,this.Hl=P|0}process(h,g){for(let m=0;m<16;m++,g+=4)s[m]=h.getUint32(g),a[m]=h.getUint32(g+=4);for(let m=16;m<80;m++){const A=s[m-15]|0,v=a[m-15]|0,M=e.default.rotrSH(A,v,1)^e.default.rotrSH(A,v,8)^e.default.shrSH(A,v,7),I=e.default.rotrSL(A,v,1)^e.default.rotrSL(A,v,8)^e.default.shrSL(A,v,7),B=s[m-2]|0,y=a[m-2]|0,E=e.default.rotrSH(B,y,19)^e.default.rotrBH(B,y,61)^e.default.shrSH(B,y,6),H=e.default.rotrSL(B,y,19)^e.default.rotrBL(B,y,61)^e.default.shrSL(B,y,6),z=e.default.add4L(I,H,a[m-7],a[m-16]),L=e.default.add4H(z,M,E,s[m-7],s[m-16]);s[m]=L|0,a[m]=z|0}let{Ah:b,Al:S,Bh:_,Bl:C,Ch:F,Cl:q,Dh:U,Dl:O,Eh:$,El:J,Fh:Y,Fl:ee,Gh:Z,Gl:P,Hh:l,Hl:x}=this;for(let m=0;m<80;m++){const A=e.default.rotrSH($,J,14)^e.default.rotrSH($,J,18)^e.default.rotrBH($,J,41),v=e.default.rotrSL($,J,14)^e.default.rotrSL($,J,18)^e.default.rotrBL($,J,41),M=$&Y^~$&Z,I=J&ee^~J&P,B=e.default.add5L(x,v,I,i[m],a[m]),y=e.default.add5H(B,l,A,M,n[m],s[m]),E=B|0,H=e.default.rotrSH(b,S,28)^e.default.rotrBH(b,S,34)^e.default.rotrBH(b,S,39),z=e.default.rotrSL(b,S,28)^e.default.rotrBL(b,S,34)^e.default.rotrBL(b,S,39),L=b&_^b&F^_&F,D=S&C^S&q^C&q;l=Z|0,x=P|0,Z=Y|0,P=ee|0,Y=$|0,ee=J|0,{h:$,l:J}=e.default.add(U|0,O|0,y|0,E|0),U=F|0,O=q|0,F=_|0,q=C|0,_=b|0,C=S|0;const ne=e.default.add3L(E,z,D);b=e.default.add3H(ne,y,H,L),S=ne|0}({h:b,l:S}=e.default.add(this.Ah|0,this.Al|0,b|0,S|0)),{h:_,l:C}=e.default.add(this.Bh|0,this.Bl|0,_|0,C|0),{h:F,l:q}=e.default.add(this.Ch|0,this.Cl|0,F|0,q|0),{h:U,l:O}=e.default.add(this.Dh|0,this.Dl|0,U|0,O|0),{h:$,l:J}=e.default.add(this.Eh|0,this.El|0,$|0,J|0),{h:Y,l:ee}=e.default.add(this.Fh|0,this.Fl|0,Y|0,ee|0),{h:Z,l:P}=e.default.add(this.Gh|0,this.Gl|0,Z|0,P|0),{h:l,l:x}=e.default.add(this.Hh|0,this.Hl|0,l|0,x|0),this.set(b,S,_,C,F,q,U,O,$,J,Y,ee,Z,P,l,x)}roundClean(){s.fill(0),a.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Ar.SHA512=o;class c extends o{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class u extends o{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class f extends o{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}return Ar.sha512=(0,r.wrapConstructor)(()=>new o),Ar.sha512_224=(0,r.wrapConstructor)(()=>new c),Ar.sha512_256=(0,r.wrapConstructor)(()=>new u),Ar.sha384=(0,r.wrapConstructor)(()=>new f),Ar}var cf={},$d;function Uv(){return $d||($d=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0,t.assertNumber=e;function e(l){if(!Number.isSafeInteger(l))throw new Error(`Wrong integer: ${l}`)}function r(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"}function n(...l){const x=M=>M,m=(M,I)=>B=>M(I(B)),A=l.map(M=>M.encode).reduceRight(m,x),v=l.map(M=>M.decode).reduce(m,x);return{encode:A,decode:v}}function i(l){return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return x.map(m=>{if(m<0||m>=l.length)throw new Error(`Digit index outside alphabet: ${m} (alphabet: ${l.length})`);return l[m]})},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("alphabet.decode input should be array of strings");return x.map(m=>{if(typeof m!="string")throw new Error(`alphabet.decode: not string element=${m}`);const A=l.indexOf(m);if(A===-1)throw new Error(`Unknown letter: "${m}". Allowed: ${l}`);return A})}}}function s(l=""){if(typeof l!="string")throw new Error("join separator should be string");return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("join.encode input should be array of strings");for(let m of x)if(typeof m!="string")throw new Error(`join.encode: non-string input=${m}`);return x.join(l)},decode:x=>{if(typeof x!="string")throw new Error("join.decode input should be string");return x.split(l)}}}function a(l,x="="){if(typeof x!="string")throw new Error("padding chr should be string");return{encode(m){if(!Array.isArray(m)||m.length&&typeof m[0]!="string")throw new Error("padding.encode input should be array of strings");for(let A of m)if(typeof A!="string")throw new Error(`padding.encode: non-string input=${A}`);for(;m.length*l%8;)m.push(x);return m},decode(m){if(!Array.isArray(m)||m.length&&typeof m[0]!="string")throw new Error("padding.encode input should be array of strings");for(let v of m)if(typeof v!="string")throw new Error(`padding.decode: non-string input=${v}`);let A=m.length;if(A*l%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;A>0&&m[A-1]===x;A--)if(!((A-1)*l%8))throw new Error("Invalid padding: string has too much padding");return m.slice(0,A)}}}function o(l){if(typeof l!="function")throw new Error("normalize fn should be function");return{encode:x=>x,decode:x=>l(x)}}function c(l,x,m){if(x<2)throw new Error(`convertRadix: wrong from=${x}, base cannot be less than 2`);if(m<2)throw new Error(`convertRadix: wrong to=${m}, base cannot be less than 2`);if(!Array.isArray(l))throw new Error("convertRadix: data should be array");if(!l.length)return[];let A=0;const v=[],M=Array.from(l);for(M.forEach(I=>{if(I<0||I>=x)throw new Error(`Wrong integer: ${I}`)});;){let I=0,B=!0;for(let y=A;y<M.length;y++){const E=M[y],H=x*I+E;if(!Number.isSafeInteger(H)||x*I/x!==I||H-E!==x*I)throw new Error("convertRadix: carry overflow");I=H%m;const z=Math.floor(H/m);if(M[y]=z,!Number.isSafeInteger(z)||z*m+I!==H)throw new Error("convertRadix: carry overflow");if(B)z?B=!1:A=y;else continue}if(v.push(I),B)break}for(let I=0;I<l.length-1&&l[I]===0;I++)v.push(0);return v.reverse()}const u=(l,x)=>x?u(x,l%x):l,f=(l,x)=>l+(x-u(l,x));function d(l,x,m,A){if(!Array.isArray(l))throw new Error("convertRadix2: data should be array");if(x<=0||x>32)throw new Error(`convertRadix2: wrong from=${x}`);if(m<=0||m>32)throw new Error(`convertRadix2: wrong to=${m}`);if(f(x,m)>32)throw new Error(`convertRadix2: carry overflow from=${x} to=${m} carryBits=${f(x,m)}`);let v=0,M=0;const I=2**m-1,B=[];for(const y of l){if(y>=2**x)throw new Error(`convertRadix2: invalid data word=${y} from=${x}`);if(v=v<<x|y,M+x>32)throw new Error(`convertRadix2: carry overflow pos=${M} from=${x}`);for(M+=x;M>=m;M-=m)B.push((v>>M-m&I)>>>0);v&=2**M-1}if(v=v<<m-M&I,!A&&M>=x)throw new Error("Excess padding");if(!A&&v)throw new Error(`Non-zero padding: ${v}`);return A&&M>0&&B.push(v>>>0),B}function h(l){return{encode:x=>{if(!r(x))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(x),2**8,l)},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(c(x,l,2**8))}}}function g(l,x=!1){if(l<=0||l>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,l)>32||f(l,8)>32)throw new Error("radix2: carry overflow");return{encode:m=>{if(!r(m))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(m),8,l,!x)},decode:m=>{if(!Array.isArray(m)||m.length&&typeof m[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(d(m,l,8,x))}}}function b(l){if(typeof l!="function")throw new Error("unsafeWrapper fn should be function");return function(...x){try{return l.apply(null,x)}catch{}}}function S(l,x){if(typeof x!="function")throw new Error("checksum fn should be function");return{encode(m){if(!r(m))throw new Error("checksum.encode: input should be Uint8Array");const A=x(m).slice(0,l),v=new Uint8Array(m.length+l);return v.set(m),v.set(A,m.length),v},decode(m){if(!r(m))throw new Error("checksum.decode: input should be Uint8Array");const A=m.slice(0,-l),v=x(A).slice(0,l),M=m.slice(-l);for(let I=0;I<l;I++)if(v[I]!==M[I])throw new Error("Invalid checksum");return A}}}t.utils={alphabet:i,chain:n,checksum:S,convertRadix:c,convertRadix2:d,radix:h,radix2:g,join:s,padding:a},t.base16=n(g(4),i("0123456789ABCDEF"),s("")),t.base32=n(g(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),s("")),t.base32nopad=n(g(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s("")),t.base32hex=n(g(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),s("")),t.base32hexnopad=n(g(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s("")),t.base32crockford=n(g(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),o(l=>l.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=n(g(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),s("")),t.base64nopad=n(g(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s("")),t.base64url=n(g(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),s("")),t.base64urlnopad=n(g(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(""));const _=l=>n(h(58),i(l),s(""));t.base58=_("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=_("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=_("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const C=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(l){let x="";for(let m=0;m<l.length;m+=8){const A=l.subarray(m,m+8);x+=t.base58.encode(A).padStart(C[A.length],"1")}return x},decode(l){let x=[];for(let m=0;m<l.length;m+=11){const A=l.slice(m,m+11),v=C.indexOf(A.length),M=t.base58.decode(A);for(let I=0;I<M.length-v;I++)if(M[I]!==0)throw new Error("base58xmr: wrong padding");x=x.concat(Array.from(M.slice(M.length-v)))}return Uint8Array.from(x)}};const F=l=>n(S(4,x=>l(l(x))),t.base58);t.createBase58check=F,t.base58check=t.createBase58check;const q=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),U=[996825010,642813549,513874426,1027748829,705979059];function O(l){const x=l>>25;let m=(l&33554431)<<5;for(let A=0;A<U.length;A++)(x>>A&1)===1&&(m^=U[A]);return m}function $(l,x,m=1){const A=l.length;let v=1;for(let M=0;M<A;M++){const I=l.charCodeAt(M);if(I<33||I>126)throw new Error(`Invalid prefix (${l})`);v=O(v)^I>>5}v=O(v);for(let M=0;M<A;M++)v=O(v)^l.charCodeAt(M)&31;for(let M of x)v=O(v)^M;for(let M=0;M<6;M++)v=O(v);return v^=m,q.encode(d([v%2**30],30,5,!1))}function J(l){const x=l==="bech32"?1:734539939,m=g(5),A=m.decode,v=m.encode,M=b(A);function I(z,L,D=90){if(typeof z!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof z}`);if(L instanceof Uint8Array&&(L=Array.from(L)),!Array.isArray(L)||L.length&&typeof L[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof L}`);if(z.length===0)throw new TypeError(`Invalid prefix length ${z.length}`);const ne=z.length+7+L.length;if(D!==!1&&ne>D)throw new TypeError(`Length ${ne} exceeds limit ${D}`);const we=z.toLowerCase(),Te=$(we,L,x);return`${we}1${q.encode(L)}${Te}`}function B(z,L=90){if(typeof z!="string")throw new Error(`bech32.decode input should be string, not ${typeof z}`);if(z.length<8||L!==!1&&z.length>L)throw new TypeError(`Wrong string length: ${z.length} (${z}). Expected (8..${L})`);const D=z.toLowerCase();if(z!==D&&z!==z.toUpperCase())throw new Error("String must be lowercase or uppercase");const ne=D.lastIndexOf("1");if(ne===0||ne===-1)throw new Error('Letter "1" must be present between prefix and data only');const we=D.slice(0,ne),Te=D.slice(ne+1);if(Te.length<6)throw new Error("Data must be at least 6 characters long");const xe=q.decode(Te).slice(0,-6),Me=$(we,xe,x);if(!Te.endsWith(Me))throw new Error(`Invalid checksum in ${z}: expected "${Me}"`);return{prefix:we,words:xe}}const y=b(B);function E(z){const{prefix:L,words:D}=B(z,!1);return{prefix:L,words:D,bytes:A(D)}}function H(z,L){return I(z,v(L))}return{encode:I,decode:B,encodeFromBytes:H,decodeToBytes:E,decodeUnsafe:y,fromWords:A,fromWordsUnsafe:M,toWords:v}}t.bech32=J("bech32"),t.bech32m=J("bech32m"),t.utf8={encode:l=>new TextDecoder().decode(l),decode:l=>new TextEncoder().encode(l)},t.hex=n(g(4),i("0123456789abcdef"),s(""),o(l=>{if(typeof l!="string"||l.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof l} with length ${l.length}`);return l.toLowerCase()}));const Y={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},ee="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",Z=(l,x)=>{if(typeof l!="string"||!Y.hasOwnProperty(l))throw new TypeError(ee);if(!r(x))throw new TypeError("bytesToString() expects Uint8Array");return Y[l].encode(x)};t.bytesToString=Z,t.str=t.bytesToString;const P=(l,x)=>{if(!Y.hasOwnProperty(l))throw new TypeError(ee);if(typeof x!="string")throw new TypeError("stringToBytes() expects string");return Y[l].decode(x)};t.stringToBytes=P,t.bytes=t.stringToBytes})(cf)),cf}var jd;function Ov(){if(jd)return pr;jd=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.mnemonicToSeedSync=pr.mnemonicToSeed=pr.validateMnemonic=pr.entropyToMnemonic=pr.mnemonicToEntropy=pr.generateMnemonic=void 0;const t=Bo(),e=Bv(),r=Mv(),n=Iv(),i=Qi(),s=Uv(),a=q=>q[0]==="";function o(q){if(typeof q!="string")throw new TypeError(`Invalid mnemonic type: ${typeof q}`);return q.normalize("NFKD")}function c(q){const U=o(q),O=U.split(" ");if(![12,15,18,21,24].includes(O.length))throw new Error("Invalid mnemonic");return{nfkd:U,words:O}}function u(q){t.default.bytes(q,16,20,24,28,32)}function f(q,U=128){if(t.default.number(U),U%32!==0||U>256)throw new TypeError("Invalid entropy");return b((0,i.randomBytes)(U/8),q)}pr.generateMnemonic=f;const d=q=>{const U=8-q.length/4;return new Uint8Array([(0,r.sha256)(q)[0]>>U<<U])};function h(q){if(!Array.isArray(q)||q.length!==2**11||typeof q[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return q.forEach(U=>{if(typeof U!="string")throw new Error(`Wordlist: non-string element: ${U}`)}),s.utils.chain(s.utils.checksum(1,d),s.utils.radix2(11,!0),s.utils.alphabet(q))}function g(q,U){const{words:O}=c(q),$=h(U).decode(O);return u($),$}pr.mnemonicToEntropy=g;function b(q,U){return u(q),h(U).encode(q).join(a(U)?"":" ")}pr.entropyToMnemonic=b;function S(q,U){try{g(q,U)}catch{return!1}return!0}pr.validateMnemonic=S;const _=q=>o(`mnemonic${q}`);function C(q,U=""){return(0,e.pbkdf2Async)(n.sha512,c(q).nfkd,_(U),{c:2048,dkLen:64})}pr.mnemonicToSeed=C;function F(q,U=""){return(0,e.pbkdf2)(n.sha512,c(q).nfkd,_(U),{c:2048,dkLen:64})}return pr.mnemonicToSeedSync=F,pr}var qv=Ov();const Nv=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ff=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Lv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Lv)throw new Error("Non little-endian hardware is not supported");const Dv=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Vx(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Dv[t[r]];return e}function Jx(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=r*2,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function Fv(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function pa(t){if(typeof t=="string"&&(t=Fv(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class Yu{clone(){return this._cloneInto()}}function Mo(t){const e=n=>t().update(pa(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Hv(t){const e=(n,i)=>t(i).update(pa(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function cu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Kv(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Xx(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function zv(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cu(t.outputLen),cu(t.blockLen)}function $v(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jv(t,e){Xx(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const kr={number:cu,bool:Kv,bytes:Xx,hash:zv,exists:$v,output:jv},Ca=BigInt(2**32-1),fu=BigInt(32);function Yx(t,e=!1){return e?{h:Number(t&Ca),l:Number(t>>fu&Ca)}:{h:Number(t>>fu&Ca)|0,l:Number(t&Ca)|0}}function Gv(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=Yx(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}const Wv=(t,e)=>BigInt(t>>>0)<<fu|BigInt(e>>>0),Vv=(t,e,r)=>t>>>r,Jv=(t,e,r)=>t<<32-r|e>>>r,Xv=(t,e,r)=>t>>>r|e<<32-r,Yv=(t,e,r)=>t<<32-r|e>>>r,Zv=(t,e,r)=>t<<64-r|e>>>r-32,Qv=(t,e,r)=>t>>>r-32|e<<64-r,e6=(t,e)=>e,t6=(t,e)=>t,r6=(t,e,r)=>t<<r|e>>>32-r,n6=(t,e,r)=>e<<r|t>>>32-r,i6=(t,e,r)=>e<<r-32|t>>>64-r,s6=(t,e,r)=>t<<r-32|e>>>64-r;function a6(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const o6=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),c6=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,f6=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),u6=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,l6=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),d6=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Oe={fromBig:Yx,split:Gv,toBig:Wv,shrSH:Vv,shrSL:Jv,rotrSH:Xv,rotrSL:Yv,rotrBH:Zv,rotrBL:Qv,rotr32H:e6,rotr32L:t6,rotlSH:r6,rotlSL:n6,rotlBH:i6,rotlBL:s6,add:a6,add3L:o6,add3H:c6,add4L:f6,add4H:u6,add5H:d6,add5L:l6},[Zx,Qx,ey]=[[],[],[]],h6=BigInt(0),Ss=BigInt(1),p6=BigInt(2),x6=BigInt(7),y6=BigInt(256),g6=BigInt(113);for(let t=0,e=Ss,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Zx.push(2*(5*n+r)),Qx.push((t+1)*(t+2)/2%64);let i=h6;for(let s=0;s<7;s++)e=(e<<Ss^(e>>x6)*g6)%y6,e&p6&&(i^=Ss<<(Ss<<BigInt(s))-Ss);ey.push(i)}const[b6,m6]=Oe.split(ey,!0),Gd=(t,e,r)=>r>32?Oe.rotlBH(t,e,r):Oe.rotlSH(t,e,r),Wd=(t,e,r)=>r>32?Oe.rotlBL(t,e,r):Oe.rotlSL(t,e,r);function w6(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)r[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=r[c],f=r[c+1],d=Gd(u,f,1)^r[o],h=Wd(u,f,1)^r[o+1];for(let g=0;g<50;g+=10)t[a+g]^=d,t[a+g+1]^=h}let i=t[2],s=t[3];for(let a=0;a<24;a++){const o=Qx[a],c=Gd(i,s,o),u=Wd(i,s,o),f=Zx[a];i=t[f],s=t[f+1],t[f]=c,t[f+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)r[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~r[(o+2)%10]&r[(o+4)%10]}t[0]^=b6[n],t[1]^=m6[n]}r.fill(0)}class Co extends Yu{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,kr.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Nv(this.state)}keccak(){w6(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){kr.exists(this);const{blockLen:r,state:n}=this;e=pa(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);for(let o=0;o<a;o++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){kr.exists(this,!1),kr.bytes(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return kr.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(kr.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new Co(r,n,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Hn=(t,e,r)=>Mo(()=>new Co(e,t,r));Hn(6,144,224/8);const $i=Hn(6,136,256/8);Hn(6,104,384/8);Hn(6,72,512/8);Hn(1,144,224/8);Hn(1,136,256/8);Hn(1,104,384/8);Hn(1,72,512/8);const ty=(t,e,r)=>Hv((n={})=>new Co(e,t,n.dkLen===void 0?r:n.dkLen,!0));ty(31,168,128/8);ty(31,136,256/8);class ry extends Yu{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,kr.hash(e);const n=pa(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return kr.exists(this),this.iHash.update(e),this}digestInto(e){kr.exists(this),kr.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Zu=(t,e,r)=>new ry(t,e).update(r).digest();Zu.create=(t,e)=>new ry(t,e);function v6(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+u,o,n)}class _6 extends Yu{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ff(this.buffer)}update(e){kr.exists(this);const{view:r,buffer:n,blockLen:i}=this;e=pa(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=ff(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){kr.exists(this),kr.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let c=a;c<i;c++)r[c]=0;v6(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=ff(e);this.get().forEach((c,u)=>o.setUint32(4*u,c,s))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}}const[E6,S6]=Oe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Pn=new Uint32Array(80),kn=new Uint32Array(80);class Qu extends _6{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:f,Fh:d,Fl:h,Gh:g,Gl:b,Hh:S,Hl:_}=this;return[e,r,n,i,s,a,o,c,u,f,d,h,g,b,S,_]}set(e,r,n,i,s,a,o,c,u,f,d,h,g,b,S,_){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=d|0,this.Fl=h|0,this.Gh=g|0,this.Gl=b|0,this.Hh=S|0,this.Hl=_|0}process(e,r){for(let q=0;q<16;q++,r+=4)Pn[q]=e.getUint32(r),kn[q]=e.getUint32(r+=4);for(let q=16;q<80;q++){const U=Pn[q-15]|0,O=kn[q-15]|0,$=Oe.rotrSH(U,O,1)^Oe.rotrSH(U,O,8)^Oe.shrSH(U,O,7),J=Oe.rotrSL(U,O,1)^Oe.rotrSL(U,O,8)^Oe.shrSL(U,O,7),Y=Pn[q-2]|0,ee=kn[q-2]|0,Z=Oe.rotrSH(Y,ee,19)^Oe.rotrBH(Y,ee,61)^Oe.shrSH(Y,ee,6),P=Oe.rotrSL(Y,ee,19)^Oe.rotrBL(Y,ee,61)^Oe.shrSL(Y,ee,6),l=Oe.add4L(J,P,kn[q-7],kn[q-16]),x=Oe.add4H(l,$,Z,Pn[q-7],Pn[q-16]);Pn[q]=x|0,kn[q]=l|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:f,Eh:d,El:h,Fh:g,Fl:b,Gh:S,Gl:_,Hh:C,Hl:F}=this;for(let q=0;q<80;q++){const U=Oe.rotrSH(d,h,14)^Oe.rotrSH(d,h,18)^Oe.rotrBH(d,h,41),O=Oe.rotrSL(d,h,14)^Oe.rotrSL(d,h,18)^Oe.rotrBL(d,h,41),$=d&g^~d&S,J=h&b^~h&_,Y=Oe.add5L(F,O,J,S6[q],kn[q]),ee=Oe.add5H(Y,C,U,$,E6[q],Pn[q]),Z=Y|0,P=Oe.rotrSH(n,i,28)^Oe.rotrBH(n,i,34)^Oe.rotrBH(n,i,39),l=Oe.rotrSL(n,i,28)^Oe.rotrBL(n,i,34)^Oe.rotrBL(n,i,39),x=n&s^n&o^s&o,m=i&a^i&c^a&c;C=S|0,F=_|0,S=g|0,_=b|0,g=d|0,b=h|0,{h:d,l:h}=Oe.add(u|0,f|0,ee|0,Z|0),u=o|0,f=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const A=Oe.add3L(Z,l,m);n=Oe.add3H(A,ee,P,x),i=A|0}({h:n,l:i}=Oe.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=Oe.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=Oe.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:f}=Oe.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:d,l:h}=Oe.add(this.Eh|0,this.El|0,d|0,h|0),{h:g,l:b}=Oe.add(this.Fh|0,this.Fl|0,g|0,b|0),{h:S,l:_}=Oe.add(this.Gh|0,this.Gl|0,S|0,_|0),{h:C,l:F}=Oe.add(this.Hh|0,this.Hl|0,C|0,F|0),this.set(n,i,s,a,o,c,u,f,d,h,g,b,S,_,C,F)}roundClean(){Pn.fill(0),kn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class A6 extends Qu{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class T6 extends Qu{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const ny=Mo(()=>new Qu);Mo(()=>new A6);Mo(()=>new T6);var Ia={exports:{}},uf,Vd;function iy(){return Vd||(Vd=1,uf=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}}),uf}var lf,Jd;function sr(){if(Jd)return lf;Jd=1;var t=iy(),e=Object.prototype.toString,r=(function(v){return function(M){var I=e.call(M);return v[I]||(v[I]=I.slice(8,-1).toLowerCase())}})(Object.create(null));function n(v){return v=v.toLowerCase(),function(I){return r(I)===v}}function i(v){return Array.isArray(v)}function s(v){return typeof v>"u"}function a(v){return v!==null&&!s(v)&&v.constructor!==null&&!s(v.constructor)&&typeof v.constructor.isBuffer=="function"&&v.constructor.isBuffer(v)}var o=n("ArrayBuffer");function c(v){var M;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?M=ArrayBuffer.isView(v):M=v&&v.buffer&&o(v.buffer),M}function u(v){return typeof v=="string"}function f(v){return typeof v=="number"}function d(v){return v!==null&&typeof v=="object"}function h(v){if(r(v)!=="object")return!1;var M=Object.getPrototypeOf(v);return M===null||M===Object.prototype}var g=n("Date"),b=n("File"),S=n("Blob"),_=n("FileList");function C(v){return e.call(v)==="[object Function]"}function F(v){return d(v)&&C(v.pipe)}function q(v){var M="[object FormData]";return v&&(typeof FormData=="function"&&v instanceof FormData||e.call(v)===M||C(v.toString)&&v.toString()===M)}var U=n("URLSearchParams");function O(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function $(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function J(v,M){if(!(v===null||typeof v>"u"))if(typeof v!="object"&&(v=[v]),i(v))for(var I=0,B=v.length;I<B;I++)M.call(null,v[I],I,v);else for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&M.call(null,v[y],y,v)}function Y(){var v={};function M(y,E){h(v[E])&&h(y)?v[E]=Y(v[E],y):h(y)?v[E]=Y({},y):i(y)?v[E]=y.slice():v[E]=y}for(var I=0,B=arguments.length;I<B;I++)J(arguments[I],M);return v}function ee(v,M,I){return J(M,function(y,E){I&&typeof y=="function"?v[E]=t(y,I):v[E]=y}),v}function Z(v){return v.charCodeAt(0)===65279&&(v=v.slice(1)),v}function P(v,M,I,B){v.prototype=Object.create(M.prototype,B),v.prototype.constructor=v,I&&Object.assign(v.prototype,I)}function l(v,M,I){var B,y,E,H={};M=M||{};do{for(B=Object.getOwnPropertyNames(v),y=B.length;y-- >0;)E=B[y],H[E]||(M[E]=v[E],H[E]=!0);v=Object.getPrototypeOf(v)}while(v&&(!I||I(v,M))&&v!==Object.prototype);return M}function x(v,M,I){v=String(v),(I===void 0||I>v.length)&&(I=v.length),I-=M.length;var B=v.indexOf(M,I);return B!==-1&&B===I}function m(v){if(!v)return null;var M=v.length;if(s(M))return null;for(var I=new Array(M);M-- >0;)I[M]=v[M];return I}var A=(function(v){return function(M){return v&&M instanceof v}})(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));return lf={isArray:i,isArrayBuffer:o,isBuffer:a,isFormData:q,isArrayBufferView:c,isString:u,isNumber:f,isObject:d,isPlainObject:h,isUndefined:s,isDate:g,isFile:b,isBlob:S,isFunction:C,isStream:F,isURLSearchParams:U,isStandardBrowserEnv:$,forEach:J,merge:Y,extend:ee,trim:O,stripBOM:Z,inherits:P,toFlatObject:l,kindOf:r,kindOfTest:n,endsWith:x,toArray:m,isTypedArray:A,isFileList:_},lf}var df,Xd;function sy(){if(Xd)return df;Xd=1;var t=sr();function e(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return df=function(n,i,s){if(!i)return n;var a;if(s)a=s(i);else if(t.isURLSearchParams(i))a=i.toString();else{var o=[];t.forEach(i,function(f,d){f===null||typeof f>"u"||(t.isArray(f)?d=d+"[]":f=[f],t.forEach(f,function(g){t.isDate(g)?g=g.toISOString():t.isObject(g)&&(g=JSON.stringify(g)),o.push(e(d)+"="+e(g))}))}),a=o.join("&")}if(a){var c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n},df}var hf,Yd;function R6(){if(Yd)return hf;Yd=1;var t=sr();function e(){this.handlers=[]}return e.prototype.use=function(n,i,s){return this.handlers.push({fulfilled:n,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1},e.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},e.prototype.forEach=function(n){t.forEach(this.handlers,function(s){s!==null&&n(s)})},hf=e,hf}var pf,Zd;function P6(){if(Zd)return pf;Zd=1;var t=sr();return pf=function(r,n){t.forEach(r,function(s,a){a!==n&&a.toUpperCase()===n.toUpperCase()&&(r[n]=s,delete r[a])})},pf}var xf,Qd;function es(){if(Qd)return xf;Qd=1;var t=sr();function e(i,s,a,o,c){Error.call(this),this.message=i,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),o&&(this.request=o),c&&(this.response=c)}t.inherits(e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var r=e.prototype,n={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(i){n[i]={value:i}}),Object.defineProperties(e,n),Object.defineProperty(r,"isAxiosError",{value:!0}),e.from=function(i,s,a,o,c,u){var f=Object.create(r);return t.toFlatObject(i,f,function(h){return h!==Error.prototype}),e.call(f,i.message,s,a,o,c),f.name=i.name,u&&Object.assign(f,u),f},xf=e,xf}var yf,eh;function ay(){return eh||(eh=1,yf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}),yf}var gf,th;function oy(){if(th)return gf;th=1;var t=sr();function e(r,n){n=n||new FormData;var i=[];function s(o){return o===null?"":t.isDate(o)?o.toISOString():t.isArrayBuffer(o)||t.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Q.Buffer.from(o):o}function a(o,c){if(t.isPlainObject(o)||t.isArray(o)){if(i.indexOf(o)!==-1)throw Error("Circular reference detected in "+c);i.push(o),t.forEach(o,function(f,d){if(!t.isUndefined(f)){var h=c?c+"."+d:d,g;if(f&&!c&&typeof f=="object"){if(t.endsWith(d,"{}"))f=JSON.stringify(f);else if(t.endsWith(d,"[]")&&(g=t.toArray(f))){g.forEach(function(b){!t.isUndefined(b)&&n.append(h,s(b))});return}}a(f,h)}}),i.pop()}else n.append(c,s(o))}return a(r),n}return gf=e,gf}var bf,rh;function k6(){if(rh)return bf;rh=1;var t=es();return bf=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},bf}var mf,nh;function B6(){if(nh)return mf;nh=1;var t=sr();return mf=t.isStandardBrowserEnv()?(function(){return{write:function(n,i,s,a,o,c){var u=[];u.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),t.isString(a)&&u.push("path="+a),t.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}})():(function(){return{write:function(){},read:function(){return null},remove:function(){}}})(),mf}var wf,ih;function M6(){return ih||(ih=1,wf=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),wf}var vf,sh;function C6(){return sh||(sh=1,vf=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),vf}var _f,ah;function cy(){if(ah)return _f;ah=1;var t=M6(),e=C6();return _f=function(n,i){return n&&!t(i)?e(n,i):i},_f}var Ef,oh;function I6(){if(oh)return Ef;oh=1;var t=sr(),e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ef=function(n){var i={},s,a,o;return n&&t.forEach(n.split(`
`),function(u){if(o=u.indexOf(":"),s=t.trim(u.substr(0,o)).toLowerCase(),a=t.trim(u.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},Ef}var Sf,ch;function U6(){if(ch)return Sf;ch=1;var t=sr();return Sf=t.isStandardBrowserEnv()?(function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){var c=t.isString(o)?s(o):o;return c.protocol===i.protocol&&c.host===i.host}})():(function(){return function(){return!0}})(),Sf}var Af,fh;function Io(){if(fh)return Af;fh=1;var t=es(),e=sr();function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),Af=r,Af}var Tf,uh;function O6(){return uh||(uh=1,Tf=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Tf}var Rf,lh;function dh(){if(lh)return Rf;lh=1;var t=sr(),e=k6(),r=B6(),n=sy(),i=cy(),s=I6(),a=U6(),o=ay(),c=es(),u=Io(),f=O6();return Rf=function(h){return new Promise(function(b,S){var _=h.data,C=h.headers,F=h.responseType,q;function U(){h.cancelToken&&h.cancelToken.unsubscribe(q),h.signal&&h.signal.removeEventListener("abort",q)}t.isFormData(_)&&t.isStandardBrowserEnv()&&delete C["Content-Type"];var O=new XMLHttpRequest;if(h.auth){var $=h.auth.username||"",J=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";C.Authorization="Basic "+btoa($+":"+J)}var Y=i(h.baseURL,h.url);O.open(h.method.toUpperCase(),n(Y,h.params,h.paramsSerializer),!0),O.timeout=h.timeout;function ee(){if(O){var l="getAllResponseHeaders"in O?s(O.getAllResponseHeaders()):null,x=!F||F==="text"||F==="json"?O.responseText:O.response,m={data:x,status:O.status,statusText:O.statusText,headers:l,config:h,request:O};e(function(v){b(v),U()},function(v){S(v),U()},m),O=null}}if("onloadend"in O?O.onloadend=ee:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(ee)},O.onabort=function(){O&&(S(new c("Request aborted",c.ECONNABORTED,h,O)),O=null)},O.onerror=function(){S(new c("Network Error",c.ERR_NETWORK,h,O,O)),O=null},O.ontimeout=function(){var x=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",m=h.transitional||o;h.timeoutErrorMessage&&(x=h.timeoutErrorMessage),S(new c(x,m.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,h,O)),O=null},t.isStandardBrowserEnv()){var Z=(h.withCredentials||a(Y))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;Z&&(C[h.xsrfHeaderName]=Z)}"setRequestHeader"in O&&t.forEach(C,function(x,m){typeof _>"u"&&m.toLowerCase()==="content-type"?delete C[m]:O.setRequestHeader(m,x)}),t.isUndefined(h.withCredentials)||(O.withCredentials=!!h.withCredentials),F&&F!=="json"&&(O.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&O.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(q=function(l){O&&(S(!l||l&&l.type?new u:l),O.abort(),O=null)},h.cancelToken&&h.cancelToken.subscribe(q),h.signal&&(h.signal.aborted?q():h.signal.addEventListener("abort",q))),_||(_=null);var P=f(Y);if(P&&["http","https","file"].indexOf(P)===-1){S(new c("Unsupported protocol "+P+":",c.ERR_BAD_REQUEST,h));return}O.send(_)})},Rf}var Pf,hh;function q6(){return hh||(hh=1,Pf=null),Pf}var kf,ph;function e0(){if(ph)return kf;ph=1;var t=sr(),e=P6(),r=es(),n=ay(),i=oy(),s={"Content-Type":"application/x-www-form-urlencoded"};function a(f,d){!t.isUndefined(f)&&t.isUndefined(f["Content-Type"])&&(f["Content-Type"]=d)}function o(){var f;return(typeof XMLHttpRequest<"u"||typeof Fs<"u"&&Object.prototype.toString.call(Fs)==="[object process]")&&(f=dh()),f}function c(f,d,h){if(t.isString(f))try{return(d||JSON.parse)(f),t.trim(f)}catch(g){if(g.name!=="SyntaxError")throw g}return(h||JSON.stringify)(f)}var u={transitional:n,adapter:o(),transformRequest:[function(d,h){if(e(h,"Accept"),e(h,"Content-Type"),t.isFormData(d)||t.isArrayBuffer(d)||t.isBuffer(d)||t.isStream(d)||t.isFile(d)||t.isBlob(d))return d;if(t.isArrayBufferView(d))return d.buffer;if(t.isURLSearchParams(d))return a(h,"application/x-www-form-urlencoded;charset=utf-8"),d.toString();var g=t.isObject(d),b=h&&h["Content-Type"],S;if((S=t.isFileList(d))||g&&b==="multipart/form-data"){var _=this.env&&this.env.FormData;return i(S?{"files[]":d}:d,_&&new _)}else if(g||b==="application/json")return a(h,"application/json"),c(d);return d}],transformResponse:[function(d){var h=this.transitional||u.transitional,g=h&&h.silentJSONParsing,b=h&&h.forcedJSONParsing,S=!g&&this.responseType==="json";if(S||b&&t.isString(d)&&d.length)try{return JSON.parse(d)}catch(_){if(S)throw _.name==="SyntaxError"?r.from(_,r.ERR_BAD_RESPONSE,this,null,this.response):_}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:q6()},validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(d){u.headers[d]={}}),t.forEach(["post","put","patch"],function(d){u.headers[d]=t.merge(s)}),kf=u,kf}var Bf,xh;function N6(){if(xh)return Bf;xh=1;var t=sr(),e=e0();return Bf=function(n,i,s){var a=this||e;return t.forEach(s,function(c){n=c.call(a,n,i)}),n},Bf}var Mf,yh;function fy(){return yh||(yh=1,Mf=function(e){return!!(e&&e.__CANCEL__)}),Mf}var Cf,gh;function L6(){if(gh)return Cf;gh=1;var t=sr(),e=N6(),r=fy(),n=e0(),i=Io();function s(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new i}return Cf=function(o){s(o),o.headers=o.headers||{},o.data=e.call(o,o.data,o.headers,o.transformRequest),o.headers=t.merge(o.headers.common||{},o.headers[o.method]||{},o.headers),t.forEach(["delete","get","head","post","put","patch","common"],function(f){delete o.headers[f]});var c=o.adapter||n.adapter;return c(o).then(function(f){return s(o),f.data=e.call(o,f.data,f.headers,o.transformResponse),f},function(f){return r(f)||(s(o),f&&f.response&&(f.response.data=e.call(o,f.response.data,f.response.headers,o.transformResponse))),Promise.reject(f)})},Cf}var If,bh;function uy(){if(bh)return If;bh=1;var t=sr();return If=function(r,n){n=n||{};var i={};function s(d,h){return t.isPlainObject(d)&&t.isPlainObject(h)?t.merge(d,h):t.isPlainObject(h)?t.merge({},h):t.isArray(h)?h.slice():h}function a(d){if(t.isUndefined(n[d])){if(!t.isUndefined(r[d]))return s(void 0,r[d])}else return s(r[d],n[d])}function o(d){if(!t.isUndefined(n[d]))return s(void 0,n[d])}function c(d){if(t.isUndefined(n[d])){if(!t.isUndefined(r[d]))return s(void 0,r[d])}else return s(void 0,n[d])}function u(d){if(d in n)return s(r[d],n[d]);if(d in r)return s(void 0,r[d])}var f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u};return t.forEach(Object.keys(r).concat(Object.keys(n)),function(h){var g=f[h]||a,b=g(h);t.isUndefined(b)&&g!==u||(i[h]=b)}),i},If}var Uf,mh;function ly(){return mh||(mh=1,Uf={version:"0.27.2"}),Uf}var Of,wh;function D6(){if(wh)return Of;wh=1;var t=ly().version,e=es(),r={};["object","boolean","number","function","string","symbol"].forEach(function(s,a){r[s]=function(c){return typeof c===s||"a"+(a<1?"n ":" ")+s}});var n={};r.transitional=function(a,o,c){function u(f,d){return"[Axios v"+t+"] Transitional option '"+f+"'"+d+(c?". "+c:"")}return function(f,d,h){if(a===!1)throw new e(u(d," has been removed"+(o?" in "+o:"")),e.ERR_DEPRECATED);return o&&!n[d]&&(n[d]=!0,console.warn(u(d," has been deprecated since v"+o+" and will be removed in the near future"))),a?a(f,d,h):!0}};function i(s,a,o){if(typeof s!="object")throw new e("options must be an object",e.ERR_BAD_OPTION_VALUE);for(var c=Object.keys(s),u=c.length;u-- >0;){var f=c[u],d=a[f];if(d){var h=s[f],g=h===void 0||d(h,f,s);if(g!==!0)throw new e("option "+f+" must be "+g,e.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new e("Unknown option "+f,e.ERR_BAD_OPTION)}}return Of={assertOptions:i,validators:r},Of}var qf,vh;function F6(){if(vh)return qf;vh=1;var t=sr(),e=sy(),r=R6(),n=L6(),i=uy(),s=cy(),a=D6(),o=a.validators;function c(u){this.defaults=u,this.interceptors={request:new r,response:new r}}return c.prototype.request=function(f,d){typeof f=="string"?(d=d||{},d.url=f):d=f||{},d=i(this.defaults,d),d.method?d.method=d.method.toLowerCase():this.defaults.method?d.method=this.defaults.method.toLowerCase():d.method="get";var h=d.transitional;h!==void 0&&a.assertOptions(h,{silentJSONParsing:o.transitional(o.boolean),forcedJSONParsing:o.transitional(o.boolean),clarifyTimeoutError:o.transitional(o.boolean)},!1);var g=[],b=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(d)===!1||(b=b&&$.synchronous,g.unshift($.fulfilled,$.rejected))});var S=[];this.interceptors.response.forEach(function($){S.push($.fulfilled,$.rejected)});var _;if(!b){var C=[n,void 0];for(Array.prototype.unshift.apply(C,g),C=C.concat(S),_=Promise.resolve(d);C.length;)_=_.then(C.shift(),C.shift());return _}for(var F=d;g.length;){var q=g.shift(),U=g.shift();try{F=q(F)}catch(O){U(O);break}}try{_=n(F)}catch(O){return Promise.reject(O)}for(;S.length;)_=_.then(S.shift(),S.shift());return _},c.prototype.getUri=function(f){f=i(this.defaults,f);var d=s(f.baseURL,f.url);return e(d,f.params,f.paramsSerializer)},t.forEach(["delete","get","head","options"],function(f){c.prototype[f]=function(d,h){return this.request(i(h||{},{method:f,url:d,data:(h||{}).data}))}}),t.forEach(["post","put","patch"],function(f){function d(h){return function(b,S,_){return this.request(i(_||{},{method:f,headers:h?{"Content-Type":"multipart/form-data"}:{},url:b,data:S}))}}c.prototype[f]=d(),c.prototype[f+"Form"]=d(!0)}),qf=c,qf}var Nf,_h;function H6(){if(_h)return Nf;_h=1;var t=Io();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;this.promise.then(function(s){if(i._listeners){var a,o=i._listeners.length;for(a=0;a<o;a++)i._listeners[a](s);i._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){i.subscribe(c),a=c}).then(s);return o.cancel=function(){i.unsubscribe(a)},o},r(function(a){i.reason||(i.reason=new t(a),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(a){n=a});return{token:i,cancel:n}},Nf=e,Nf}var Lf,Eh;function K6(){return Eh||(Eh=1,Lf=function(e){return function(n){return e.apply(null,n)}}),Lf}var Df,Sh;function z6(){if(Sh)return Df;Sh=1;var t=sr();return Df=function(r){return t.isObject(r)&&r.isAxiosError===!0},Df}var Ah;function $6(){if(Ah)return Ia.exports;Ah=1;var t=sr(),e=iy(),r=F6(),n=uy(),i=e0();function s(o){var c=new r(o),u=e(r.prototype.request,c);return t.extend(u,r.prototype,c),t.extend(u,c),u.create=function(d){return s(n(o,d))},u}var a=s(i);return a.Axios=r,a.CanceledError=Io(),a.CancelToken=H6(),a.isCancel=fy(),a.VERSION=ly().version,a.toFormData=oy(),a.AxiosError=es(),a.Cancel=a.CanceledError,a.all=function(c){return Promise.all(c)},a.spread=K6(),a.isAxiosError=z6(),Ia.exports=a,Ia.exports.default=a,Ia.exports}var Ff,Th;function j6(){return Th||(Th=1,Ff=$6()),Ff}var G6=j6();const Zs=Mr(G6);var Hf,Rh;function W6(){return Rh||(Rh=1,Hf=typeof self=="object"?self.FormData:window.FormData),Hf}var V6=W6();const dy=Mr(V6);var hy=Object.defineProperty,J6=Object.getOwnPropertyDescriptor,Uo=(t,e)=>{for(var r in e)hy(t,r,{get:e[r],enumerable:!0})},ft=(t,e,r,n)=>{for(var i=J6(e,r),s=t.length-1,a;s>=0;s--)(a=t[s])&&(i=a(e,r,i)||i);return i&&hy(e,r,i),i},X6=/^m(\/[0-9]+')+$/,py=t=>t.replace("'",""),Y6="ed25519 seed",Z6=2147483648,Q6=t=>{const r=Zu.create(ny,Y6).update(Jx(t)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},e3=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(n),s=new Uint8Array([0]),a=new Uint8Array([...s,...t,...i]),o=Zu.create(ny,e).update(a).digest(),c=o.slice(0,32),u=o.slice(32);return{key:c,chainCode:u}},t3=t=>X6.test(t)?!t.split("/").slice(1).map(py).some(Number.isNaN):!1,r3=(t,e,r=Z6)=>{if(!t3(t))throw new Error("Invalid derivation path");const{key:n,chainCode:i}=Q6(e);return t.split("/").slice(1).map(py).map(a=>parseInt(a,10)).reduce((a,o)=>e3(a,o+r),{key:n,chainCode:i})};async function n3(t){return new Promise(e=>{setTimeout(e,t)})}var Ph="/v1";function i3(t){let e=`${t}`;return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e.endsWith(Ph)||(e=`${e}${Ph}`),e}var xy=2e5,yy=20,s3=20,a3="0x1::aptos_coin::AptosCoin";function Oo(t){let e,r,n;return typeof t=="object"?(e=t.hashFunction,r=t.ttlMs,n=t.tags):e=t,(i,s,a)=>{if(a.value!=null)a.value=kh(a.value,e,r,n);else if(a.get!=null)a.get=kh(a.get,e,r,n);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function o3(t,e){return Oo({ttlMs:t,hashFunction:e})}var Ga=new Map;function c3(t){const e=new Set;for(const r of t){const n=Ga.get(r);if(n)for(const i of n)e.has(i)||(i.clear(),e.add(i))}return e.size}function kh(t,e,r=0,n){const i=Symbol("__memoized_map__");return function(...s){let a;const o=this;o.hasOwnProperty(i)||Object.defineProperty(o,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=o[i];if(Array.isArray(n))for(const u of n)Ga.has(u)?Ga.get(u).push(c):Ga.set(u,[c]);if(e||s.length>0||r>0){let u;e===!0?u=s.map(h=>h.toString()).join("!"):e?u=e.apply(o,s):u=s[0];const f=`${u}__timestamp`;let d=!1;if(r>0)if(!c.has(f))d=!0;else{const h=c.get(f);d=Date.now()-h>r}c.has(u)&&!d?a=c.get(u):(a=t.apply(o,s),c.set(u,a),r>0&&c.set(f,Date.now()))}else{const u=o;c.has(u)?a=c.get(u):(a=t.apply(o,s),c.set(u,a))}return a}}var qe=class{static fromBuffer(t){return qe.fromUint8Array(t)}static fromUint8Array(t){return new qe(Vx(t))}static ensure(t){return typeof t=="string"?new qe(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Jx(this.noPrefix()))}};async function Bh(t,e,r,n){var i;const s=[];let a;for(;;){const o=await t(qe.ensure(e).hex(),(i=n?.ledgerVersion)==null?void 0:i.toString(),a,r);if(a=o.__headers["x-aptos-cursor"],delete o.__headers,s.push(...o),a==null)break}return s}var f3={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},u3={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},Jt={};Uo(Jt,{AccountAddress:()=>Nt,AccountAuthenticator:()=>ea,AccountAuthenticatorEd25519:()=>n0,AccountAuthenticatorMultiEd25519:()=>i0,ArgumentABI:()=>wa,AuthenticationKey:()=>wi,ChainId:()=>zo,ChangeSet:()=>T3,Ed25519PublicKey:()=>Dr,Ed25519Signature:()=>fn,EntryFunction:()=>li,EntryFunctionABI:()=>ji,Identifier:()=>gr,Module:()=>vy,ModuleId:()=>mi,MultiAgentRawTransaction:()=>Fo,MultiEd25519PublicKey:()=>xa,MultiEd25519Signature:()=>qo,MultiSig:()=>o0,MultiSigTransactionPayload:()=>a0,RawTransaction:()=>as,RawTransactionWithData:()=>_y,RotationProofChallenge:()=>P3,Script:()=>Do,ScriptABI:()=>Qo,SignedTransaction:()=>ga,StructTag:()=>bi,Transaction:()=>Ey,TransactionArgument:()=>en,TransactionArgumentAddress:()=>Xo,TransactionArgumentBool:()=>Zo,TransactionArgumentU128:()=>Vo,TransactionArgumentU16:()=>jo,TransactionArgumentU256:()=>Jo,TransactionArgumentU32:()=>Go,TransactionArgumentU64:()=>Wo,TransactionArgumentU8:()=>$o,TransactionArgumentU8Vector:()=>Yo,TransactionAuthenticator:()=>ya,TransactionAuthenticatorEd25519:()=>No,TransactionAuthenticatorMultiAgent:()=>r0,TransactionAuthenticatorMultiEd25519:()=>Lo,TransactionPayload:()=>ba,TransactionPayloadEntryFunction:()=>Ko,TransactionPayloadMultisig:()=>c0,TransactionPayloadScript:()=>Ho,TransactionScriptABI:()=>ec,TypeArgumentABI:()=>ma,TypeTag:()=>nr,TypeTagAddress:()=>Ln,TypeTagBool:()=>Ai,TypeTagParser:()=>ss,TypeTagParserError:()=>wy,TypeTagSigner:()=>s0,TypeTagStruct:()=>Pi,TypeTagU128:()=>Ri,TypeTagU16:()=>ts,TypeTagU256:()=>ns,TypeTagU32:()=>rs,TypeTagU64:()=>Ti,TypeTagU8:()=>En,TypeTagVector:()=>is,UserTransaction:()=>f0,WriteSet:()=>R3,stringStructTag:()=>my});var l3={};Uo(l3,{Deserializer:()=>t0,Serializer:()=>jt,bcsSerializeBool:()=>w3,bcsSerializeBytes:()=>Ui,bcsSerializeFixedBytes:()=>_3,bcsSerializeStr:()=>v3,bcsSerializeU128:()=>m3,bcsSerializeU16:()=>g3,bcsSerializeU32:()=>b3,bcsSerializeU8:()=>uu,bcsSerializeUint64:()=>y3,bcsToBytes:()=>Kn,deserializeVector:()=>Hr,serializeVector:()=>Br,serializeVectorWithFunc:()=>x3});var d3=2**8-1,h3=2**16-1,Qs=2**32-1,gy=BigInt(2**64)-BigInt(1),by=BigInt(2**128)-BigInt(1),p3=BigInt(2**256)-BigInt(1),jt=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,e,r){this.ensureBufferWillHandleSize(e);const n=new DataView(this.buffer,this.offset);t.apply(n,[0,r,!0]),this.offset+=e}serializeStr(t){const e=new TextEncoder;this.serializeBytes(e.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const e=t?1:0;this.serialize(new Uint8Array([e]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const e=BigInt(t.toString())&BigInt(Qs),r=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(r))}serializeU128(t){const e=BigInt(t.toString())&gy,r=BigInt(t.toString())>>BigInt(64);this.serializeU64(e),this.serializeU64(r)}serializeU256(t){const e=BigInt(t.toString())&by,r=BigInt(t.toString())>>BigInt(128);this.serializeU128(e),this.serializeU128(r)}serializeU32AsUleb128(t){let e=t;const r=[];for(;e>>>7;)r.push(e&127|128),e>>>=7;r.push(e),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};ft([Si(0,d3)],jt.prototype,"serializeU8");ft([Si(0,h3)],jt.prototype,"serializeU16");ft([Si(0,Qs)],jt.prototype,"serializeU32");ft([Si(BigInt(0),gy)],jt.prototype,"serializeU64");ft([Si(BigInt(0),by)],jt.prototype,"serializeU128");ft([Si(BigInt(0),p3)],jt.prototype,"serializeU256");ft([Si(0,Qs)],jt.prototype,"serializeU32AsUleb128");function Si(t,e,r){return(n,i,s)=>{const a=s.value;return s.value=function(c){const u=BigInt(c.toString());if(u>BigInt(e.toString())||u<BigInt(t.toString()))throw new Error("Value is out of range");a.apply(this,[c])},s}}var t0=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),e=0;for(;t<Qs;){const r=this.deserializeU8();if(t|=BigInt(r&127)<<BigInt(e),(r&128)===0)break;e+=7}if(t>Qs)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function Br(t,e){e.serializeU32AsUleb128(t.length),t.forEach(r=>{r.serialize(e)})}function x3(t,e){const r=new jt;r.serializeU32AsUleb128(t.length);const n=r[e];return t.forEach(i=>{n.call(r,i)}),r.getBytes()}function Hr(t,e){const r=t.deserializeUleb128AsU32(),n=[];for(let i=0;i<r;i+=1)n.push(e.deserialize(t));return n}function Kn(t){const e=new jt;return t.serialize(e),e.getBytes()}function y3(t){const e=new jt;return e.serializeU64(t),e.getBytes()}function uu(t){const e=new jt;return e.serializeU8(t),e.getBytes()}function g3(t){const e=new jt;return e.serializeU16(t),e.getBytes()}function b3(t){const e=new jt;return e.serializeU32(t),e.getBytes()}function m3(t){const e=new jt;return e.serializeU128(t),e.getBytes()}function w3(t){const e=new jt;return e.serializeBool(t),e.getBytes()}function v3(t){const e=new jt;return e.serializeStr(t),e.getBytes()}function Ui(t){const e=new jt;return e.serializeBytes(t),e.getBytes()}function _3(t){const e=new jt;return e.serializeFixedBytes(t),e.getBytes()}var qr=class{constructor(t){if(t.length!==qr.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let e=qe.ensure(t);e.noPrefix().length%2!==0&&(e=new qe(`0${e.noPrefix()}`));const r=e.toUint8Array();if(r.length>qr.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===qr.LENGTH)return new qr(r);const n=new Uint8Array(qr.LENGTH);return n.set(r,qr.LENGTH-r.length),new qr(n)}static isValid(t){if(t==="")return!1;let e=qe.ensure(t);return e.noPrefix().length%2!==0&&(e=new qe(`0${e.noPrefix()}`)),e.toUint8Array().length<=qr.LENGTH}toHexString(){return qe.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new qr(t.deserializeFixedBytes(qr.LENGTH))}},Nt=qr;Nt.LENGTH=32;Nt.CORE_CODE_ADDRESS=qr.fromHex("0x1");var Wa=class{constructor(t){if(t.length!==Wa.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Wa.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new Wa(e)}},Dr=Wa;Dr.LENGTH=32;var Va=class{constructor(t){if(this.value=t,t.length!==Va.LENGTH)throw new Error(`Ed25519Signature length should be ${Va.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new Va(e)}},fn=Va;fn.LENGTH=64;var lu=32,xa=class{constructor(t,e){if(this.public_keys=t,this.threshold=e,e>lu)throw new Error(`"threshold" cannot be larger than ${lu}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*Dr.LENGTH+1);return this.public_keys.forEach((e,r)=>{t.set(e.value,r*Dr.LENGTH)}),t[this.public_keys.length*Dr.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e[e.length-1],n=[];for(let i=0;i<e.length-1;i+=Dr.LENGTH){const s=i;n.push(new Dr(e.subarray(s,s+Dr.LENGTH)))}return new xa(n,r)}},Us=class{constructor(t,e){if(this.signatures=t,this.bitmap=e,e.length!==Us.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Us.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*fn.LENGTH+Us.BITMAP_LEN);return this.signatures.forEach((e,r)=>{t.set(e.value,r*fn.LENGTH)}),t.set(this.bitmap,this.signatures.length*fn.LENGTH),t}static createBitmap(t){const r=new Uint8Array([0,0,0,0]),n=new Set;return t.forEach(i=>{if(i>=lu)throw new Error(`Invalid bit value ${i}.`);if(n.has(i))throw new Error("Duplicated bits detected.");n.add(i);const s=Math.floor(i/8);let a=r[s];a|=128>>i%8,r[s]=a}),r}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e.subarray(e.length-4),n=[];for(let i=0;i<e.length-r.length;i+=fn.LENGTH){const s=i;n.push(new fn(e.subarray(s,s+fn.LENGTH)))}return new Us(n,r)}},qo=Us;qo.BITMAP_LEN=4;var ya=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return No.load(t);case 1:return Lo.load(t);case 2:return r0.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},No=class extends ya{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Dr.deserialize(t),r=fn.deserialize(t);return new No(e,r)}},Lo=class extends ya{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=xa.deserialize(t),r=qo.deserialize(t);return new Lo(e,r)}},r0=class extends ya{constructor(t,e,r){super(),this.sender=t,this.secondary_signer_addresses=e,this.secondary_signers=r}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),Br(this.secondary_signer_addresses,t),Br(this.secondary_signers,t)}static load(t){const e=ea.deserialize(t),r=Hr(t,Nt),n=Hr(t,ea);return new r0(e,r,n)}},ea=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return n0.load(t);case 1:return i0.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},n0=class extends ea{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Dr.deserialize(t),r=fn.deserialize(t);return new n0(e,r)}},i0=class extends ea{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=xa.deserialize(t),r=qo.deserialize(t);return new i0(e,r)}},gr=class{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const e=t.deserializeStr();return new gr(e)}},nr=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Ai.load(t);case 1:return En.load(t);case 2:return Ti.load(t);case 3:return Ri.load(t);case 4:return Ln.load(t);case 5:return s0.load(t);case 6:return is.load(t);case 7:return Pi.load(t);case 8:return ts.load(t);case 9:return rs.load(t);case 10:return ns.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}},Ai=class extends nr{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new Ai}},En=class extends nr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new En}},ts=class extends nr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new ts}},rs=class extends nr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new rs}},Ti=class extends nr{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new Ti}},Ri=class extends nr{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new Ri}},ns=class extends nr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new ns}},Ln=class extends nr{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new Ln}},s0=class extends nr{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new s0}},is=class extends nr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const e=nr.deserialize(t);return new is(e)}},Pi=class extends nr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const e=bi.deserialize(t);return new Pi(e)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===Nt.fromHex("0x1").toHexString()}},bi=class{constructor(t,e,r,n){this.address=t,this.module_name=e,this.name=r,this.type_args=n}static fromString(t){const e=new ss(t).parseTypeTag();return new bi(e.value.address,e.value.module_name,e.value.name,e.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),Br(this.type_args,t)}static deserialize(t){const e=Nt.deserialize(t),r=gr.deserialize(t),n=gr.deserialize(t),i=Hr(t,nr);return new bi(e,r,n,i)}},my=new bi(Nt.fromHex("0x1"),new gr("string"),new gr("String"),[]);function Bn(t){throw new wy(t)}function Mh(t){return!!t.match(/\s/)}function Ch(t){return!!t.match(/[_A-Za-z0-9]/g)}function E3(t){return!!t.match(/T\d+/g)}function S3(t,e){const r=t[e];if(r===":"){if(t.slice(e,e+2)==="::")return[["COLON","::"],2];Bn("Unrecognized token.")}else{if(r==="<")return[["LT","<"],1];if(r===">")return[["GT",">"],1];if(r===",")return[["COMMA",","],1];if(Mh(r)){let n="";for(let i=e;i<t.length;i+=1){const s=t[i];if(Mh(s))n=`${n}${s}`;else break}return[["SPACE",n],n.length]}else if(Ch(r)){let n="";for(let i=e;i<t.length;i+=1){const s=t[i];if(Ch(s))n=`${n}${s}`;else break}return E3(n)?[["GENERIC",n],n.length]:[["IDENT",n],n.length]}}throw new Error("Unrecognized token.")}function A3(t){let e=0;const r=[];for(;e<t.length;){const[n,i]=S3(t,e);n[0]!=="SPACE"&&r.push(n),e+=i}return r}var ss=class{constructor(t,e){this.typeTags=[],this.tokens=A3(t),this.typeTags=e||[]}consume(t){const e=this.tokens.shift();(!e||e[1]!==t)&&Bn("Invalid type tag.")}parseCommaList(t,e){const r=[];for(this.tokens.length<=0&&Bn("Invalid type tag.");this.tokens[0][1]!==t&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&e)));)this.tokens.length<=0&&Bn("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&Bn("Invalid type tag.");const[t,e]=this.tokens.shift();if(e==="u8")return new En;if(e==="u16")return new ts;if(e==="u32")return new rs;if(e==="u64")return new Ti;if(e==="u128")return new Ri;if(e==="u256")return new ns;if(e==="bool")return new Ai;if(e==="address")return new Ln;if(e==="vector"){this.consume("<");const r=this.parseTypeTag();return this.consume(">"),new is(r)}if(e==="string")return new bi(Nt.fromHex("0x1"),new gr("string"),new gr("String"),[]);if(t==="IDENT"&&(e.startsWith("0x")||e.startsWith("0X"))){const r=e;this.consume("::");const[n,i]=this.tokens.shift();n!=="IDENT"&&Bn("Invalid type tag."),this.consume("::");const[s,a]=this.tokens.shift();if(s!=="IDENT"&&Bn("Invalid type tag."),i==="object"&&a==="Object")return this.tokens.splice(0,3),new Ln;let o=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),o=this.parseCommaList(">",!0),this.consume(">"));const c=new bi(Nt.fromHex(r),new gr(i),new gr(a),o);return new Pi(c)}if(t==="GENERIC"){this.typeTags.length===0&&Bn("Can't convert generic type since no typeTags were specified.");const r=parseInt(e.substring(1),10);return new ss(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}},wy=class extends Error{constructor(t){super(t),this.name="TypeTagParserError"}},as=class{constructor(t,e,r,n,i,s,a){this.sender=t,this.sequence_number=e,this.payload=r,this.max_gas_amount=n,this.gas_unit_price=i,this.expiration_timestamp_secs=s,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const e=Nt.deserialize(t),r=t.deserializeU64(),n=ba.deserialize(t),i=t.deserializeU64(),s=t.deserializeU64(),a=t.deserializeU64(),o=zo.deserialize(t);return new as(e,r,n,i,s,a,o)}},Do=class{constructor(t,e,r){this.code=t,this.ty_args=e,this.args=r}serialize(t){t.serializeBytes(this.code),Br(this.ty_args,t),Br(this.args,t)}static deserialize(t){const e=t.deserializeBytes(),r=Hr(t,nr),n=Hr(t,en);return new Do(e,r,n)}},li=class{constructor(t,e,r,n){this.module_name=t,this.function_name=e,this.ty_args=r,this.args=n}static natural(t,e,r,n){return new li(mi.fromStr(t),new gr(e),r,n)}static natual(t,e,r,n){return li.natural(t,e,r,n)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),Br(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(e=>{t.serializeBytes(e)})}static deserialize(t){const e=mi.deserialize(t),r=gr.deserialize(t),n=Hr(t,nr),i=t.deserializeUleb128AsU32(),s=[];for(let o=0;o<i;o+=1)s.push(t.deserializeBytes());const a=s;return new li(e,r,n,a)}},a0=class{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new a0(li.deserialize(t))}},o0=class{constructor(t,e){this.multisig_address=t,this.transaction_payload=e}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const e=Nt.deserialize(t),r=t.deserializeBool();let n;return r&&(n=a0.deserialize(t)),new o0(e,n)}},vy=class{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const e=t.deserializeBytes();return new vy(e)}},mi=class{constructor(t,e){this.address=t,this.name=e}static fromStr(t){const e=t.split("::");if(e.length!==2)throw new Error("Invalid module id.");return new mi(Nt.fromHex(new qe(e[0])),new gr(e[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const e=Nt.deserialize(t),r=gr.deserialize(t);return new mi(e,r)}},T3=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},R3=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},ga=class{constructor(t,e){this.raw_txn=t,this.authenticator=e}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const e=as.deserialize(t),r=ya.deserialize(t);return new ga(e,r)}},_y=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Fo.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Fo=class extends _y{constructor(t,e){super(),this.raw_txn=t,this.secondary_signer_addresses=e}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),Br(this.secondary_signer_addresses,t)}static load(t){const e=as.deserialize(t),r=Hr(t,Nt);return new Fo(e,r)}},ba=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Ho.load(t);case 2:return Ko.load(t);case 3:return c0.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Ho=class extends ba{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const e=Do.deserialize(t);return new Ho(e)}},Ko=class extends ba{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const e=li.deserialize(t);return new Ko(e)}},c0=class extends ba{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=o0.deserialize(t);return new c0(e)}},zo=class{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const e=t.deserializeU8();return new zo(e)}},en=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return $o.load(t);case 1:return Wo.load(t);case 2:return Vo.load(t);case 3:return Xo.load(t);case 4:return Yo.load(t);case 5:return Zo.load(t);case 6:return jo.load(t);case 7:return Go.load(t);case 8:return Jo.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${e}`)}}},$o=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const e=t.deserializeU8();return new $o(e)}},jo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const e=t.deserializeU16();return new jo(e)}},Go=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const e=t.deserializeU32();return new Go(e)}},Wo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const e=t.deserializeU64();return new Wo(e)}},Vo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const e=t.deserializeU128();return new Vo(e)}},Jo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const e=t.deserializeU256();return new Jo(e)}},Xo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=Nt.deserialize(t);return new Xo(e)}},Yo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const e=t.deserializeBytes();return new Yo(e)}},Zo=class extends en{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const e=t.deserializeBool();return new Zo(e)}},Ey=class{getHashSalt(){const e=$i.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const r=e.deserializeUleb128AsU32();switch(r){case 0:return f0.load(e);default:throw new Error(`Unknown variant index for Transaction: ${r}`)}}},f0=class extends Ey{constructor(t){super(),this.value=t}hash(){const t=$i.create();return t.update(this.getHashSalt()),t.update(Kn(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new f0(ga.deserialize(t))}},ma=class{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const e=t.deserializeStr();return new ma(e)}},wa=class{constructor(t,e){this.name=t,this.type_tag=e}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const e=t.deserializeStr(),r=nr.deserialize(t);return new wa(e,r)}},Qo=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return ec.load(t);case 1:return ji.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},ec=class extends Qo{constructor(t,e,r,n,i){super(),this.name=t,this.doc=e,this.code=r,this.ty_args=n,this.args=i}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),Br(this.ty_args,t),Br(this.args,t)}static load(t){const e=t.deserializeStr(),r=t.deserializeStr(),n=t.deserializeBytes(),i=Hr(t,ma),s=Hr(t,wa);return new ec(e,r,n,i,s)}},ji=class extends Qo{constructor(t,e,r,n,i){super(),this.name=t,this.module_name=e,this.doc=r,this.ty_args=n,this.args=i}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),Br(this.ty_args,t),Br(this.args,t)}static load(t){const e=t.deserializeStr(),r=mi.deserialize(t),n=t.deserializeStr(),i=Hr(t,ma),s=Hr(t,wa);return new ji(e,r,n,i,s)}},Oi=class{constructor(t){if(t.length!==Oi.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const e=t.toBytes(),r=new Uint8Array(e.length+1);r.set(e),r.set([Oi.MULTI_ED25519_SCHEME],e.length);const n=$i.create();return n.update(r),new Oi(n.digest())}static fromEd25519PublicKey(t){const e=t.value,r=new Uint8Array(e.length+1);r.set(e),r.set([Oi.ED25519_SCHEME],e.length);const n=$i.create();return n.update(r),new Oi(n.digest())}derivedAddress(){return qe.fromUint8Array(this.bytes)}},wi=Oi;wi.LENGTH=32;wi.MULTI_ED25519_SCHEME=1;wi.ED25519_SCHEME=0;wi.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var P3=class{constructor(t,e,r,n,i,s,a){this.accountAddress=t,this.moduleName=e,this.structName=r,this.sequenceNumber=n,this.originator=i,this.currentAuthKey=s,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},Ja=class{static fromAptosAccountObject(t){return new Ja(qe.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,e){if(!Ja.isValidPath(t))throw new Error("Invalid derivation path");const r=e.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:n}=r3(t,Vx(qv.mnemonicToSeedSync(r)));return new Ja(n)}constructor(t,e){t?this.signingKey=Ma.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=Ma.sign.keyPair(),this.accountAddress=qe.ensure(e||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new Dr(this.signingKey.publicKey);return wi.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,e){const r=Kn(Nt.fromHex(t)),n=new Uint8Array([...r,...e,wi.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=$i.create();return i.update(n),qe.fromUint8Array(i.digest())}pubKey(){return qe.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const e=Ma.sign.detached(t,this.signingKey.secretKey);return qe.fromUint8Array(e)}signHexString(t){const e=qe.ensure(t).toUint8Array();return this.signBuffer(e)}verifySignature(t,e){const r=qe.ensure(t).toUint8Array(),n=qe.ensure(e).toUint8Array();return Ma.sign.detached.verify(r,n,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:qe.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},du=Ja;ft([Oo()],du.prototype,"authKey");var k3=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,B3=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,M3=`
    query getAccountCoinsData($owner_address: String, $offset: Int, $limit: Int) {
  current_coin_balances(
    where: {owner_address: {_eq: $owner_address}}
    offset: $offset
    limit: $limit
  ) {
    amount
    coin_type
    coin_info {
      name
      decimals
      symbol
    }
  }
}
    `,C3=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${k3}
${B3}`,I3=`
    query getAccountTokensCount($owner_address: String) {
  current_token_ownerships_aggregate(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
  ) {
    aggregate {
      count
    }
  }
}
    `,U3=`
    query getAccountTransactionsCount($address: String) {
  move_resources_aggregate(
    where: {address: {_eq: $address}}
    distinct_on: transaction_version
  ) {
    aggregate {
      count
    }
  }
}
    `,O3=`
    query getAccountTransactionsData($address: String, $limit: Int, $offset: Int) {
  move_resources(
    where: {address: {_eq: $address}}
    order_by: {transaction_version: desc}
    distinct_on: transaction_version
    limit: $limit
    offset: $offset
  ) {
    transaction_version
  }
}
    `,q3=`
    query getCurrentDelegatorBalancesCount($poolAddress: String) {
  current_delegator_balances_aggregate(
    where: {pool_type: {_eq: "active_shares"}, pool_address: {_eq: $poolAddress}, amount: {_gt: "0"}}
    distinct_on: delegator_address
  ) {
    aggregate {
      count
    }
  }
}
    `,N3=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,L3=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,D3=`
    query getTokenActivities($idHash: String!, $offset: Int, $limit: Int) {
  token_activities(
    where: {token_data_id_hash: {_eq: $idHash}}
    order_by: {transaction_version: desc}
    offset: $offset
    limit: $limit
  ) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,F3=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_aggregate(where: {token_data_id_hash: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,H3=`
    query getTokenData($token_id: String) {
  current_token_datas(where: {token_data_id_hash: {_eq: $token_id}}) {
    token_data_id_hash
    name
    collection_name
    creator_address
    default_properties
    largest_property_version
    maximum
    metadata_uri
    payee_address
    royalty_points_denominator
    royalty_points_numerator
    supply
  }
}
    `,K3=`
    query getTokenOwnersData($token_id: String, $property_version: numeric) {
  current_token_ownerships(
    where: {token_data_id_hash: {_eq: $token_id}, property_version: {_eq: $property_version}}
  ) {
    owner_address
  }
}
    `,z3=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,$3=`
    query getUserTransactions($limit: Int, $start_version: bigint, $offset: Int) {
  user_transactions(
    limit: $limit
    order_by: {version: desc}
    where: {version: {_lte: $start_version}}
    offset: $offset
  ) {
    version
  }
}
    `,cn=class{constructor(t){this.endpoint=t}static validateAddress(t){if(t.length<66)throw new Error("Address needs to be 66 chars long.")}async queryIndexer(t){const{data:e}=await Zs.post(this.endpoint,t);if(e.errors)throw new Error(`Indexer data error ${JSON.stringify(e.errors,null," ")}`);return e.data}async getIndexerLedgerInfo(){const t={query:L3};return this.queryIndexer(t)}async getAccountNFTs(t,e){const r=qe.ensure(t).hex();cn.validateAddress(r);const n={query:C3,variables:{address:r,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(n)}async getTokenActivities(t,e){const r={query:D3,variables:{idHash:t,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(r)}async getAccountCoinsData(t,e){const r=qe.ensure(t).hex();cn.validateAddress(r);const n={query:M3,variables:{owner_address:r,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(n)}async getAccountTokensCount(t){const e=qe.ensure(t).hex();cn.validateAddress(e);const r={query:I3,variables:{owner_address:e}};return this.queryIndexer(r)}async getAccountTransactionsCount(t){const e=qe.ensure(t).hex();cn.validateAddress(e);const r={query:U3,variables:{address:e}};return this.queryIndexer(r)}async getAccountTransactionsData(t,e){const r=qe.ensure(t).hex();cn.validateAddress(r);const n={query:O3,variables:{address:r,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(n)}async getDelegatedStakingActivities(t,e){const r=qe.ensure(t).hex(),n=qe.ensure(e).hex();cn.validateAddress(r),cn.validateAddress(n);const i={query:N3,variables:{delegatorAddress:r,poolAddress:n}};return this.queryIndexer(i)}async getTokenActivitiesCount(t){const e={query:F3,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenData(t){const e={query:H3,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenOwnersData(t,e){const r={query:K3,variables:{token_id:t,property_version:e}};return this.queryIndexer(r)}async getTopUserTransactions(t){const e={query:z3,variables:{limit:t}};return this.queryIndexer(e)}async getUserTransactions(t,e){const r={query:$3,variables:{start_version:t,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(r)}async getCurrentDelegatorBalancesCount(t){const e=qe.ensure(t).hex();cn.validateAddress(e);const r={query:q3,variables:{poolAddress:e}};return this.queryIndexer(r)}},j3={};Uo(j3,{$AccountData:()=>o5,$AccountSignature:()=>c5,$AccountSignature_Ed25519Signature:()=>f5,$AccountSignature_MultiEd25519Signature:()=>u5,$Address:()=>l5,$AptosError:()=>d5,$AptosErrorCode:()=>h5,$Block:()=>p5,$BlockMetadataTransaction:()=>x5,$DecodedTableData:()=>y5,$DeleteModule:()=>b5,$DeleteResource:()=>m5,$DeleteTableItem:()=>w5,$DeletedTableData:()=>g5,$DirectWriteSet:()=>v5,$Ed25519Signature:()=>_5,$EncodeSubmissionRequest:()=>E5,$EntryFunctionId:()=>S5,$EntryFunctionPayload:()=>A5,$Event:()=>T5,$EventGuid:()=>R5,$GasEstimation:()=>P5,$GenesisPayload:()=>k5,$GenesisPayload_WriteSetPayload:()=>B5,$GenesisTransaction:()=>M5,$HashValue:()=>C5,$HealthCheckSuccess:()=>I5,$HexEncodedBytes:()=>U5,$IdentifierWrapper:()=>O5,$IndexResponse:()=>q5,$ModuleBundlePayload:()=>N5,$MoveAbility:()=>L5,$MoveFunction:()=>D5,$MoveFunctionGenericTypeParam:()=>F5,$MoveFunctionVisibility:()=>H5,$MoveModule:()=>K5,$MoveModuleBytecode:()=>z5,$MoveModuleId:()=>$5,$MoveResource:()=>j5,$MoveScriptBytecode:()=>G5,$MoveStruct:()=>W5,$MoveStructField:()=>V5,$MoveStructGenericTypeParam:()=>J5,$MoveStructTag:()=>X5,$MoveStructValue:()=>Y5,$MoveType:()=>Z5,$MoveValue:()=>Q5,$MultiAgentSignature:()=>e8,$MultiEd25519Signature:()=>t8,$MultisigPayload:()=>r8,$MultisigTransactionPayload:()=>n8,$PendingTransaction:()=>i8,$RawTableItemRequest:()=>s8,$RoleType:()=>a8,$ScriptPayload:()=>o8,$ScriptWriteSet:()=>c8,$StateCheckpointTransaction:()=>f8,$StateKeyWrapper:()=>u8,$SubmitTransactionRequest:()=>l8,$TableItemRequest:()=>d8,$Transaction:()=>h8,$TransactionPayload:()=>m8,$TransactionPayload_EntryFunctionPayload:()=>w8,$TransactionPayload_ModuleBundlePayload:()=>v8,$TransactionPayload_MultisigPayload:()=>_8,$TransactionPayload_ScriptPayload:()=>E8,$TransactionSignature:()=>T8,$TransactionSignature_Ed25519Signature:()=>R8,$TransactionSignature_MultiAgentSignature:()=>P8,$TransactionSignature_MultiEd25519Signature:()=>k8,$Transaction_BlockMetadataTransaction:()=>p8,$Transaction_GenesisTransaction:()=>x8,$Transaction_PendingTransaction:()=>y8,$Transaction_StateCheckpointTransaction:()=>g8,$Transaction_UserTransaction:()=>b8,$TransactionsBatchSingleSubmissionFailure:()=>S8,$TransactionsBatchSubmissionResult:()=>A8,$U128:()=>B8,$U256:()=>M8,$U64:()=>C8,$UserTransaction:()=>I8,$VersionedEvent:()=>U8,$ViewRequest:()=>O8,$WriteModule:()=>q8,$WriteResource:()=>N8,$WriteSet:()=>L8,$WriteSetChange:()=>H8,$WriteSetChange_DeleteModule:()=>K8,$WriteSetChange_DeleteResource:()=>z8,$WriteSetChange_DeleteTableItem:()=>$8,$WriteSetChange_WriteModule:()=>j8,$WriteSetChange_WriteResource:()=>G8,$WriteSetChange_WriteTableItem:()=>W8,$WriteSetPayload:()=>V8,$WriteSet_DirectWriteSet:()=>D8,$WriteSet_ScriptWriteSet:()=>F8,$WriteTableItem:()=>J8,AccountsService:()=>By,ApiError:()=>ta,AptosErrorCode:()=>Ly,AptosGeneratedClient:()=>Ny,BaseHttpRequest:()=>Sy,BlocksService:()=>My,CancelError:()=>Ay,CancelablePromise:()=>Ty,EventsService:()=>Cy,GeneralService:()=>Iy,MoveFunctionVisibility:()=>Dy,OpenAPI:()=>a5,RoleType:()=>Fy,TablesService:()=>Uy,TransactionsService:()=>Oy,ViewService:()=>qy});var Sy=class{constructor(t){this.config=t}},ta=class extends Error{constructor(t,e,r){super(r),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=t}},Ay=class extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}},Ty=class{constructor(t){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r;const n=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(o=this._resolve)==null||o.call(this,a))},i=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(o=this._reject)==null||o.call(this,a))},s=a=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(a)};return Object.defineProperty(s,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(s,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(s,"isCancelled",{get:()=>this._isCancelled}),t(n,i,s)})}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(){var t;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const e of this._cancelHandlers)e()}catch(e){console.warn("Cancellation threw an error",e);return}this._cancelHandlers.length=0,(t=this._reject)==null||t.call(this,new Ay("Request aborted"))}}get isCancelled(){return this._isCancelled}},Ry=class{constructor(t=new Map){this.jar=t}setCookie(t,e){var r;const n=t.origin.toLowerCase();this.jar.has(n)||this.jar.set(n,[]);const i=Ry.parse(e);this.jar.set(n,[...((r=this.jar.get(n))==null?void 0:r.filter(s=>s.name!==i.name))||[],i])}getCookies(t){var e;const r=t.origin.toLowerCase();return this.jar.get(r)?((e=this.jar.get(r))==null?void 0:e.filter(n=>!n.expires||n.expires>new Date))||[]:[]}static parse(t){if(typeof t!="string")throw new Error("argument str must be a string");const e=t.split(";").map(n=>n.trim());let r;if(e.length>0){const[n,i]=e[0].split("=");if(!n||!i)throw new Error("Invalid cookie");r={name:n,value:i}}else throw new Error("Invalid cookie");return e.slice(1).forEach(n=>{const[i,s]=n.split("=");if(!i.trim())throw new Error("Invalid cookie");const a=i.toLowerCase(),o=s?.charAt(0)==="'"||s?.charAt(0)==='"'?s?.slice(1,-1):s;if(a==="expires"&&(r.expires=new Date(o)),a==="path"&&(r.path=o),a==="samesite"){if(o!=="Lax"&&o!=="None"&&o!=="Strict")throw new Error("Invalid cookie SameSite value");r.sameSite=o}a==="secure"&&(r.secure=!0)}),r}},Py=new Ry;Zs.interceptors.response.use(t=>(Array.isArray(t.headers["set-cookie"])&&t.headers["set-cookie"].forEach(e=>{Py.setCookie(new URL(t.config.url),e)}),t));Zs.interceptors.request.use(function(t){const e=Py.getCookies(new URL(t.url));return e?.length>0&&t.headers&&(t.headers.cookie=e.map(r=>`${r.name}=${r.value}`).join("; ")),t});var u0=t=>t!=null,tc=t=>typeof t=="string",Kf=t=>tc(t)&&t!=="",ky=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),G3=t=>t instanceof dy,W3=t=>t>=200&&t<300,V3=t=>btoa(t),J3=t=>{const e=[],r=(i,s)=>{e.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`)},n=(i,s)=>{u0(s)&&(Array.isArray(s)?s.forEach(a=>{n(i,a)}):typeof s=="object"?Object.entries(s).forEach(([a,o])=>{n(`${i}[${a}]`,o)}):r(i,s))};return Object.entries(t).forEach(([i,s])=>{n(i,s)}),e.length>0?`?${e.join("&")}`:""},X3=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,n=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(s,a)=>{var o;return(o=e.path)!=null&&o.hasOwnProperty(a)?r(String(e.path[a])):s}),i=`${t.BASE}${n}`;return e.query?`${i}${J3(e.query)}`:i},Y3=t=>{if(t.formData){const e=new dy,r=(n,i)=>{tc(i)||ky(i)?e.append(n,i):e.append(n,JSON.stringify(i))};return Object.entries(t.formData).filter(([n,i])=>u0(i)).forEach(([n,i])=>{Array.isArray(i)?i.forEach(s=>r(n,s)):r(n,i)}),e}},Ua=async(t,e)=>typeof e=="function"?e(t):e,Z3=async(t,e,r)=>{const n=await Ua(e,t.TOKEN),i=await Ua(e,t.USERNAME),s=await Ua(e,t.PASSWORD),a=await Ua(e,t.HEADERS),o=typeof r?.getHeaders=="function"&&r?.getHeaders()||{},c=Object.entries({Accept:"application/json",...a,...e.headers,...o}).filter(([u,f])=>u0(f)).reduce((u,[f,d])=>({...u,[f]:String(d)}),{});if(Kf(n)&&(c.Authorization=`Bearer ${n}`),Kf(i)&&Kf(s)){const u=V3(`${i}:${s}`);c.Authorization=`Basic ${u}`}return e.body&&(e.mediaType?c["Content-Type"]=e.mediaType:ky(e.body)?c["Content-Type"]=e.body.type||"application/octet-stream":tc(e.body)?c["Content-Type"]="text/plain":G3(e.body)||(c["Content-Type"]="application/json")),c},Q3=t=>{if(t.body)return t.body},e5=async(t,e,r,n,i,s,a)=>{const o=Zs.CancelToken.source(),c={url:r,headers:s,data:n??i,method:e.method,withCredentials:t.WITH_CREDENTIALS,cancelToken:o.token};Object.keys(t.HEADERS||{}).filter(f=>f.toLowerCase()==="accept").map(f=>t.HEADERS[f]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),a(()=>o.cancel("The user aborted a request."));try{return await Zs.request(c)}catch(f){const d=f;if(d.response)return d.response;throw f}},t5=(t,e)=>{if(e){const r=t.headers[e];if(tc(r))return r}},r5=t=>{if(t.status!==204)return t.data},n5=(t,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(n)throw new ta(t,e,n);if(!e.ok)throw new ta(t,e,"Generic Error")},i5=(t,e)=>new Ty(async(r,n,i)=>{try{const s=X3(t,e),a=Y3(e),o=Q3(e),c=await Z3(t,e,a);if(!i.isCancelled){const u=await e5(t,e,s,o,a,c,i),f=r5(u),d=t5(u,e.responseHeader),h={url:s,ok:W3(u.status),status:u.status,statusText:u.statusText,body:d??f};n5(e,h);const g=h.body;try{g.__headers=u.headers}catch{}r(g)}}catch(s){n(s)}}),s5=class extends Sy{constructor(t){super(t)}request(t){return i5(this.config,t)}},By=class{constructor(t){this.httpRequest=t}getAccount(t,e){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:t},query:{ledger_version:e}})}getAccountResources(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountModules(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountResource(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:t,resource_type:e},query:{ledger_version:r}})}getAccountModule(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:t,module_name:e},query:{ledger_version:r}})}},My=class{constructor(t){this.httpRequest=t}getBlockByHeight(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:t},query:{with_transactions:e}})}getBlockByVersion(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:t},query:{with_transactions:e}})}},Cy=class{constructor(t){this.httpRequest=t}getEventsByCreationNumber(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:t,creation_number:e},query:{start:r,limit:n}})}getEventsByEventHandle(t,e,r,n,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:t,event_handle:e,field_name:r},query:{start:n,limit:i}})}},Iy=class{constructor(t){this.httpRequest=t}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(t){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:t}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},Uy=class{constructor(t){this.httpRequest=t}getTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}getRawTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}},Oy=class{constructor(t){this.httpRequest=t}getTransactions(t,e){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:t,limit:e}})}submitTransaction(t){return this.httpRequest.request({method:"POST",url:"/transactions",body:t,mediaType:"application/json"})}getTransactionByHash(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:t}})}getTransactionByVersion(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:t}})}getAccountTransactions(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:t},query:{start:e,limit:r}})}submitBatchTransactions(t){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:t,mediaType:"application/json"})}simulateTransaction(t,e,r,n){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:e,estimate_gas_unit_price:r,estimate_prioritized_gas_unit_price:n},body:t,mediaType:"application/json"})}encodeSubmission(t){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:t,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},qy=class{constructor(t){this.httpRequest=t}view(t,e){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:e},body:t,mediaType:"application/json"})}},Ny=class{constructor(t,e=s5){var r,n,i,s;this.request=new e({BASE:(r=t?.BASE)!=null?r:"/v1",VERSION:(n=t?.VERSION)!=null?n:"1.2.0",WITH_CREDENTIALS:(i=t?.WITH_CREDENTIALS)!=null?i:!1,CREDENTIALS:(s=t?.CREDENTIALS)!=null?s:"include",TOKEN:t?.TOKEN,USERNAME:t?.USERNAME,PASSWORD:t?.PASSWORD,HEADERS:t?.HEADERS,ENCODE_PATH:t?.ENCODE_PATH}),this.accounts=new By(this.request),this.blocks=new My(this.request),this.events=new Cy(this.request),this.general=new Iy(this.request),this.tables=new Uy(this.request),this.transactions=new Oy(this.request),this.view=new qy(this.request)}},a5={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Ly=(t=>(t.ACCOUNT_NOT_FOUND="account_not_found",t.RESOURCE_NOT_FOUND="resource_not_found",t.MODULE_NOT_FOUND="module_not_found",t.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",t.VERSION_NOT_FOUND="version_not_found",t.TRANSACTION_NOT_FOUND="transaction_not_found",t.TABLE_ITEM_NOT_FOUND="table_item_not_found",t.BLOCK_NOT_FOUND="block_not_found",t.VERSION_PRUNED="version_pruned",t.BLOCK_PRUNED="block_pruned",t.INVALID_INPUT="invalid_input",t.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",t.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",t.VM_ERROR="vm_error",t.HEALTH_CHECK_FAILED="health_check_failed",t.MEMPOOL_IS_FULL="mempool_is_full",t.INTERNAL_ERROR="internal_error",t.WEB_FRAMEWORK_ERROR="web_framework_error",t.BCS_NOT_SUPPORTED="bcs_not_supported",t.API_DISABLED="api_disabled",t))(Ly||{}),Dy=(t=>(t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend",t))(Dy||{}),Fy=(t=>(t.VALIDATOR="validator",t.FULL_NODE="full_node",t))(Fy||{}),o5={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},c5={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},f5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},u5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},l5={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},d5={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},h5={type:"Enum"},p5={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},x5={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},y5={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},g5={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},b5={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},m5={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},w5={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},v5={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},_5={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},E5={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},S5={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},A5={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},T5={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},R5={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},P5={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},k5={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},B5={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},M5={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},C5={type:"string"},I5={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},U5={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},O5={type:"string"},q5={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},N5={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},L5={type:"string"},D5={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},is_view:{type:"boolean",description:"Whether the function is a view function or not",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},F5={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},H5={type:"Enum"},K5={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},z5={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},$5={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},j5={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},G5={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},W5={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},V5={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},J5={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},X5={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},Y5={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},Z5={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},Q5={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},e8={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},t8={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},r8={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},n8={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},i8={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},s8={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},a8={type:"Enum"},o8={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},c8={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},f8={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},u8={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},l8={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},d8={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},h8={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},p8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},x8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},y8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},g8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},b8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},m8={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},w8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},v8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},_8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},E8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},S8={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},A8={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},T8={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},R8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},P8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},k8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},B8={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},M8={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},C8={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},I8={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},U8={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},O8={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},q8={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},N8={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},L8={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},D8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},F8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},H8={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},K8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},z8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},$8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},j8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},G8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},W8={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},V8={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},J8={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}};function rc(t,e,r){if(!e?.includes(typeof t))throw new Error(`Invalid arg: ${t} type should be ${e instanceof Array?e.join(" or "):e}`)}function Hy(t){if(rc(t,["boolean","string"]),typeof t=="boolean")return t;if(t==="true")return!0;if(t==="false")return!1;throw new Error("Invalid boolean string.")}function Fi(t){if(rc(t,["number","string"]),typeof t=="number")return t;const e=Number.parseInt(t,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}function Hi(t){return rc(t,["number","bigint","string"]),BigInt(t)}function Ky(t,e,r){if(e instanceof Ai){r.serializeBool(Hy(t));return}if(e instanceof En){r.serializeU8(Fi(t));return}if(e instanceof ts){r.serializeU16(Fi(t));return}if(e instanceof rs){r.serializeU32(Fi(t));return}if(e instanceof Ti){r.serializeU64(Hi(t));return}if(e instanceof Ri){r.serializeU128(Hi(t));return}if(e instanceof ns){r.serializeU256(Hi(t));return}if(e instanceof Ln){let n;if(typeof t=="string"||t instanceof qe)n=Nt.fromHex(t);else if(t instanceof Nt)n=t;else throw new Error("Invalid account address.");n.serialize(r);return}if(e instanceof is){if(e.value instanceof En){if(t instanceof Uint8Array){r.serializeBytes(t);return}if(typeof t=="string"){r.serializeStr(t);return}}if(!Array.isArray(t))throw new Error("Invalid vector args.");r.serializeU32AsUleb128(t.length),t.forEach(n=>Ky(n,e.value,r));return}if(e instanceof Pi){const{address:n,module_name:i,name:s}=e.value;if(`${qe.fromUint8Array(n.address).toShortString()}::${i.value}::${s.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");rc(t,["string"]),r.serializeStr(t);return}throw new Error("Unsupported arg type.")}function X8(t,e){if(e instanceof Ai)return new Zo(Hy(t));if(e instanceof En)return new $o(Fi(t));if(e instanceof ts)return new jo(Fi(t));if(e instanceof rs)return new Go(Fi(t));if(e instanceof Ti)return new Wo(Hi(t));if(e instanceof Ri)return new Vo(Hi(t));if(e instanceof ns)return new Jo(Hi(t));if(e instanceof Ln){let r;if(typeof t=="string"||t instanceof qe)r=Nt.fromHex(t);else if(t instanceof Nt)r=t;else throw new Error("Invalid account address.");return new Xo(r)}if(e instanceof is&&e.value instanceof En){if(!(t instanceof Uint8Array))throw new Error(`${t} should be an instance of Uint8Array`);return new Yo(t)}throw new Error("Unknown type for TransactionArgument.")}var Y8="APTOS::RawTransaction",Z8="APTOS::RawTransactionWithData",ho=class{constructor(t,e){this.rawTxnBuilder=e,this.signingFunction=t}build(t,e,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,e,r)}static getSigningMessage(t){const e=$i.create();if(t instanceof as)e.update(Y8);else if(t instanceof Fo)e.update(Z8);else throw new Error("Unknown transaction type.");const r=e.digest(),n=Kn(t),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i}},Xa=class extends ho{constructor(t,e,r){super(t,r),this.publicKey=e}rawToSigned(t){const e=ho.getSigningMessage(t),r=this.signingFunction(e),n=new No(new Dr(this.publicKey),r);return new ga(t,n)}sign(t){return Kn(this.rawToSigned(t))}},Q8=class extends ho{constructor(t,e){super(t),this.publicKey=e}rawToSigned(t){const e=ho.getSigningMessage(t),r=this.signingFunction(e),n=new Lo(this.publicKey,r);return new ga(t,n)}sign(t){return Kn(this.rawToSigned(t))}},hu=class{constructor(t,e){this.abiMap=new Map,t.forEach(r=>{const n=new t0(r),i=Qo.deserialize(n);let s;if(i instanceof ji){const a=i,{address:o,name:c}=a.module_name;s=`${qe.fromUint8Array(o.address).toShortString()}::${c.value}::${a.name}`}else s=i.name;if(this.abiMap.has(s))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(s,i)}),this.builderConfig={maxGasAmount:BigInt(xy),expSecFromNow:yy,...e}}static toBCSArgs(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>{const i=new jt;return Ky(r,t[n].type_tag,i),i.getBytes()})}static toTransactionArguments(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>X8(r,t[n].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,e,r){const n=e.map(a=>new ss(a).parseTypeTag());let i;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const s=this.abiMap.get(t);if(s instanceof ji){const a=s,o=hu.toBCSArgs(a.args,r);i=new Ko(new li(a.module_name,new gr(a.name),n,o))}else if(s instanceof ec){const a=s,o=hu.toTransactionArguments(a.args,r);i=new Ho(new Do(a.code,n,o))}else throw new Error("Unknown ABI format.");return i}build(t,e,r){const{sender:n,sequenceNumber:i,gasUnitPrice:s,maxGasAmount:a,expSecFromNow:o,chainId:c}=this.builderConfig;if(!s)throw new Error("No gasUnitPrice provided.");const u=n instanceof Nt?n:Nt.fromHex(n),f=BigInt(Math.floor(Date.now()/1e3)+Number(o)),d=this.buildTransactionPayload(t,e,r);if(d)return new as(u,BigInt(i),d,BigInt(a),BigInt(s),f,new zo(Number(c)));throw new Error("Invalid ABI.")}},l0=class{constructor(t,e){this.aptosClient=t,this.builderConfig=e}async fetchABI(t){const r=(await this.aptosClient.getAccountModules(t)).map(i=>i.abi).flatMap(i=>i.exposed_functions.filter(s=>s.is_entry).map(s=>({fullName:`${i.address}::${i.name}::${s.name}`,...s}))),n=new Map;return r.forEach(i=>{n.set(i.fullName,i)}),n}async build(t,e,r){if(t=(q=>q.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[s,a]=t.split("::"),o=await this.fetchABI(s);if(!o.has(t))throw new Error(`${t} doesn't exist.`);const c=o.get(t),f=c.params.filter(q=>q!=="signer"&&q!=="&signer").map((q,U)=>new wa(`var${U}`,new ss(q,e).parseTypeTag())),d=new ji(c.name,mi.fromStr(`${s}::${a}`),"",c.generic_type_params.map((q,U)=>new ma(`${U}`)),f),{sender:h,...g}=this.builderConfig,b=h instanceof Nt?qe.fromUint8Array(h.address):h,[{sequence_number:S},_,{gas_estimate:C}]=await Promise.all([g?.sequenceNumber?Promise.resolve({sequence_number:g?.sequenceNumber}):this.aptosClient.getAccount(b),g?.chainId?Promise.resolve(g?.chainId):this.aptosClient.getChainId(),g?.gasUnitPrice?Promise.resolve({gas_estimate:g?.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new hu([Kn(d)],{sender:h,sequenceNumber:S,chainId:_,gasUnitPrice:BigInt(C),...g}).build(t,e,r)}};ft([o3(600*1e3)],l0.prototype,"fetchABI");var Os=class{constructor(t,e,r=!1){if(!t)throw new Error("Node URL cannot be empty.");const n=e==null?{}:{...e};r?this.nodeUrl=t:this.nodeUrl=i3(t),n.BASE=this.nodeUrl,e?.WITH_CREDENTIALS===!1?n.WITH_CREDENTIALS=!1:n.WITH_CREDENTIALS=!0,this.client=new Ny(n)}async getAccount(t){return this.client.accounts.getAccount(qe.ensure(t).hex())}async getAccountTransactions(t,e){var r;return this.client.transactions.getAccountTransactions(qe.ensure(t).hex(),(r=e?.start)==null?void 0:r.toString(),e?.limit)}async getAccountModules(t,e){const r=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await Bh(r,t,1e3,e)}async getAccountModule(t,e,r){var n;return this.client.accounts.getAccountModule(qe.ensure(t).hex(),e,(n=r?.ledgerVersion)==null?void 0:n.toString())}async getAccountResources(t,e){const r=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await Bh(r,t,9999,e)}async getAccountResource(t,e,r){var n;return this.client.accounts.getAccountResource(qe.ensure(t).hex(),e,(n=r?.ledgerVersion)==null?void 0:n.toString())}static generateBCSTransaction(t,e){return new Xa(n=>{const i=t.signBuffer(n);return new Jt.Ed25519Signature(i.toUint8Array())},t.pubKey().toUint8Array()).sign(e)}static generateBCSSimulation(t,e){return new Xa(n=>{const i=new Uint8Array(64);return new Jt.Ed25519Signature(i)},t.pubKey().toUint8Array()).sign(e)}async generateTransaction(t,e,r){const n={sender:t};if(r?.sequence_number&&(n.sequenceNumber=r.sequence_number),r?.gas_unit_price&&(n.gasUnitPrice=r.gas_unit_price),r?.max_gas_amount&&(n.maxGasAmount=r.max_gas_amount),r?.expiration_timestamp_secs){const s=Number.parseInt(r.expiration_timestamp_secs,10);n.expSecFromNow=s-Math.floor(Date.now()/1e3)}return new l0(this,n).build(e.function,e.type_arguments,e.arguments)}async signTransaction(t,e){return Promise.resolve(Os.generateBCSTransaction(t,e))}async getEventsByCreationNumber(t,e,r){var n;return this.client.events.getEventsByCreationNumber(qe.ensure(t).hex(),e.toString(),(n=r?.start)==null?void 0:n.toString(),r?.limit)}async getEventsByEventHandle(t,e,r,n){var i;return this.client.events.getEventsByEventHandle(qe.ensure(t).hex(),e,r,(i=n?.start)==null?void 0:i.toString(),n?.limit)}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,e,r){let n;return t instanceof du?n=Os.generateBCSSimulation(t,e):t instanceof xa?n=new Q8(()=>{const{threshold:s}=t,a=[],o=[];for(let u=0;u<s;u+=1)a.push(u),o.push(new Jt.Ed25519Signature(new Uint8Array(64)));const c=Jt.MultiEd25519Signature.createBitmap(a);return new Jt.MultiEd25519Signature(o,c)},t).sign(e):n=new Xa(()=>{const s=new Uint8Array(64);return new Jt.Ed25519Signature(s)},t.toBytes()).sign(e),this.submitBCSSimulation(n,r)}async submitSignedBCSTransaction(t){return this.client.request.request({url:"/transactions",method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(t,e){var r,n,i;const s={estimate_gas_unit_price:(r=e?.estimateGasUnitPrice)!=null?r:!1,estimate_max_gas_amount:(n=e?.estimateMaxGasAmount)!=null?n:!1,estimate_prioritized_gas_unit_price:(i=e?.estimatePrioritizedGasUnitPrice)!=null?i:!1};return this.client.request.request({url:"/transactions/simulate",query:s,method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(t){var e;return this.client.transactions.getTransactions((e=t?.start)==null?void 0:e.toString(),t?.limit)}async getTransactionByHash(t){return this.client.transactions.getTransactionByHash(t)}async getTransactionByVersion(t){return this.client.transactions.getTransactionByVersion(t.toString())}async transactionPending(t){try{return(await this.client.transactions.getTransactionByHash(t)).type==="pending_transaction"}catch(e){if(e?.status===404)return!0;throw e}}async waitForTransactionWithResult(t,e){var r,n;const i=(r=e?.timeoutSecs)!=null?r:s3,s=(n=e?.checkSuccess)!=null?n:!1;let a=!0,o=0,c;for(;a&&!(o>=i);){try{if(c=await this.client.transactions.getTransactionByHash(t),a=c.type==="pending_transaction",!a)break}catch(u){const f=u instanceof ta,d=f&&u.status!==404&&u.status>=400&&u.status<500;if(!f||d)throw u}await n3(1e3),o+=1}if(c===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new t4(`Waiting for transaction ${t} timed out after ${i} seconds`,c);if(!s)return c;if(!c?.success)throw new r4(`Transaction ${t} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(t,e){await this.waitForTransactionWithResult(t,e)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,e,r){var n;return await this.client.tables.getTableItem(t,e,(n=r?.ledgerVersion)==null?void 0:n.toString())}async generateRawTransaction(t,e,r){const[{sequence_number:n},i,{gas_estimate:s}]=await Promise.all([this.getAccount(t),this.getChainId(),r?.gasUnitPrice?Promise.resolve({gas_estimate:r.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:o,expireTimestamp:c}={maxGasAmount:BigInt(xy),gasUnitPrice:BigInt(s),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+yy),...r};return new Jt.RawTransaction(Jt.AccountAddress.fromHex(t),BigInt(n),e,a,o,c,new Jt.ChainId(i))}async generateSignSubmitTransaction(t,e,r){const n=await this.generateRawTransaction(t.address(),e,r),i=Os.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(i)).hash}async publishPackage(t,e,r,n){const i=new jt;Br(r,i);const s=new Jt.TransactionPayloadEntryFunction(Jt.EntryFunction.natural("0x1::code","publish_package_txn",[],[Ui(e),i.getBytes()]));return this.generateSignSubmitTransaction(t,s,n)}async generateSignSubmitWaitForTransaction(t,e,r){const n=await this.generateSignSubmitTransaction(t,e,r);return this.waitForTransactionWithResult(n,r)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(t){const e=`0x1::coin::CoinStore<${a3}>`,[{gas_estimate:r},n]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),i=n.find(a=>a.type===e);return BigInt(i.data.coin.value)/BigInt(r)}async rotateAuthKeyEd25519(t,e,r){const{sequence_number:n,authentication_key:i}=await this.getAccount(t.address()),s=new du(e),a=new Jt.RotationProofChallenge(Jt.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(n),Jt.AccountAddress.fromHex(t.address()),new Jt.AccountAddress(new qe(i).toUint8Array()),s.pubKey().toUint8Array()),o=qe.fromUint8Array(Kn(a)),c=t.signHexString(o),u=s.signHexString(o),f=new Jt.TransactionPayloadEntryFunction(Jt.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[uu(0),Ui(t.pubKey().toUint8Array()),uu(0),Ui(s.pubKey().toUint8Array()),Ui(c.toUint8Array()),Ui(u.toUint8Array())])),d=await this.generateRawTransaction(t.address(),f,r),h=Os.generateBCSTransaction(t,d);return this.submitSignedBCSTransaction(h)}async lookupOriginalAddress(t){const e=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:r}}=e.data,n=await this.getTableItem(r,{key_type:"address",value_type:"address",key:qe.ensure(t).hex()});return new qe(n)}async getBlockByHeight(t,e){return this.client.blocks.getBlockByHeight(t,e)}async getBlockByVersion(t,e){return this.client.blocks.getBlockByVersion(t,e)}async view(t,e){return this.client.view.view(t,e)}clearCache(t){c3(t)}},It=Os;ft([Wt],It.prototype,"getAccount");ft([Wt],It.prototype,"getAccountTransactions");ft([Wt],It.prototype,"getAccountModules");ft([Wt],It.prototype,"getAccountModule");ft([Wt],It.prototype,"getAccountResources");ft([Wt],It.prototype,"getAccountResource");ft([Wt],It.prototype,"getEventsByCreationNumber");ft([Wt],It.prototype,"getEventsByEventHandle");ft([Wt],It.prototype,"submitSignedBCSTransaction");ft([Wt],It.prototype,"submitBCSSimulation");ft([Wt],It.prototype,"getTransactions");ft([Wt],It.prototype,"getTransactionByHash");ft([Wt],It.prototype,"getTransactionByVersion");ft([Wt],It.prototype,"getLedgerInfo");ft([Oo()],It.prototype,"getChainId");ft([Wt],It.prototype,"getTableItem");ft([Wt,Oo({ttlMs:300*1e3,tags:["gas_estimates"]})],It.prototype,"estimateGasPrice");ft([Wt],It.prototype,"estimateMaxGasAmount");ft([Wt],It.prototype,"getBlockByHeight");ft([Wt],It.prototype,"getBlockByVersion");ft([Wt],It.prototype,"view");var e4=class extends Error{constructor(t,e,r,n){super(e),this.status=t,this.message=e,this.errorCode=r,this.vmErrorCode=n}},t4=class extends Error{constructor(t,e){super(t),this.lastSubmittedTransaction=e}},r4=class extends Error{constructor(t,e){super(t),this.transaction=e}};function Wt(t,e,r){const n=r.value;return r.value=async function(...s){var a,o;try{return await n.apply(this,[...s])}catch(c){throw c instanceof ta?new e4(c.status,JSON.stringify({message:c.message,...c.body}),(a=c.body)==null?void 0:a.error_code,(o=c.body)==null?void 0:o.vm_error_code):c}},r}var zy=class{constructor(t,e,r=!1){let n=null,i=null;if(typeof t=="object"&&n4(t)?(n=t.fullnodeUrl,i=t.indexerUrl,this.network="CUSTOM"):(n=u3[t],i=f3[t],this.network=t),!n||!i)throw new Error("network is not provided");this.aptosClient=new It(n,e,r),this.indexerClient=new cn(i)}};function $y(t,e,r){Object.getOwnPropertyNames(e.prototype).forEach(n=>{const i=Object.getOwnPropertyDescriptor(e.prototype,n);i&&(i.value=function(...s){return this[r][n](...s)},Object.defineProperty(t.prototype,n,i))})}$y(zy,It,"aptosClient");$y(zy,cn,"indexerClient");function n4(t){return t.fullnodeUrl!==void 0&&typeof t.fullnodeUrl=="string"&&t.indexerUrl!==void 0&&typeof t.indexerUrl=="string"}var jy=class{constructor(t,e){this.type=t,this.value=e}},Gy=class{constructor(){this.data={}}setProperty(t,e){this.data[t]=e}};function i4(t){let e;return t==="string"||t==="String"?e=new Pi(my):e=new ss(t).parseTypeTag(),e}function Wy(t){const e=t.map.data,r=new Gy;return e.forEach(n=>{const{key:i}=n,s=n.value.value,a=n.value.type,o=i4(a),c=s4(o,s),u=new jy(a,c);r.setProperty(i,u)}),r}function s4(t,e){const r=new t0(new qe(e).toUint8Array());let n="";return t instanceof En?n=r.deserializeU8().toString():t instanceof Ti?n=r.deserializeU64().toString():t instanceof Ri?n=r.deserializeU128().toString():t instanceof Ai?n=r.deserializeBool()?"true":"false":t instanceof Ln?n=qe.fromUint8Array(r.deserializeFixedBytes(32)).hex():t instanceof Pi&&t.isStringTypeTag()?n=r.deserializeStr():n=e,n}var a4={};Uo(a4,{PropertyMap:()=>Gy,PropertyValue:()=>jy,Token:()=>c4,TokenData:()=>o4});var o4=class{constructor(t,e,r,n,i,s,a,o){this.collection=t,this.description=e,this.name=r,this.maximum=n,this.supply=i,this.uri=s,this.default_properties=Wy(a),this.mutability_config=o}},c4=class{constructor(t,e,r){this.id=t,this.amount=e,this.token_properties=Wy(r)}};class f4 extends To{signerInstance;_publicKey;constructor(e){super(e),this.base=["aptom",1e8]}async getProvider(){return this.providerInstance??=new It(this.providerUrl)}async getTx(e){const n=await(await this.getProvider()).waitForTransactionWithResult(e,{timeoutSecs:1,checkSuccess:!0}),i=n?.payload;if(!n.success)throw new Error(n?.vm_status??"Unknown Aptos error");if(!(i?.function==="0x1::coin::transfer"&&i?.type_arguments[0]==="0x1::aptos_coin::AptosCoin"&&n?.vm_status==="Executed successfully"))throw new Error(`Aptos tx ${e} failed validation`);const s=n.type==="pending_transaction";return{to:i.arguments[0],from:n.sender,amount:new Ue(i.arguments[1]),pending:s,confirmed:!s}}ownerToAddress(e){const r=Np.sha3_256.create();return r.update(Q.Buffer.from(e)),r.update("\0"),`0x${r.hex()}`}async sign(e){return await this.getSigner().sign(e)}getSigner(){return this.signerInstance??=new ao(this.wallet,this._publicKey)}async verify(e,r,n){return await ao.verify(e,r,n)}async getCurrentHeight(){return new Ue((await(await this.getProvider()).client.blocks.httpRequest.request({method:"GET",url:"/"})).block_height)}async getFee(e,r){const n=await this.getProvider();if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const s=await new l0(n,{sender:this.address}).build("0x1::coin::transfer",["0x1::aptos_coin::AptosCoin"],[r??"0x149f7dc9c8e43c14ab46d3a6b62cfe84d67668f764277411f98732bf6718acf9",new Ue(e).toNumber()]),o=new Xa(f=>{const d=new Uint8Array(64);return new Jt.Ed25519Signature(d)},await this.getPublicKey()).sign(s),c={estimate_gas_unit_price:!0,estimate_max_gas_amount:!0},u=await n.client.request.request({url:"/transactions/simulate",query:c,method:"POST",body:o,mediaType:"application/x.aptos.signed_transaction+bcs"});return{gasUnitPrice:+u[0].gas_unit_price,maxGasAmount:+u[0].max_gas_amount}}async sendTx(e){return(await this.wallet.signAndSubmitTransaction(e)).hash}async createTx(e,r,n){return{txId:void 0,tx:{arguments:[r,new Ue(e).toNumber()],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]}}}async getPublicKey(){return this._publicKey??=Q.Buffer.from((await this.wallet.account()).publicKey.toString().slice(2),"hex")}async ready(){this._publicKey=await this.getPublicKey(),this._address=this.ownerToAddress(this._publicKey);const e=await this.getProvider();this._address=await e.lookupOriginalAddress(this.address??"").then(r=>r.toString()).catch(r=>this._address),this._address?.length==66&&this._address.charAt(2)==="0"&&(this._address=this._address.slice(0,2)+this._address.slice(3))}}class u4 extends Ro{}class l4 extends Ro{async createTx(e,r,n){const i=this.w3signer,s={to:r,from:this.address,value:e.toString(),gasLimit:BigInt(0)},a=await this.provider.estimateGas(s);return s.gasLimit=a,{tx:await i.populateTransaction(s),txId:void 0}}async getTx(e){const n=await this.provider.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");if(!n.to)throw new Error(`Unable to resolve transactions ${e} receiver`);return{from:n.from,to:n.to,blockHeight:n.blockNumber?new Ue(n.blockNumber):void 0,amount:new Ue(n.value.toString()),pending:!n.blockNumber,confirmed:await n.confirmations()>=this.minConfirm}}async ready(){const e=this.wallet;this.provider=e;const r=await e.getSigner();r._signTypedData=async(n,i,s)=>r.signTypedData(n,i,s),e.getSigner=()=>r,this.wallet=e,await super.ready()}}function d4(t){switch(t.token){case"ethereum":return Ci("ethereum",t.providerName,{irys:t.irys,name:"ethereum",ticker:"ETH",providerUrl:t.providerUrl??"https://cloudflare-eth.com/",wallet:t.wallet});case"matic":return Ci("ethereum",t.providerName,{irys:t.irys,name:"matic",ticker:"MATIC",providerUrl:t.providerUrl??"https://polygon-rpc.com",wallet:t.wallet,minConfirm:1});case"arbitrum":return Ci("ethereum",t.providerName,{irys:t.irys,name:"arbitrum",ticker:"ETH",providerUrl:t.providerUrl??"https://arb1.arbitrum.io/rpc",wallet:t.wallet});case"bnb":return Ci("ethereum",t.providerName,{irys:t.irys,name:"bnb",ticker:"BNB",providerUrl:t.providerUrl??"https://bsc-dataseed.binance.org",wallet:t.wallet});case"avalanche":return Ci("ethereum",t.providerName,{irys:t.irys,name:"avalanche",ticker:"AVAX",providerUrl:t.providerUrl??"https://api.avax.network/ext/bc/C/rpc",wallet:t.wallet});case"boba-eth":return Ci("ethereum",t.providerName,{irys:t.irys,name:"boba-eth",ticker:"ETH",providerUrl:t.providerUrl??"https://mainnet.boba.network/",minConfirm:1,wallet:t.wallet});case"boba":{const e=new Av({irys:t.irys,name:"boba",ticker:"BOBA",providerUrl:t.providerUrl??"https://mainnet.boba.network/",contractAddress:t.contractAddress??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:t.wallet});return e.price=async()=>{const r=await Ct.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${e.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await rr.checkAndThrow(r,"Getting price data"),!r?.data?.rate)throw new Error(`unable to get price for ${e.name}`);return+r.data.rate},e}case"solana":return new Ww({irys:t.irys,name:"solana",ticker:"SOL",providerUrl:t.providerUrl??"https://api.mainnet-beta.solana.com/",wallet:t.wallet});case"near":return new Gw({irys:t.irys,name:"near",ticker:"NEAR",providerUrl:t.providerUrl??"https://rpc.mainnet.near.org",wallet:t.wallet});case"aptos":return new f4({irys:t.irys,name:"aptos",ticker:"APTOS",providerUrl:t.providerUrl??"https://fullnode.mainnet.aptoslabs.com/v1",wallet:t.wallet});default:throw new Error(`Unknown/Unsupported token ${t.token}`)}}function Ci(t,e,r){switch(t){case"ethereum":switch(e){case"ethersv5":return new u4(r);case"ethersv6":return new l4(r);default:return new Ro(r)}}}class h4{irys;constructor(e){this.irys=e}async upload(e,r){return this.irys.uploadWithReceipt(e,r)}async uploadProof(e){return await this.irys.uploadWithReceipt("",{tags:Object.entries({dataProtocol:"Provenance-Confirmation",...e}).map(([r,n])=>({name:Ih[r],value:n}))})}async getAllProofs(e,r){const n=Object.entries(e).map(([o,c])=>({name:Ih[o],values:[c]}));if(n.length===0)throw new Error("Getting a provenance proof requires at least one query element");const i=`
    query ($tags: [TagFilter!]) {
      transactions(tags: $tags) {
        edges {
          node {
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            tags {
              name
              value
            }
          }
        }
      }
    }
    `,s=[];let a=null;do{const o=await this.irys.api.post("/graphql",{query:i,variables:{tags:n,limit:r?.limit??null,after:a}},void 0);a=o.data.data.transactions?.pageInfo?.hasNextPage?o.data.data.transactions.pageInfo.endCursor:null,s.push(...o.data.data.transactions.edges.map(c=>c.node))}while(a);return s}async getProof(e){const r=(await this.getAllProofs(e,{limit:1})).at(0);if(!r)throw new Error(`Unable to locate proof with fields ${JSON.stringify(e)}`);return r}}const Ih={dataProtocol:"Data-Protocol",hashingAlgo:"Hashing-Algo",dataHash:"Data-Hash",uploadedFor:"Uploaded-For",prompt:"Prompt",promptHash:"Prompt-Hash",model:"Model"};class p4{irys;constructor(e){this.irys=e}async getById(e){const r=(await this.query({ids:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with id ${e}`);return r}async getByOwner(e){const r=(await this.query({owners:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with owner ${e}`);return r}async getByTag(e,r){const n=(await this.query({tags:[{name:e,values:[r]}],limit:1})).at(0);if(!n)throw new Error(`Unable to locate tx with tag ${e}:${r}`);return n}async query(e){const r=`
    query ($ids: [String!], $after: String, $currency: String, $owners: [String!], $limit: Int, $order: SortOrder, $hasTags: Boolean, $tags: [TagFilter!]) {
      transactions(ids: $ids, after: $after, currency: $currency, owners: $owners, limit: $limit, order: $order, hasTags: $hasTags, tags: $tags) {
        edges {
          cursor
          node {
            address
            currency
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            signature
            tags {
              name
              value
            }
            timestamp
          }
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
    `,n=[];let i=null;do{const s=await this.irys.api.post("/graphql",{query:r,variables:{...e,after:i??e.after}},void 0);i=s.data.data.transactions?.pageInfo?.hasNextPage?s.data.data.transactions.pageInfo.endCursor:null,n.push(...s.data.data.transactions.edges.map(a=>a.node))}while(i);return n}}var ii={},As={},Ts={},Rs={},Uh;function Vy(){if(Uh)return Rs;Uh=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.ValidationError=void 0;class t extends Error{constructor(r){super(r),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(r){return new this(r)}}return Rs.ValidationError=t,Rs}var Ps={},Oh;function Jy(){if(Oh)return Ps;Oh=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.PromisePoolError=void 0;class t extends Error{constructor(r,n){super(),this.raw=r,this.item=n,this.name=this.constructor.name,this.message=this.messageFrom(r),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(r,n){return new this(r,n)}messageFrom(r){return r instanceof Error||typeof r=="object"?r.message:typeof r=="string"||typeof r=="number"?r.toString():""}}return Ps.PromisePoolError=t,Ps}var ks={},qh;function Xy(){if(qh)return ks;qh=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.StopThePromisePoolError=void 0;class t extends Error{}return ks.StopThePromisePoolError=t,ks}var Nh;function x4(){if(Nh)return Ts;Nh=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.PromisePoolExecutor=void 0;const t=pu(),e=Vy(),r=Jy(),n=Xy();class i{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=a=>a,this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(a){if(!this.isValidConcurrency(a))throw e.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${a}" (${typeof a})`);return this.meta.concurrency=a,this}isValidConcurrency(a){return typeof a=="number"&&a>=1}withTaskTimeout(a){return this.meta.taskTimeout=a,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(a){return this.meta.shouldResultsCorrespond=a,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(a){return this.meta.items=a,this}items(){return this.meta.items}itemsCount(){const a=this.items();return Array.isArray(a)?a.length:NaN}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(a){return this.handler=a,this}hasErrorHandler(){return!!this.errorHandler}handleError(a){return this.errorHandler=a,this}onTaskStarted(a){return this.onTaskStartedHandlers=a,this}onTaskFinished(a){return this.onTaskFinishedHandlers=a,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new n.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw e.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const a=this.taskTimeout();if(!(a==null||typeof a=="number"&&a>=0))throw e.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(a)}" (${typeof a})`);if(!this.areItemsValid())throw e.ValidationError.createFrom(`"items" must be an array, an iterable or an async iterable. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw e.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(o=>{if(o&&typeof o!="function")throw e.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof o}"`)}),this.onTaskFinishedHandlers.forEach(o=>{if(o&&typeof o!="function")throw e.ValidationError.createFrom(`The error handler must be a function. Received "${typeof o}"`)}),this}areItemsValid(){const a=this.items();return!!(Array.isArray(a)||typeof a[Symbol.iterator]=="function"||typeof a[Symbol.asyncIterator]=="function")}prepareResultsArray(){const a=this.items();return Array.isArray(a)?this.shouldUseCorrespondingResults()?(this.meta.results=Array(a.length).fill(t.PromisePool.notRun),this):this:this}async process(){let a=0;for await(const o of this.items()){if(this.isStopped())break;this.shouldUseCorrespondingResults()&&(this.results()[a]=t.PromisePool.notRun),this.startProcessing(o,a),a+=1,await this.waitForProcessingSlot()}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(a,o){const c=this.createTaskFor(a,o).then(u=>{this.save(u,o).removeActive(c)}).catch(async u=>{await this.handleErrorFor(u,a,o),this.removeActive(c)}).finally(()=>{this.processedItems().push(a),this.runOnTaskFinishedHandlers(a)});this.tasks().push(c),this.runOnTaskStartedHandlers(a)}async createTaskFor(a,o){if(this.taskTimeout()===void 0)return this.handler(a,o,this);const[c,u]=this.createTaskTimeout(a);return Promise.race([this.handler(a,o,this),c()]).finally(u)}createTaskTimeout(a){let o;return[async()=>new Promise((f,d)=>{o=setTimeout(()=>{d(new r.PromisePoolError(`Task in promise pool timed out after ${this.taskTimeout()}ms`,a))},this.taskTimeout())}),()=>clearTimeout(o)]}save(a,o){return this.shouldUseCorrespondingResults()?this.results()[o]=a:this.results().push(a),this}removeActive(a){return this.tasks().splice(this.tasks().indexOf(a),1),this}async handleErrorFor(a,o,c){if(this.shouldUseCorrespondingResults()&&(this.results()[c]=t.PromisePool.failed),!this.isStoppingThePoolError(a)){if(this.isValidationError(a))throw this.markAsStopped(),a;this.hasErrorHandler()?await this.runErrorHandlerFor(a,o):this.saveErrorFor(a,o)}}isStoppingThePoolError(a){return a instanceof n.StopThePromisePoolError}isValidationError(a){return a instanceof e.ValidationError}async runErrorHandlerFor(a,o){try{await this.errorHandler?.(a,o,this)}catch(c){this.rethrowIfNotStoppingThePool(c)}}runOnTaskStartedHandlers(a){this.onTaskStartedHandlers.forEach(o=>{o(a,this)})}runOnTaskFinishedHandlers(a){this.onTaskFinishedHandlers.forEach(o=>{o(a,this)})}rethrowIfNotStoppingThePool(a){if(!this.isStoppingThePoolError(a))throw a}saveErrorFor(a,o){this.errors().push(r.PromisePoolError.createFrom(a,o))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}return Ts.PromisePoolExecutor=i,Ts}var Lh;function pu(){if(Lh)return As;Lh=1,Object.defineProperty(As,"__esModule",{value:!0}),As.PromisePool=void 0;const t=x4();class e{constructor(n){this.timeout=void 0,this.concurrency=10,this.items=n??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[],this.shouldResultsCorrespond=!1}withConcurrency(n){return this.concurrency=n,this}static withConcurrency(n){return new this().withConcurrency(n)}withTaskTimeout(n){return this.timeout=n,this}static withTaskTimeout(n){return new this().withTaskTimeout(n)}for(n){const i=new e(n).withConcurrency(this.concurrency);return typeof this.errorHandler=="function"&&i.handleError(this.errorHandler),typeof this.timeout=="number"?i.withTaskTimeout(this.timeout):i}static for(n){return new this().for(n)}handleError(n){return this.errorHandler=n,this}onTaskStarted(n){return this.onTaskStartedHandlers.push(n),this}onTaskFinished(n){return this.onTaskFinishedHandlers.push(n),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(n){return new t.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(n).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}return As.PromisePool=e,e.notRun=Symbol("notRun"),e.failed=Symbol("failed"),As}var zf={},Dh;function y4(){return Dh||(Dh=1,Object.defineProperty(zf,"__esModule",{value:!0})),zf}var $f={},Fh;function g4(){return Fh||(Fh=1,Object.defineProperty($f,"__esModule",{value:!0})),$f}var Hh;function b4(){return Hh||(Hh=1,(function(t){var e=ii&&ii.__createBinding||(Object.create?(function(i,s,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(s,a);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,c)}):(function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]})),r=ii&&ii.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=pu();t.default=n.PromisePool,r(y4(),t),r(pu(),t),r(Jy(),t),r(g4(),t),r(Xy(),t),r(Vy(),t)})(ii)),ii}var m4=b4(),w4=mg();const v4=Symbol("not readable"),_4=Symbol("readable"),E4=Symbol("ended"),S4=Symbol("errored"),lr={notReadable:v4,readable:_4,ended:E4,errored:S4};class A4{_stream;_error;_state=lr.notReadable;_size;_rejections=new Set;get closed(){return this._state===lr.ended}constructor(e,{size:r}={}){this._stream=e,this._size=r;const n=["_handleStreamEnd","_handleStreamError"];for(const i of n)Object.defineProperty(this,i,{configurable:!0,writable:!0,value:this[i].bind(this)});e.once("error",this._handleStreamError),e.once("end",this._handleStreamEnd),e.on("readable",()=>{this._state=lr.readable})}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case lr.notReadable:{let e,r;try{e=this._untilReadable(),r=this._untilEnd(),await Promise.race([e.promise,r.promise])}finally{e?.close(),r?.close()}return this.next()}case lr.ended:return this.close(),{done:!0,value:void 0};case lr.errored:throw this.close(),this._error;case lr.readable:{const e=this._size?this._stream.read(this._size):this._stream.read();return e!==null?{done:!1,value:e}:(this._state=lr.notReadable,await new Promise(r=>setTimeout(n=>n(!0),0,r)),this.next())}}}_untilReadable(){let e;const r=new Promise((i,s)=>{e=()=>{this._state=lr.readable,this._rejections.delete(s),i()},this._state,lr.readable,this._stream.once("readable",e),this._rejections.add(s)});return{close:()=>{e!=null&&this._stream.removeListener("readable",e)},promise:r}}_untilEnd(){let e;const r=new Promise((i,s)=>{e=()=>{this._state=lr.ended,this._rejections.delete(s),i()},this._stream.once("end",e),this._rejections.add(s)});return{close:()=>{e!=null&&this._stream.removeListener("end",e)},promise:r}}return(){return this._state=lr.ended,this.next()}throw(e){return this._error=e,this._state=lr.errored,this.next()}close(e){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=lr.ended,this._stream.destroy(e)}_handleStreamError(e){this._error=e,this._state=lr.errored;for(const r of this._rejections)r(e)}_handleStreamEnd(){this._state=lr.ended}get state(){return this._state}}class T4 extends w4.EventEmitter{tokenConfig;api;uploadID;token;chunkSize;batchSize;paused=!1;isResume=!1;uploadOptions;arbundles;constructor(e,r){super({captureRejections:!0}),this.tokenConfig=e,this.arbundles=this.tokenConfig.irys.arbundles,this.api=r,this.token=this.tokenConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e,r){return this.uploadOptions=r,this.arbundles.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.uploadOptions=r?.upload,this.runUpload(e,{...r})}async runUpload(e,r){let n=this.uploadID;const i=r===void 0,s={"x-chunking-version":"2"};let a;if(!n)a=await this.api.get(`/chunks/${this.token}/-1/-1`,{headers:s}),rr.checkAndThrow(a,"Getting upload token"),this.uploadID=n=a.data.id;else{if(a=await this.api.get(`/chunks/${this.token}/${n}/-1`,{headers:s}),a.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(rr.checkAndThrow(a,"Getting upload info"),this.chunkSize!=+a.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+a.data.size}).`)}const{max:o,min:c}=a.data;if(this.chunkSize<+c||this.chunkSize>+o)throw new Error(`Chunk size out of allowed range: ${c} - ${o}`);let u=0;const f=(P,l,x)=>new Promise(m=>{Dn(async A=>{await this.api.post(`/chunks/${this.token}/${n}/${l}`,P,{headers:{"Content-Type":"application/octet-stream",...s},maxBodyLength:1/0,maxContentLength:1/0}).then(v=>{if(v?.status>=300){const M={res:v,id:x,offset:l,size:P.length};throw this.emit("chunkError",M),v?.status===402&&A(new Error("Not enough funds to send data")),M}this.emit("chunkUpload",{id:x,offset:l,size:P.length,totalUploaded:u+=P.length}),m({o:l,d:v})})})}),d=a.data.chunks??[],h=new Hs.PassThrough;let g=Q.Buffer.alloc(0),b=!1,S=!0;h.on("end",()=>b=!0),h.on("error",P=>{throw new Error(`Error processing readable: ${P}`)});const _=async P=>{for(;!b;){if(g.length>=P)return l=Q.Buffer.from(g.slice(0,P)),g=g.slice(P),l;var l=h.read(P);if(l===null){await new Promise(x=>setTimeout(m=>m(!0),0,x));continue}if(l.length===P)return l;g=Q.Buffer.concat([g,l])}for(;g.length>=P;)return l=Q.Buffer.from(g.slice(0,P)),g=g.slice(P),l;return S=!1,g};let C,F;if(!i){C=this.arbundles.createData("",this.tokenConfig.getSigner(),{...r,anchor:r?.anchor??$h.randomBytes(32).toString("base64").slice(0,32)});const P=C.getRaw();F=P.length,h.write(P),u-=P.length}if(Q.Buffer.isBuffer(e))h.write(e),h.end();else if("pipe"in e)e.pipe(h);else throw new Error("Input data is not a buffer or a compatible stream (no .pipe method)");let q=0;const U=new Set;let O=0,$,J,Y;if(!i){J=new Hs.PassThrough;const P=C.getRaw().length;if(this.chunkSize<F)throw new Error(`Configured chunk size is too small for transaction header! (${this.chunkSize} < ${F})`);$=await _(this.chunkSize),O++,q+=$.length,J.write($.slice(P));const l=[this.arbundles.stringToBuffer("dataitem"),this.arbundles.stringToBuffer("1"),this.arbundles.stringToBuffer(C.signatureType.toString()),C.rawOwner,C.rawTarget,C.rawAnchor,C.rawTags,new A4(J)];Y=this.arbundles.deepHash(l)}let ee=d.pop();for(;S;){if(this.paused&&await new Promise(x=>this.on("resume",()=>x(void 0))),ee&&+ee[0]-q<=this.chunkSize){const m=ee[1],A=await _(m);i||J.write(A),q+=m,ee=d.pop(),O++,u+=m;continue}const P=await _(this.chunkSize);for(i||J.write(P);U.size>=this.batchSize;){const[x]=await Promise.race(U);U.delete(x)}const l=(async()=>await f(P,q,++O))().then(x=>[l,x]);U.add(l),q+=P.length}if(J&&J.end(),await Promise.all(U),!i){const P=await Y,l=Q.Buffer.from(await this.tokenConfig.getSigner().sign(P));$.set(l,2),await f($,0,0)}const Z=await this.api.post(`/chunks/${this.token}/${n}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...s},timeout:this.api.config?.timeout??4e4*10});if(Z.status===402)throw new Error("Not enough funds to send data");if(rr.checkAndThrow(Z,"Finalising upload",[201]),Z.status===201)throw new Error(Z.data);return Z.data.verify=rr.verifyReceipt.bind({},this.arbundles,Z.data.data),this.emit("done",Z),Z}get completionPromise(){return new Promise(e=>this.on("done",e))}}const Kh=5e7;class R4{api;token;tokenConfig;utils;contentTypeOverride;forceUseChunking;arbundles;irysTransaction;constructor(e,r,n,i,s){this.api=e,this.token=n,this.tokenConfig=i,this.arbundles=this.tokenConfig.irys.arbundles,this.utils=r,this.irysTransaction=s}async uploadTransaction(e,r){let n;const i=this.arbundles.DataItem.isDataItem(e);if(this.forceUseChunking||i&&e.getRaw().length>=Kh||!i)n=await this.chunkedUploader.uploadTransaction(i?e.getRaw():e,r);else{const{url:s,timeout:a,headers:o}=this.api.getConfig(),c={"Content-Type":"application/octet-stream",...o};if(n=await this.api.post(new URL(`/tx/${this.token}`,s).toString(),e.getRaw(),{headers:c,timeout:a,maxBodyLength:1/0}),n.status===201)throw new Error(n.data)}switch(n.status){case 402:throw new Error("Not enough funds to send data");default:if(n.status>=400)throw new Error(`whilst uploading Irys transaction: ${n.status} ${n.statusText}`)}return n.data.verify=async()=>this.utils.verifyReceipt(n.data),n}async uploadData(e,r){if(typeof e=="string"&&(e=Q.Buffer.from(e)),Q.Buffer.isBuffer(e)&&e.length<=Kh){const n=this.arbundles.createData(e,this.tokenConfig.getSigner(),{...r,anchor:r?.anchor??di.randomBytes(32).toString("base64").slice(0,32)});return await n.sign(this.tokenConfig.getSigner()),(await this.uploadTransaction(n,{...r?.upload})).data}return(await this.chunkedUploader.uploadData(e,r)).data}async concurrentUploader(e,r){const n=[],i=r?.logFunction?r?.logFunction:async o=>{},s=r?.concurrency??5,a=await m4.PromisePool.for(e).withConcurrency(s>=1?s:5).handleError(async(o,c)=>{if(n.push(o),o.message==="Not enough funds to send data")throw o}).process(async(o,c,u)=>{await Dn(async f=>{try{const d=await this.processItem(o,r?.itemOptions);return c%s==0&&await i(`Processed ${c} Items`),r?.resultProcessor?await r.resultProcessor({item:o,res:d,i:c}):{item:o,res:d,i:c}}catch(d){throw d?.message==="Not enough funds to send data"&&f(d),d}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:n,results:a.results}}async processItem(e,r){return this.arbundles.DataItem.isDataItem(e)?this.uploadTransaction(e,{...r?.upload}):this.uploadData(e,r)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,a]of r.entries())i.paths[s]={id:a};return i}get chunkedUploader(){return new T4(this.tokenConfig,this.api)}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}async uploadBundle(e,r){const n=r?.throwawayKey??await this.arbundles.getCryptoDriver().generateJWK(),i=new vo(n),s=e.map(f=>this.arbundles.DataItem.isDataItem(f)?f:this.arbundles.createData(f,i)),a=await this.arbundles.bundleAndSignData(s,i),o=this.arbundles.createData(a.getRaw(),this.tokenConfig.getSigner(),{tags:[{name:"Bundle-Format",value:"binary"},{name:"Bundle-Version",value:"2.0.0"}]});await o.sign(this.tokenConfig.getSigner());const c=await this.uploadTransaction(o,r),u=$e(Q.Buffer.from(await this.arbundles.getCryptoDriver().hash($e.toBuffer($e(i.publicKey)))));return{...c,txs:s,throwawayKey:n,throwawayKeyAddress:u}}}class zh extends R4{irys;constructor(e){super(e.api,e.utils,e.token,e.tokenConfig,e.IrysTransaction),this.irys=e}async uploadFile(e,r){const i=(r?.tags?r.tags.some(({name:s})=>s.toLowerCase()==="content-type"):!1)?r?.tags:[...r?.tags??[],{name:"Content-Type",value:e.type}];return this.uploadData(Q.Buffer.from(await e.arrayBuffer()),{tags:i,...r})}async uploadFolder(e,r){const n=[],i=new Map,s=r?.throwawayKey??await this.irys.arbundles.getCryptoDriver().generateJWK(),a=new vo(s);for(const f of e){const d=f.webkitRelativePath?f.webkitRelativePath:f.name,g=(f.tags?f.tags.some(({name:S})=>S.toLowerCase()==="content-type"):!1)?f.tags:[...f.tags??[],{name:"Content-Type",value:f.type}],b=this.irys.arbundles.createData(Q.Buffer.from(await f.arrayBuffer()),a,{tags:g});await b.sign(a),n.push(b),i.set(d,b.id)}const o=await this.generateManifest({items:i,indexFile:r?.indexFileRelPath}),c=this.irys.arbundles.createData(JSON.stringify(o),r?.seperateManifestTx?this.irys.tokenConfig.getSigner():a,{tags:[{name:"Type",value:"manifest"},{name:"Content-Type",value:"application/x.arweave-manifest+json"},...r?.manifestTags??[]]});r?.seperateManifestTx===!0?(await c.sign(this.irys.tokenConfig.getSigner()),await this.uploadTransaction(c,{...r})):(await c.sign(a),n.push(c));const u=await this.uploadBundle(n,{...r});return{...u.data,manifestId:c.id,manifest:o,throwawayKey:u.throwawayKey,throwawayKeyAddress:u.throwawayKeyAddress,txs:u.txs}}}class t_ extends yp{tokenConfig;uploader;uploadFolder;uploadFile;constructor({url:e,token:r,wallet:n,config:i}){switch(e){case void 0:case"node1":e="https://node1.irys.xyz";break;case"node2":e="https://node2.irys.xyz";break;case"devnet":e="https://devnet.irys.xyz";break}const s=new URL(e);if(super({url:s,arbundles:yw}),this.api=new b1({url:s,timeout:i?.timeout??1e5,headers:i?.headers}),this.tokenConfig=d4({irys:this,token:r.toLowerCase(),wallet:n?.provider,providerUrl:i?.providerUrl??n?.rpcUrl,contractAddress:i?.contractAddress,providerName:n?.name}),this.token=this.tokenConfig.name,s.host==="devnet.irys.network"&&!(i?.providerUrl??(n?.rpcUrl||this.tokenConfig.inheritsRPC)))throw new Error(`Using ${s.host} requires a dev/testnet RPC to be configured! see https://docs.irys.network/sdk/using-devnet`);this.utils=new rr(this.api,this.token,this.tokenConfig),this.uploader=new zh(this),this.funder=new m1(this.utils),this.uploader=new zh(this),this.provenance=new h4(this),this.transactions=new p4(this),this.address="Please run `await Irys.ready()`",this.uploadFolder=this.uploader.uploadFolder.bind(this.uploader),this.uploadFile=this.uploader.uploadFile.bind(this.uploader)}}export{t_ as WebIrys,t_ as default};
